(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"./docs/pagination-editable-table.mdx":function(e,n,t){"use strict";t.r(n);var a=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),i=t("./node_modules/react/index.js"),o=t.n(i),r=t("./node_modules/@mdx-js/react/dist/index.es.js"),s=t("./node_modules/docz/dist/index.esm.js"),l=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js"),u=t.n(l),c=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),b=t("./node_modules/@sinoui/use-rest-page-api/dist/index.js"),d=t.n(b),m=t("./node_modules/sinoui-components/Pagination/index.js"),p=t("./node_modules/sinoui-components/TextInput/index.js"),f=t("./node_modules/sinoui-components/Button/index.js"),g=t("./node_modules/@sinoui/datepicker/build/index.js"),j=t("./node_modules/lodash/debounce.js"),O=t.n(j),h=t("./node_modules/@sinoui/forms/build/index.js"),v=t("./src/index.ts");function x(e){var n=e.value,t=e.onChange;return o.a.createElement(g.a,{value:n,onChange:function(e,n){return t(n)}})}function E(e){var n={};return e.title||(n.title="\u59d3\u540d\u4e0d\u80fd\u4e3a\u7a7a"),n}function P(){var e=d()("/api/pagination-demo",[]),n=e.items,t=e.pagination,a=e.fetch,r=e.remove,s=e.update,l=e.query,b=Object(v.d)(n,{alwaysEditing:!0,validate:E}),g=b.editingRows,j=b.setItems,P=b.items;Object(i.useEffect)(function(){j(n)},[n,j]);var y=function(){var e=Object(c.a)(u.a.mark(function e(n){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(n.id);case 2:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}(),w=Object(i.useMemo)(function(){return O()(s,200)},[s]),_=function(){var e=Object(c.a)(u.a.mark(function e(n,t){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((a=E(t))&&0!==Object.keys(a).length){e.next=4;break}return e.next=4,w(t,!1);case 4:case"end":return e.stop()}},e)}));return function(n,t){return e.apply(this,arguments)}}();return o.a.createElement(o.a.Fragment,null,o.a.createElement(h.d,{onSubmit:l},o.a.createElement(h.a,null,o.a.createElement(h.b,null,"\u59d3\u540d"),o.a.createElement(h.c,{name:"title"})),o.a.createElement(f.b,{type:"submit",raised:!0},"\u67e5\u8be2")),o.a.createElement(v.b,{data:P,editingRows:g,validate:E,onRowChange:_},o.a.createElement(v.a,{title:"\u5e8f\u53f7",order:!0}),o.a.createElement(v.a,{title:"\u6807\u9898",name:"title",editor:p.b}),o.a.createElement(v.a,{title:"\u51fa\u751f\u65e5\u671f",name:"birthday",editor:x}),o.a.createElement(v.a,{title:"\u804c\u52a1",name:"duty",editor:p.b}),o.a.createElement(v.a,{title:"\u64cd\u4f5c",name:"id",render:function(e,n){return o.a.createElement(o.a.Fragment,null,o.a.createElement(f.b,{autoWidth:!0,onClick:function(){return y(n)}},"\u5220\u9664"))}})),o.a.createElement(m.a,{pageSize:t.pageSize,total:t.totalElements,currentPage:t.pageNo+1,onChange:function(e,n){a(e-1,n)}}))}var y=P;P&&P===Object(P)&&Object.isExtensible(P)&&Object.defineProperty(P,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"PaginationEditableDataTableDemo",filename:"docs/PaginationEditableTableDemo.tsx"}}),t.d(n,"default",function(){return C});var w={},_="wrapper";function C(e){var n=e.components,t=Object(a.a)(e,["components"]);return Object(r.b)(_,Object.assign({},w,t,{components:n,mdxType:"MDXLayout"}),Object(r.b)("h1",{id:"\u5206\u9875\u52a0\u8f7d\u6570\u636e\u7684\u53ef\u7f16\u8f91\u6570\u636e\u8868\u683c"},"\u5206\u9875\u52a0\u8f7d\u6570\u636e\u7684\u53ef\u7f16\u8f91\u6570\u636e\u8868\u683c"),Object(r.b)("p",null,"\u53ef\u7f16\u8f91\u6570\u636e\u8868\u683c\u53ef\u4ee5\u4e0e\u5206\u9875\u6570\u636e\u52a0\u8f7d\u76f8\u7ed3\u5408\uff0c\u5b9e\u73b0\u5206\u9875\u52a0\u8f7d\u6570\u636e\u7684\u53ef\u7f16\u8f91\u6570\u636e\u8868\u683c\u3002\u672c\u7ae0\u8282\u4f1a\u7ed3\u5408\uff1a"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object.assign({parentName:"li"},{href:"https://github.com/sinoui/use-rest-page-api"}),"@sinoui/use-rest-page-api")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("a",Object.assign({parentName:"li"},{href:"http://47.93.34.153:10080/sinoui/sinoui/tree/master/packages/sinoui-components/Pagination"}),"sinoui-components/Pagination"))),Object(r.b)("p",null,"\u5b9e\u73b0\u5206\u9875\u52a0\u8f7d\u6570\u636e\u7684\u53ef\u7f16\u8f91\u6570\u636e\u8868\u683c\u3002"),Object(r.b)("pre",null,Object(r.b)("code",Object.assign({parentName:"pre"},{className:"language-tsx"}),"import React, { useEffect, useMemo } from 'react';\nimport useRestPageApi from '@sinoui/use-rest-page-api';\nimport Pagination from 'sinoui-components/Pagination';\nimport TextInput from 'sinoui-components/TextInput';\nimport Button from 'sinoui-components/Button';\nimport DatePicker from '@sinoui/datepicker';\nimport debounce from 'lodash/debounce';\nimport Form, {\n  FormItem,\n  Label,\n  TextInput as TextInputField,\n} from '@sinoui/forms';\nimport EditableDataTable, { TableColumn, useSimpleEditingList } from '../src';\n\ninterface Data {\n  id: string;\n  title?: string;\n  duty?: string;\n  birthday: string;\n}\n\nfunction CusDatePicker({\n  value,\n  onChange,\n}: {\n  value: string;\n  onChange: (value?: string) => void;\n}) {\n  return (\n    <DatePicker value={value} onChange={(event, date) => onChange(date)} />\n  );\n}\n\nfunction validate(data: Data) {\n  const result: any = {};\n\n  if (!data.title) {\n    result.title = '\u59d3\u540d\u4e0d\u80fd\u4e3a\u7a7a';\n  }\n  return result;\n}\n\nfunction PaginationEditableDataTableDemo() {\n  const {\n    items,\n    pagination,\n    fetch,\n    remove: asyncRemove,\n    update,\n    query,\n  } = useRestPageApi<Data>('/api/pagination-demo', []);\n  const { editingRows, setItems, items: data } = useSimpleEditingList<Data>(\n    items,\n    {\n      alwaysEditing: true,\n      validate,\n    },\n  );\n\n  useEffect(() => {\n    setItems(items);\n  }, [items, setItems]);\n\n  const handleOnChange = (pageNumber: number, pageSize: number) => {\n    fetch(pageNumber - 1, pageSize);\n  };\n\n  const handleRemove = async (row: Data) => {\n    await asyncRemove(row.id);\n  };\n\n  const debounceUpdate = useMemo(() => debounce(update, 200), [update]);\n\n  const handleOnRowChange = async (index: number, rowData: Data) => {\n    const validateResult = validate(rowData);\n    if (!validateResult || Object.keys(validateResult).length === 0) {\n      await debounceUpdate(rowData, false);\n    }\n  };\n\n  return (\n    <>\n      <Form onSubmit={query as any}>\n        <FormItem>\n          <Label>\u59d3\u540d</Label>\n          <TextInputField name=\"title\" />\n        </FormItem>\n        <Button type=\"submit\" raised>\n          \u67e5\u8be2\n        </Button>\n      </Form>\n      <EditableDataTable\n        data={data}\n        editingRows={editingRows}\n        validate={validate}\n        onRowChange={handleOnRowChange}\n      >\n        <TableColumn title=\"\u5e8f\u53f7\" order />\n        <TableColumn title=\"\u6807\u9898\" name=\"title\" editor={TextInput} />\n        <TableColumn title=\"\u51fa\u751f\u65e5\u671f\" name=\"birthday\" editor={CusDatePicker} />\n        <TableColumn title=\"\u804c\u52a1\" name=\"duty\" editor={TextInput} />\n        <TableColumn\n          title=\"\u64cd\u4f5c\"\n          name=\"id\"\n          render={(_value, row) => (\n            <>\n              <Button autoWidth onClick={() => handleRemove(row)}>\n                \u5220\u9664\n              </Button>\n            </>\n          )}\n        />\n      </EditableDataTable>\n      <Pagination\n        pageSize={pagination.pageSize}\n        total={pagination.totalElements}\n        currentPage={pagination.pageNo + 1}\n        onChange={handleOnChange}\n      />\n    </>\n  );\n}\n\nexport default PaginationEditableDataTableDemo;\n")),Object(r.b)("p",null,"\u793a\u4f8b\uff1a"),Object(r.b)(s.c,{__position:0,__code:"<PaginationEditableTableDemo />",__scope:{props:this?this.props:t,Playground:s.c,Props:s.d,PaginationEditableTableDemo:y},mdxType:"Playground"},Object(r.b)(y,{mdxType:"PaginationEditableTableDemo"})),Object(r.b)("h2",{id:"\u4e0e\u67e5\u8be2\u7684\u7ed3\u5408"},"\u4e0e\u67e5\u8be2\u7684\u7ed3\u5408"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"useRestPageApi.query(searechParams)"),"\u662f\u7528\u6765\u67e5\u8be2\u7684\u65b9\u6cd5\uff0c\u53ef\u4ee5\u5728\u67e5\u8be2\u8868\u5355\u63d0\u4ea4\u65f6\u8c03\u7528\u8fd9\u4e2a\u65b9\u6cd5\uff0c\u5b8c\u6210\u67e5\u8be2\u4e8b\u5b9c\u3002"),Object(r.b)("p",null,"\u4e3e\u4e00\u4e2a\u4e0e\u67d0\u5185\u90e8\u9879\u76ee\u67e5\u8be2\u8868\u5355\u7ec4\u4ef6\u7684\u7ec4\u5408\uff0c\u5b8c\u6210\u8868\u683c\u6570\u636e\u67e5\u8be2\u7684\u529f\u80fd\u3002"),Object(r.b)("p",null,"\u4f8b\u5b50 1\uff1a",Object(r.b)("inlineCode",{parentName:"p"},"SearchForm"),"\u662f\u67e5\u8be2\u8868\u5355\u7ec4\u4ef6\uff0c",Object(r.b)("inlineCode",{parentName:"p"},"SearchButton"),"\u662f\u67e5\u8be2\u6309\u94ae\u3002\u70b9\u51fb\u67e5\u8be2\u6309\u94ae\uff0c\u67e5\u8be2\u8868\u5355\u4f1a\u53d1\u51fa\u63d0\u4ea4\uff08submit\uff09\u4e8b\u4ef6\u3002"),Object(r.b)("pre",null,Object(r.b)("code",Object.assign({parentName:"pre"},{className:"language-tsx"}),'<SearchForm onSubmit={dataSource.query}>\n  <SearchFormItem>\n    <Label>\u6807\u9898</Label>\n    <TextInput name="title" />\n  </SearchFormItem>\n  <SearchButton />\n</SearchForm>\n')),Object(r.b)("p",null,"\u4f8b\u5b50 2\uff1a",Object(r.b)("inlineCode",{parentName:"p"},"SearchFormState"),"\u662f\u7528\u6765\u5207\u6362\u7b80\u5355\u548c\u590d\u6742\u67e5\u8be2\u8868\u5355\u7684\u7ec4\u4ef6\uff0c",Object(r.b)("inlineCode",{parentName:"p"},"advancedForm"),"\u548c",Object(r.b)("inlineCode",{parentName:"p"},"simpleForm"),"\u4e24\u4e2a\u5c5e\u6027\u5206\u522b\u7528\u6765\u6307\u5b9a\u590d\u6742\u548c\u67e5\u8be2\u8868\u5355\u3002\u5b83\u6709",Object(r.b)("inlineCode",{parentName:"p"},"onSubmit"),"\u5c5e\u6027\uff0c\u5728\u67e5\u8be2\u8868\u5355\u7684\u67e5\u8be2\u6309\u94ae\u88ab\u70b9\u51fb\u65f6\uff0c\u8c03\u7528\u76f8\u5bf9\u5e94\u7684\u56de\u8c03\u51fd\u6570\u3002"),Object(r.b)("pre",null,Object(r.b)("code",Object.assign({parentName:"pre"},{className:"language-tsx"}),"<SearchFormState\n  onSubmit={dataSource.query}\n  advancedForm={AdvancedSearchForm}\n  simpleForm={SimpleSearchForm}\n/>\n")),Object(r.b)("h2",{id:"\u8f93\u5165\u6846\u503c\u53d8\u66f4\u81ea\u52a8\u4fdd\u5b58"},"\u8f93\u5165\u6846\u503c\u53d8\u66f4\u81ea\u52a8\u4fdd\u5b58"),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"useRestPageApi.update(rowData)"),"\u662f\u7528\u6765\u66f4\u65b0\u6570\u636e\u7684\u65b9\u6cd5\u3002\u53ef\u4ee5\u4f7f\u7528",Object(r.b)("a",Object.assign({parentName:"p"},{href:"https://www.lodashjs.com/docs/latest#_debouncefunc-wait0-options"}),"lodash/debounce"),"\u964d\u4f4e\u4fdd\u5b58\u7684\u9891\u7387\u3002"),Object(r.b)("pre",null,Object(r.b)("code",Object.assign({parentName:"pre"},{className:"language-tsx"}),"const debounceUpdate = useMemo(() => debounce(update, 200), [update]);\n\nconst handleRowChange = async (index: number, rowData: Data) => {\n  const validateResult = validate(rowData);\n  if (!validateResult || Object.keys(validateResult).length === 0) {\n    await debounceUpdate(rowData, false);\n  }\n};\n\n<EditableDataTable onRowChange={handleRowChange} />;\n")))}C&&C===Object(C)&&Object.isExtensible(C)&&Object.defineProperty(C,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"MDXContent",filename:"docs/pagination-editable-table.mdx"}}),C.isMDXComponent=!0},"./src/index.ts":function(e,n,t){"use strict";var a=t("./src/EditableDataTable.tsx"),i=t("./src/TableColumn.tsx");t.d(n,"a",function(){return i.b});var o=t("./src/shared/EditorProps.ts"),r=t.n(o),s=t("./src/useEditingList.ts");t.d(n,"c",function(){return s.a});var l=t("./src/useSimpleEditingList.ts");t.d(n,"d",function(){return l.a}),n.b=a.b,"undefined"!==typeof a.b&&a.b&&a.b===Object(a.b)&&Object.isExtensible(a.b)&&Object.defineProperty(a.b,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"EditableDataTable",filename:"src/index.ts"}}),"undefined"!==typeof l.a&&l.a&&l.a===Object(l.a)&&Object.isExtensible(l.a)&&Object.defineProperty(l.a,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"useSimpleEditingList",filename:"src/index.ts"}}),"undefined"!==typeof s.a&&s.a&&s.a===Object(s.a)&&Object.isExtensible(s.a)&&Object.defineProperty(s.a,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"useEditingList",filename:"src/index.ts"}}),"undefined"!==typeof r.a&&r.a&&r.a===Object(r.a)&&Object.isExtensible(r.a)&&Object.defineProperty(r.a,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"EditorProps",filename:"src/index.ts"}}),"undefined"!==typeof i.Props&&i.Props&&i.Props===Object(i.Props)&&Object.isExtensible(i.Props)&&Object.defineProperty(i.Props,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"TableColumnProps",filename:"src/index.ts"}}),"undefined"!==typeof i.b&&i.b&&i.b===Object(i.b)&&Object.isExtensible(i.b)&&Object.defineProperty(i.b,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"TableColumn",filename:"src/index.ts"}}),"undefined"!==typeof a.Props&&a.Props&&a.Props===Object(a.Props)&&Object.isExtensible(a.Props)&&Object.defineProperty(a.Props,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"EditableDataTableProps",filename:"src/index.ts"}})},"./src/shared/EditorProps.ts":function(e,n){}}]);
//# sourceMappingURL=docs-pagination-editable-table.6741a8c2d2eae8f4ed47.js.map