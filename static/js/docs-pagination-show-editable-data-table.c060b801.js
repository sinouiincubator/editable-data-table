(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"./docs/pagination-show-editable-data-table.mdx":function(e,n,t){"use strict";t.r(n);var a=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),i=t("./node_modules/react/index.js"),r=t.n(i),o=t("./node_modules/@mdx-js/react/dist/index.es.js"),s=t("./node_modules/docz/dist/index.esm.js"),u=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),c=t("./node_modules/sinoui-components/Pagination/index.js"),d=t("./node_modules/sinoui-components/Button/index.js"),l=t("./node_modules/sinoui-components/TextInput/index.js"),b=t("./src/index.ts");function m(e,n,t){return Object(i.useMemo)(function(){return e.slice(n*t,(n+1)*t)},[e,t,n])}function g(){var e=Object(b.c)("/api/pagination-show-demo",[]),n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,t=Object(i.useState)(e),a=Object(u.a)(t,2),r=a[0],o=a[1],s=Object(i.useState)(n),c=Object(u.a)(s,2),d=c[0],l=c[1];return[r,d,function(e,n){o(e),l(n)}]}(),t=Object(u.a)(n,3),a=t[0],o=t[1],s=t[2],g=m(e.items,a,o),p=m(e.editingRows,a,o),f=function(e,n,t){return{add:Object(i.useCallback)(function(){e.add({},n*t)},[n,e,t]),save:Object(i.useCallback)(function(a,i){return e.save(a,n*t+i)},[n,e,t]),edit:Object(i.useCallback)(function(a){e.edit(n*t+a)},[n,e,t]),remove:Object(i.useCallback)(function(a,i){return e.remove(a,n*t+i)},[n,e,t])}}(e,a,o),P=f.add,j=f.save,O=f.edit,x=f.remove,v=Object(i.useState)(""),S=Object(u.a)(v,2),E=S[0],C=S[1];return r.a.createElement("div",null,r.a.createElement(l.b,{value:E,onChange:function(e){return C(e.target.value)}}),r.a.createElement(d.b,{raised:!0,onClick:function(){e.query({title:E})}},"\u67e5\u8be2"),r.a.createElement(d.b,{raised:!0,onClick:P},"\u65b0\u589e"),r.a.createElement(b.b,{data:g,editingRows:p,idPropertyName:e.idPropertyName},r.a.createElement(b.a,{name:"id",title:"id"}),r.a.createElement(b.a,{name:"title",title:"\u6807\u9898",editor:"input"}),r.a.createElement(b.a,{title:"\u64cd\u4f5c",name:"id",render:function(e,n,t,a,i){return r.a.createElement(r.a.Fragment,null,i.editing?r.a.createElement(d.b,{autoWidth:!0,onClick:function(){return j(n,t)}},"\u4fdd\u5b58"):r.a.createElement(d.b,{autoWidth:!0,onClick:function(){return O(t)}},"\u7f16\u8f91"),r.a.createElement(d.b,{autoWidth:!0,color:"danger",onClick:function(){return x(n,t)}},"\u5220\u9664"))}})),r.a.createElement(c.a,{pageSize:o,total:e.items.length,currentPage:a+1,onChange:function(e,n){return s(e-1,n)}}))}var p=g;g&&g===Object(g)&&Object.isExtensible(g)&&Object.defineProperty(g,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"Demo",filename:"docs\\Demo.tsx"}}),t.d(n,"default",function(){return j});var f={},P="wrapper";function j(e){var n=e.components,t=Object(a.a)(e,["components"]);return Object(o.b)(P,Object.assign({},f,t,{components:n,mdxType:"MDXLayout"}),Object(o.b)("h1",{id:"\u5206\u9875\u5c55\u793a\u6570\u636e\u7684\u53ef\u7f16\u8f91\u6570\u636e\u8868\u683c"},"\u5206\u9875\u5c55\u793a\u6570\u636e\u7684\u53ef\u7f16\u8f91\u6570\u636e\u8868\u683c"),Object(o.b)("p",null,"\u672c\u7ae0\u8282\u4ecb\u7ecd\u4e00\u4e2a\u573a\u666f\uff1a\u4e00\u6b21\u6027\u52a0\u8f7d\u5217\u8868\u6570\u636e\uff0c\u4f46\u662f\u5728\u524d\u7aef\u5206\u9875\u663e\u793a\u7684\u53ef\u7f16\u8f91\u6570\u636e\u8868\u683c\u3002"),Object(o.b)("p",null,"\u5305\u542b\u7684\u529f\u80fd\uff1a"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"\u5206\u9875\u5c55\u793a\u5217\u8868"),Object(o.b)("li",{parentName:"ul"},"\u52a0\u8f7d\u6570\u636e"),Object(o.b)("li",{parentName:"ul"},"\u67e5\u8be2"),Object(o.b)("li",{parentName:"ul"},"\u65b0\u589e")),Object(o.b)("pre",null,Object(o.b)("code",Object.assign({parentName:"pre"},{className:"language-tsx"}),'import React, { useState, useMemo, useCallback } from \'react\';\nimport Pagination from \'sinoui-components/Pagination\';\nimport Button from \'sinoui-components/Button\';\nimport TextInput from \'sinoui-components/TextInput\';\nimport EditableDataTable, { useEditingList, TableColumn } from \'../src\';\n\ninterface Article {\n  id: string;\n  title: string;\n}\n\n/**\n * \u5206\u9875\u72b6\u6001hook\n */\nfunction usePagination(\n  defaultCurrentPage: number = 0,\n  defaultPageSize: number = 10,\n): [number, number, (pageNo: number, pageSize: number) => void] {\n  const [currentPage, setCurrentPage] = useState(defaultCurrentPage);\n  const [pageSize, setPageSize] = useState(defaultPageSize);\n\n  const update = (pageNo: number, newPageSize: number) => {\n    setCurrentPage(pageNo);\n    setPageSize(newPageSize);\n  };\n\n  return [currentPage, pageSize, update];\n}\n\n/**\n * \u83b7\u53d6\u5206\u9875\u5217\u8868\n *\n * @param items \u5217\u8868\n * @param currentPage \u5f53\u524d\u9875\n * @param pageSize \u9875\u5927\u5c0f\n */\nfunction usePaginationList<T>(\n  items: T[],\n  currentPage: number,\n  pageSize: number,\n) {\n  const data = useMemo(\n    () => items.slice(currentPage * pageSize, (currentPage + 1) * pageSize),\n    [items, pageSize, currentPage],\n  );\n\n  return data;\n}\n\n/**\n * \u83b7\u53d6\u5206\u9875\u7f16\u8f91\u5217\u8868\u7684\u52a8\u4f5c\n *\n * @param editingList \u7f16\u8f91\u5217\u8868\n * @param currentPage \u5f53\u524d\u9875\n * @param pageSize \u9875\u5927\u5c0f\n */\nfunction usePaginationEditingListActions<T>(\n  editingList: any,\n  currentPage: number,\n  pageSize: number,\n) {\n  const add = useCallback(() => {\n    editingList.add({}, currentPage * pageSize);\n  }, [currentPage, editingList, pageSize]);\n\n  const save = useCallback(\n    (item: T, index: number) => {\n      return editingList.save(item, currentPage * pageSize + index);\n    },\n    [currentPage, editingList, pageSize],\n  );\n\n  const edit = useCallback(\n    (index: number) => {\n      editingList.edit(currentPage * pageSize + index);\n    },\n    [currentPage, editingList, pageSize],\n  );\n\n  const remove = useCallback(\n    (item: T, index: number) => {\n      return editingList.remove(item, currentPage * pageSize + index);\n    },\n    [currentPage, editingList, pageSize],\n  );\n\n  return { add, save, edit, remove };\n}\n\nfunction Demo() {\n  const editingList = useEditingList<Partial<Article>>(\n    \'/api/pagination-show-demo\',\n    [],\n  );\n  const [currentPage, pageSize, update] = usePagination();\n  const data = usePaginationList(editingList.items, currentPage, pageSize);\n  const editingRows = usePaginationList(\n    editingList.editingRows,\n    currentPage,\n    pageSize,\n  );\n\n  const { add, save, edit, remove } = usePaginationEditingListActions(\n    editingList,\n    currentPage,\n    pageSize,\n  );\n\n  const [searchText, setSearchText] = useState(\'\');\n  const handleQuery = () => {\n    editingList.query({ title: searchText });\n  };\n\n  return (\n    <div>\n      <TextInput\n        value={searchText}\n        onChange={(event) => setSearchText(event.target.value)}\n      />\n      <Button raised onClick={handleQuery}>\n        \u67e5\u8be2\n      </Button>\n      <Button raised onClick={add}>\n        \u65b0\u589e\n      </Button>\n      <EditableDataTable\n        data={data}\n        editingRows={editingRows}\n        idPropertyName={editingList.idPropertyName}\n      >\n        <TableColumn name="id" title="id" />\n        <TableColumn name="title" title="\u6807\u9898" editor="input" />\n        <TableColumn\n          title="\u64cd\u4f5c"\n          name="id"\n          render={(_value, item, index, _id, context) => (\n            <>\n              {context.editing ? (\n                <Button autoWidth onClick={() => save(item, index)}>\n                  \u4fdd\u5b58\n                </Button>\n              ) : (\n                <Button autoWidth onClick={() => edit(index)}>\n                  \u7f16\u8f91\n                </Button>\n              )}\n              <Button\n                autoWidth\n                color="danger"\n                onClick={() => remove(item, index)}\n              >\n                \u5220\u9664\n              </Button>\n            </>\n          )}\n        />\n      </EditableDataTable>\n      <Pagination\n        pageSize={pageSize}\n        total={editingList.items.length}\n        currentPage={currentPage + 1}\n        onChange={(pageNo, size) => update(pageNo - 1, size)}\n      />\n    </div>\n  );\n}\n\nexport default Demo;\n')),Object(o.b)("p",null,"\u6548\u679c\uff1a"),Object(o.b)(s.c,{__position:0,__code:"<Demo />",__scope:{props:this?this.props:t,Playground:s.c,Demo:p},mdxType:"Playground"},Object(o.b)(p,{mdxType:"Demo"})))}j&&j===Object(j)&&Object.isExtensible(j)&&Object.defineProperty(j,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"MDXContent",filename:"docs\\pagination-show-editable-data-table.mdx"}}),j.isMDXComponent=!0},"./src/index.ts":function(e,n,t){"use strict";var a=t("./src/EditableDataTable.tsx"),i=t("./src/TableColumn.tsx");t.d(n,"a",function(){return i.b});var r=t("./src/shared/EditorProps.ts"),o=t.n(r),s=t("./src/useEditingList.ts");t.d(n,"c",function(){return s.a});var u=t("./src/useSimpleEditingList.ts");t.d(n,"d",function(){return u.a}),n.b=a.b,"undefined"!==typeof a.b&&a.b&&a.b===Object(a.b)&&Object.isExtensible(a.b)&&Object.defineProperty(a.b,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"EditableDataTable",filename:"src\\index.ts"}}),"undefined"!==typeof u.a&&u.a&&u.a===Object(u.a)&&Object.isExtensible(u.a)&&Object.defineProperty(u.a,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"useSimpleEditingList",filename:"src\\index.ts"}}),"undefined"!==typeof s.a&&s.a&&s.a===Object(s.a)&&Object.isExtensible(s.a)&&Object.defineProperty(s.a,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"useEditingList",filename:"src\\index.ts"}}),"undefined"!==typeof o.a&&o.a&&o.a===Object(o.a)&&Object.isExtensible(o.a)&&Object.defineProperty(o.a,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"EditorProps",filename:"src\\index.ts"}}),"undefined"!==typeof i.Props&&i.Props&&i.Props===Object(i.Props)&&Object.isExtensible(i.Props)&&Object.defineProperty(i.Props,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"TableColumnProps",filename:"src\\index.ts"}}),"undefined"!==typeof i.b&&i.b&&i.b===Object(i.b)&&Object.isExtensible(i.b)&&Object.defineProperty(i.b,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"TableColumn",filename:"src\\index.ts"}}),"undefined"!==typeof a.Props&&a.Props&&a.Props===Object(a.Props)&&Object.isExtensible(a.Props)&&Object.defineProperty(a.Props,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"EditableDataTableProps",filename:"src\\index.ts"}})},"./src/shared/EditorProps.ts":function(e,n){}}]);
//# sourceMappingURL=docs-pagination-show-editable-data-table.e31384cf2f14f6de533e.js.map