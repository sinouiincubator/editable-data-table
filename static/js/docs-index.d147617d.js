(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"./docs/index.mdx":function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return O});var a=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),i=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),o=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),l=n("./node_modules/react/index.js"),r=n.n(l),d=n("./node_modules/@mdx-js/react/dist/index.es.js"),s=n("./node_modules/docz/dist/index.esm.js"),u=n("./src/TableColumn.tsx"),b=n("./src/EditableDataTable.tsx"),c=n("./src/useEditingList.ts"),m=n("./node_modules/sinoui-components/Button/index.js"),p=n("./node_modules/sinoui-components/TextInput/index.js"),f=n("./node_modules/immer/dist/immer.module.js"),j={},x="wrapper";function O(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(d.b)(x,Object.assign({},j,n,{components:t,mdxType:"MDXLayout"}),Object(d.b)("h1",{id:"\u53ef\u7f16\u8f91\u8868\u683c"},"\u53ef\u7f16\u8f91\u8868\u683c"),Object(d.b)("p",null,"\u5b89\u88c5\uff1a"),Object(d.b)("pre",null,Object(d.b)("code",Object.assign({parentName:"pre"},{className:"language-shell"}),"yarn add @sinouiincubator/editable-data-table\n")),Object(d.b)("p",null,"\u5f15\u7528\uff1a"),Object(d.b)("pre",null,Object(d.b)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"import EditableDataTable, {\n  TableColumn,\n} from '@sinouiincubator/editable-data-table';\n")),Object(d.b)("p",null,"\u6e90\u7801\u8def\u5f84\uff1a",Object(d.b)("a",Object.assign({parentName:"p"},{href:"https://github.com/sinouiincubator/editable-data-table"}),"https://github.com/sinouiincubator/editable-data-table"),"\u3002"),Object(d.b)("p",null,"\u53ef\u7f16\u8f91\u5217\u8868\uff08",Object(d.b)("inlineCode",{parentName:"p"},"EditableDataTable"),"\uff09\u63d0\u4f9b\u4ee5\u4e0b\u529f\u80fd\uff1a"),Object(d.b)("ul",null,Object(d.b)("li",{parentName:"ul"},"\u5c55\u73b0\u5217\u8868\u6570\u636e\uff08\u4e0d\u652f\u6301\u5206\u9875\uff0c\u4f46\u662f\u53ef\u4ee5\u4e0e\u5206\u9875\u529f\u80fd\u7ec4\u5408\u4f7f\u7528\uff09"),Object(d.b)("li",{parentName:"ul"},"\u7f16\u8f91\u6570\u636e\u884c"),Object(d.b)("li",{parentName:"ul"},"\u6821\u9a8c\u6570\u636e\u884c")),Object(d.b)("p",null,"\u6211\u4eec\u53ef\u4ee5\u57fa\u4e8e\u53ef\u7f16\u8f91\u8868\u683c\u505a\u5217\u8868\u6570\u636e\u7684\u589e\u5220\u6539\u67e5\u3002\u4e0b\u9762\u6211\u4eec\u901a\u8fc7\u4f8b\u5b50\u6765\u4e86\u89e3\u57fa\u672c\u7528\u6cd5\u3002"),Object(d.b)("h2",{id:"\u5c55\u73b0\u5217\u8868\u6570\u636e"},"\u5c55\u73b0\u5217\u8868\u6570\u636e"),Object(d.b)("p",null,Object(d.b)("inlineCode",{parentName:"p"},"EditableDataTable"),"\u53ef\u4ee5\u7528\u6765\u5c55\u73b0\u5217\u8868\u6570\u636e\uff0c\u53ef\u4ee5\u901a\u8fc7",Object(d.b)("inlineCode",{parentName:"p"},"TableColumn"),"\u5b9a\u4e49\u5217\u8868\u7684\u5217\u4fe1\u606f\uff1a\u5217\u6807\u9898\u3001\u5217\u5355\u5143\u683c\u6570\u636e\u6e32\u67d3\u903b\u8f91\u3001\u5bbd\u5ea6\u7b49\u3002"),Object(d.b)("pre",null,Object(d.b)("code",Object.assign({parentName:"pre"},{className:"language-tsx"}),"import EditableDataTable, {\n  TableColumn,\n} from '@sinouiincubator/editable-data-table';\n\nfunction Demo() {\n  const users = [\n    {\n      id: '1',\n      firstName: 'Jacking',\n      lastName: 'Liu',\n      title: 'developer',\n    },\n    {\n      id: '2',\n      firstName: 'Zinuo',\n      lastName: 'Tian',\n      title: 'developer',\n    },\n  ];\n\n  return (\n    <EditableDataTable data={users}>\n      <TableColumn title=\"id\" name=\"id\" />\n      <TableColumn\n        title=\"\u59d3\u540d\"\n        render={(value, row) => `${row.firstName} ${row.lastName}`}\n      />\n      <TableColumn title=\"\u6807\u9898\" name=\"title\" />\n    </EditableDataTable>\n  );\n}\n")),Object(d.b)("p",null,"\u67e5\u770b\u8fd0\u884c\u6548\u679c\uff1a"),Object(d.b)(s.c,{__position:0,__code:"() => {\n  const users = [\n    {\n      id: '1',\n      firstName: 'Jacking',\n      lastName: 'Liu',\n      title: 'developer',\n    },\n    {\n      id: '2',\n      firstName: 'Zinuo',\n      lastName: 'Tian',\n      title: 'developer',\n    },\n  ]\n  return (\n    <EditableDataTable data={users}>\n      <TableColumn title=\"id\" name=\"id\" />\n      <TableColumn\n        title=\"\u59d3\u540d\"\n        render={(value, row) => `${row.firstName} ${row.lastName}`}\n      />\n      <TableColumn title=\"\u6807\u9898\" name=\"title\" />\n    </EditableDataTable>\n  )\n}",__scope:{props:this?this.props:n,useState:l.useState,useCallback:l.useCallback,useMemo:l.useMemo,Playground:s.c,Props:s.d,TableColumn:u.b,EditableDataTable:b.b,useEditingList:c.a,Button:m.a,TextInput:p.a,produce:f.default},mdxType:"Playground"},function(){return Object(d.b)(b.b,{data:[{id:"1",firstName:"Jacking",lastName:"Liu",title:"developer"},{id:"2",firstName:"Zinuo",lastName:"Tian",title:"developer"}],mdxType:"EditableDataTable"},Object(d.b)(u.b,{title:"id",name:"id",mdxType:"TableColumn"}),Object(d.b)(u.b,{title:"\u59d3\u540d",render:function(e,t){return"".concat(t.firstName," ").concat(t.lastName)},mdxType:"TableColumn"}),Object(d.b)(u.b,{title:"\u6807\u9898",name:"title",mdxType:"TableColumn"}))}),Object(d.b)("h2",{id:"\u7f16\u8f91\u6570\u636e\u884c"},"\u7f16\u8f91\u6570\u636e\u884c"),Object(d.b)("p",null,Object(d.b)("inlineCode",{parentName:"p"},"EditableDataTable"),"\u7ec4\u4ef6\u901a\u8fc7",Object(d.b)("inlineCode",{parentName:"p"},"editingRows"),"\u63a5\u6536\u6570\u636e\u884c\u662f\u5426\u5904\u4e8e\u7f16\u8f91\u72b6\u6001\u7684\u6570\u636e\u3002\u8fd9\u662f\u4e00\u4e2a\u4e0e",Object(d.b)("inlineCode",{parentName:"p"},"data"),"\u6570\u7ec4\u7b49\u957f\u7684\u5e03\u5c14\u6570\u7ec4\uff0c",Object(d.b)("inlineCode",{parentName:"p"},"editingRows"),"\u6570\u7ec4\u7684\u6bcf\u4e00\u9879\u4e0e",Object(d.b)("inlineCode",{parentName:"p"},"data"),"\u6570\u7ec4\u4e00\u4e00\u5bf9\u5e94\uff0c",Object(d.b)("inlineCode",{parentName:"p"},"true"),"\u8868\u793a\u7f16\u8f91\u72b6\u6001\u3001",Object(d.b)("inlineCode",{parentName:"p"},"false"),"\u8868\u793a\u975e\u7f16\u8f91\u72b6\u6001\u3002"),Object(d.b)("p",null,"\u53ef\u4ee5\u901a\u8fc7",Object(d.b)("inlineCode",{parentName:"p"},"TableColumn"),"\u7ec4\u4ef6\u7684",Object(d.b)("inlineCode",{parentName:"p"},"editor"),"\u5c5e\u6027\u6307\u5b9a\u5355\u5143\u683c\u7684\u7f16\u8f91\u5668\u3002\u5982\u4e0b\u6240\u793a\uff1a"),Object(d.b)("pre",null,Object(d.b)("code",Object.assign({parentName:"pre"},{className:"language-jsx"}),'import EditableDataTable, {\n  TableColumn,\n} from \'@sinouiincubator/editable-data-table\';\n\nfunction Demo() {\n  const users = [\n    {\n      id: \'1\',\n      name: \'Jacking\',\n      title: \'developer\',\n    },\n    {\n      id: \'2\',\n      name: \'zinuo\',\n      title: \'developer\',\n    },\n  ];\n\n  const editingRows = [false, true]; // \u7b2c\u4e8c\u884c\u6570\u636e\u662f\u7f16\u8f91\u72b6\u6001\n\n  return (\n    <EditableDataTable data={users} editingRows={editingRows}>\n      <TableColumn title="id" name="id" editor="input" />\n      <TableColumn title="\u59d3\u540d" name="name" editor="input" />\n      <TableColumn title="\u6807\u9898" name="title" editor="input" />\n    </EditableDataTable>\n  );\n}\n')),Object(d.b)("p",null,"\u67e5\u770b\u8fd0\u884c\u6548\u679c\uff1a"),Object(d.b)(s.c,{__position:1,__code:'() => {\n  const users = [\n    {\n      id: \'1\',\n      name: \'Jacking\',\n      title: \'developer\',\n    },\n    {\n      id: \'2\',\n      name: \'zinuo\',\n      title: \'developer\',\n    },\n  ]\n  const editingRows = [false, true] // \u7b2c\u4e8c\u884c\u6570\u636e\u662f\u7f16\u8f91\u72b6\u6001\n\n  return (\n    <EditableDataTable data={users} editingRows={editingRows}>\n      <TableColumn title="id" name="id" editor="input" />\n      <TableColumn title="\u59d3\u540d" name="name" editor="input" />\n      <TableColumn title="\u6807\u9898" name="title" editor="input" />\n    </EditableDataTable>\n  )\n}',__scope:{props:this?this.props:n,useState:l.useState,useCallback:l.useCallback,useMemo:l.useMemo,Playground:s.c,Props:s.d,TableColumn:u.b,EditableDataTable:b.b,useEditingList:c.a,Button:m.a,TextInput:p.a,produce:f.default},mdxType:"Playground"},function(){return Object(d.b)(b.b,{data:[{id:"1",name:"Jacking",title:"developer"},{id:"2",name:"zinuo",title:"developer"}],editingRows:[!1,!0],mdxType:"EditableDataTable"},Object(d.b)(u.b,{title:"id",name:"id",editor:"input",mdxType:"TableColumn"}),Object(d.b)(u.b,{title:"\u59d3\u540d",name:"name",editor:"input",mdxType:"TableColumn"}),Object(d.b)(u.b,{title:"\u6807\u9898",name:"title",editor:"input",mdxType:"TableColumn"}))}),Object(d.b)("h2",{id:"\u6821\u9a8c\u6570\u636e\u884c"},"\u6821\u9a8c\u6570\u636e\u884c"),Object(d.b)("p",null,"\u53ef\u4ee5\u901a\u8fc7",Object(d.b)("inlineCode",{parentName:"p"},"EditableDataTable"),"\u7684",Object(d.b)("inlineCode",{parentName:"p"},"validate"),"\u5c5e\u6027\u6307\u5b9a\u884c\u6570\u636e\u7684\u6821\u9a8c\uff0c\u8fd9\u662f\u4e00\u4e2a\u65b9\u6cd5\uff0c\u65b9\u6cd5\u8fd4\u56de\u9a8c\u8bc1\u9519\u8bef\u7684\u7ed3\u679c\u3002\u5982\u4e0b\u6240\u793a\uff1a"),Object(d.b)("pre",null,Object(d.b)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"function validate(rowData) {\n  const errors = {};\n\n  if (!rowData.id) {\n    errors.id = '\u5fc5\u586b';\n  }\n\n  if (!rowData.name) {\n    errors.name = '\u5fc5\u586b';\n  }\n\n  if (rowData.title && rowData.title.startsWith('1')) {\n    errors.title = '\u4e0d\u80fd\u4ee51\u5f00\u5934';\n  }\n\n  return errors;\n}\n")),Object(d.b)("p",null,"\u8fd9\u4e2a\u65b9\u6cd5\u8fd0\u884c\u7684\u7ed3\u679c\u7c7b\u4f3c\u5982\u4e0b\u9762\uff1a"),Object(d.b)("pre",null,Object(d.b)("code",Object.assign({parentName:"pre"},{className:"language-js"}),"{\n  id: '\u5fc5\u586b',\n  title: '\u4e0d\u80fd\u4ee51\u5f00\u5934'\n}\n")),Object(d.b)("p",null,"\u8fd9\u4e2a\u952e\u503c\u5bf9\u6570\u636e\uff0c\u952e\u8868\u793a\u6709\u9a8c\u8bc1\u9519\u8bef\u7684\u5b57\u6bb5\u540d\uff08\u8868\u5355\u57df\u540d\u79f0\uff09\uff0c\u503c\u8868\u793a\u5b57\u6bb5\u540d\u5bf9\u5e94\u7684\u9a8c\u8bc1\u9519\u8bef\u3002"),Object(d.b)("p",null,"\u770b\u770b\u6548\u679c\uff1a"),Object(d.b)(s.c,{__position:2,__code:"() => {\n  function validate(rowData) {\n    const errors = {}\n    if (!rowData.id) {\n      errors.id = '\u5fc5\u586b'\n    }\n\n    if (!rowData.name) {\n      errors.name = '\u5fc5\u586b'\n    }\n\n    if (rowData.title && rowData.title.startsWith('1')) {\n      errors.title = '\u4e0d\u80fd\u4ee51\u5f00\u5934'\n    }\n\n    return errors\n  }\n\n  const users = [\n    {\n      id: '1',\n      name: 'Jacking',\n      title: 'developer',\n    },\n    {\n      id: '2',\n      name: 'zinuo',\n      title: 'developer',\n    },\n  ]\n\n  const editingRows = [false, true] // \u7b2c\u4e8c\u884c\u6570\u636e\u662f\u7f16\u8f91\u72b6\u6001\n\n  return (\n    <EditableDataTable\n      data={users}\n      editingRows={editingRows}\n      validate={validate}\n    >\n      <TableColumn title=\"id\" name=\"id\" editor=\"input\" />\n      <TableColumn title=\"\u59d3\u540d\" name=\"name\" editor=\"input\" />\n      <TableColumn title=\"\u6807\u9898\" name=\"title\" editor=\"input\" />\n    </EditableDataTable>\n  )\n}",__scope:{props:this?this.props:n,useState:l.useState,useCallback:l.useCallback,useMemo:l.useMemo,Playground:s.c,Props:s.d,TableColumn:u.b,EditableDataTable:b.b,useEditingList:c.a,Button:m.a,TextInput:p.a,produce:f.default},mdxType:"Playground"},function(){return Object(d.b)(b.b,{data:[{id:"1",name:"Jacking",title:"developer"},{id:"2",name:"zinuo",title:"developer"}],editingRows:[!1,!0],validate:function(e){var t={};return e.id||(t.id="\u5fc5\u586b"),e.name||(t.name="\u5fc5\u586b"),e.title&&e.title.startsWith("1")&&(t.title="\u4e0d\u80fd\u4ee51\u5f00\u5934"),t},mdxType:"EditableDataTable"},Object(d.b)(u.b,{title:"id",name:"id",editor:"input",mdxType:"TableColumn"}),Object(d.b)(u.b,{title:"\u59d3\u540d",name:"name",editor:"input",mdxType:"TableColumn"}),Object(d.b)(u.b,{title:"\u6807\u9898",name:"title",editor:"input",mdxType:"TableColumn"}))}),Object(d.b)("h2",{id:"\u589e\u5220\u6539\u67e5"},"\u589e\u5220\u6539\u67e5"),Object(d.b)("p",null,"\u53ef\u4ee5\u57fa\u4e8e",Object(d.b)("inlineCode",{parentName:"p"},"EditableDataTable"),"\u5b9e\u73b0\u589e\u5220\u6539\u67e5\u3002\u770b\u770b\u4e0b\u9762\u4e00\u4e2a\u4e0e\u540e\u7aef API \u65e0\u6cd5\u7684\u589e\u5220\u6539\u67e5\u793a\u4f8b\uff1a"),Object(d.b)(s.c,{__position:3,__code:"() => {\n  const validate = data => {\n    const result = {}\n    if (!data.id) {\n      result.id = '\u5fc5\u586b'\n    }\n    if (data.title && data.title.startsWith('1')) {\n      result.title = '\u6807\u9898\u4e0d\u80fd\u4ee51\u5f00\u5934'\n    }\n    return result\n  }\n  const [editingRows, setEditingRows] = useState([true, false])\n  const [items, setItems] = useState([\n    { id: '1', title: '123' },\n    { id: '2', title: '1234' },\n  ])\n\n  const handleSave = (row, index, context) => {\n    if (!context.validate()) {\n      alert('\u6570\u636e\u586b\u5199\u4e0d\u5b8c\u6574')\n    } else {\n      setEditingRows(\n        produce(editingRows, draft => {\n          draft[index] = false\n        }),\n      )\n      alert('\u4fdd\u5b58\u6210\u529f')\n    }\n  }\n\n  const handleEdit = index => {\n    setEditingRows(\n      produce(editingRows, draft => {\n        draft[index] = true\n      }),\n    )\n  }\n\n  const handleRemove = index => {\n    const removeByIndex = produce(draft => {\n      draft.splice(index, 1)\n    })\n    setEditingRows(removeByIndex)\n    setItems(removeByIndex)\n  }\n\n  const handleAdd = () => {\n    setEditingRows([...editingRows, true])\n    setItems([...items, {}])\n  }\n\n  return (\n    <>\n      <Button onClick={handleAdd}>\u65b0\u589e</Button>\n      <EditableDataTable\n        data={items}\n        editingRows={editingRows}\n        validate={validate}\n      >\n        <TableColumn title=\"\u5e8f\u53f7\" order />\n        <TableColumn title=\"id\" name=\"id\" editor={TextInput} />\n        <TableColumn title=\"\u6807\u9898\" name=\"title\" editor={TextInput} />\n        <TableColumn\n          title=\"\u64cd\u4f5c\"\n          name=\"id\"\n          render={(value, row, index, id, context) => (\n            <>\n              {context.editing ? (\n                <Button\n                  autoWidth\n                  onClick={() => handleSave(row, index, context)}\n                >\n                  \u4fdd\u5b58\n                </Button>\n              ) : (\n                <Button autoWidth onClick={() => handleEdit(index)}>\n                  \u7f16\u8f91\n                </Button>\n              )}\n              <Button autoWidth onClick={() => handleRemove(index)}>\n                \u5220\u9664\n              </Button>\n            </>\n          )}\n        />\n      </EditableDataTable>\n    </>\n  )\n}",__scope:{props:this?this.props:n,useState:l.useState,useCallback:l.useCallback,useMemo:l.useMemo,Playground:s.c,Props:s.d,TableColumn:u.b,EditableDataTable:b.b,useEditingList:c.a,Button:m.a,TextInput:p.a,produce:f.default},mdxType:"Playground"},function(){var e=Object(l.useState)([!0,!1]),t=Object(i.a)(e,2),n=t[0],o=t[1],s=Object(l.useState)([{id:"1",title:"123"},{id:"2",title:"1234"}]),c=Object(i.a)(s,2),j=c[0],x=c[1];return Object(d.b)(r.a.Fragment,null,Object(d.b)(m.a,{onClick:function(){o([].concat(Object(a.a)(n),[!0])),x([].concat(Object(a.a)(j),[{}]))},mdxType:"Button"},"\u65b0\u589e"),Object(d.b)(b.b,{data:j,editingRows:n,validate:function(e){var t={};return e.id||(t.id="\u5fc5\u586b"),e.title&&e.title.startsWith("1")&&(t.title="\u6807\u9898\u4e0d\u80fd\u4ee51\u5f00\u5934"),t},mdxType:"EditableDataTable"},Object(d.b)(u.b,{title:"\u5e8f\u53f7",order:!0,mdxType:"TableColumn"}),Object(d.b)(u.b,{title:"id",name:"id",editor:p.a,mdxType:"TableColumn"}),Object(d.b)(u.b,{title:"\u6807\u9898",name:"title",editor:p.a,mdxType:"TableColumn"}),Object(d.b)(u.b,{title:"\u64cd\u4f5c",name:"id",render:function(e,t,a,i,l){return Object(d.b)(r.a.Fragment,null,l.editing?Object(d.b)(m.a,{autoWidth:!0,onClick:function(){return function(e,t,a){a.validate()?(o(Object(f.default)(n,function(e){e[t]=!1})),alert("\u4fdd\u5b58\u6210\u529f")):alert("\u6570\u636e\u586b\u5199\u4e0d\u5b8c\u6574")}(0,a,l)},mdxType:"Button"},"\u4fdd\u5b58"):Object(d.b)(m.a,{autoWidth:!0,onClick:function(){return function(e){o(Object(f.default)(n,function(t){t[e]=!0}))}(a)},mdxType:"Button"},"\u7f16\u8f91"),Object(d.b)(m.a,{autoWidth:!0,onClick:function(){return function(e){var t=Object(f.default)(function(t){t.splice(e,1)});o(t),x(t)}(a)},mdxType:"Button"},"\u5220\u9664"))},mdxType:"TableColumn"})))}),Object(d.b)("h2",{id:"\u4f7f\u7528-useeditinglist"},"\u4f7f\u7528 useEditingList"),Object(d.b)("p",null,"\u53ef\u4ee5\u4f7f\u7528 useEditingList \u7b80\u5316\u589e\u5220\u6539\u67e5\u573a\u666f\u7684\u5f00\u53d1\uff1a"),Object(d.b)("ul",null,Object(d.b)("li",{parentName:"ul"},"\u5185\u7f6e",Object(d.b)("inlineCode",{parentName:"li"},"editingRows"),"\u548c",Object(d.b)("inlineCode",{parentName:"li"},"items"),"\u4e24\u4e2a\u72b6\u6001\u548c\u53d8\u66f4\u65b9\u6cd5\u3002"),Object(d.b)("li",{parentName:"ul"},"\u96c6\u6210\u4e86",Object(d.b)("a",Object.assign({parentName:"li"},{href:"https://github.com/sinoui/use-rest-list-api"}),"@sinoui/use-rest-list-api"),"\uff0c\u4e0e\u540e\u7aef API \u505a\u589e\u5220\u6539\u67e5\u4ea4\u4e92\u3002")),Object(d.b)("pre",null,Object(d.b)("code",Object.assign({parentName:"pre"},{className:"language-tsx"}),"import EditableDataTable, {\n  useEiditingList,\n  TableColumn,\n} from '@sinouiincubator/editable-data-table';\nimport Button from 'sinoui-components/Button';\nimport TextInput from 'sinoui-components/TextInput';\n\nfunction validate(data) {\n  const result = {};\n  if (!data.id) {\n    result.id = '\u5fc5\u586b';\n  }\n  if (data.title && data.title.startsWith('1')) {\n    result.title = '\u6807\u9898\u4e0d\u80fd\u4ee51\u5f00\u5934';\n  }\n  return result;\n}\n\nfunction Demo() {\n  const {\n    items,\n    add,\n    edit,\n    save,\n    remove,\n    idPropertyName,\n    editingRows,\n  } = useEditingList('/api/tests', []);\n\n  const handleSave = (row, index, context) => {\n    if (!context.validate()) {\n      alert('\u6570\u636e\u586b\u5199\u4e0d\u5b8c\u6574');\n    } else {\n      save(row, index);\n      alert('\u4fdd\u5b58\u6210\u529f');\n    }\n  };\n\n  return (\n    <>\n      <Button onClick={add}>\u65b0\u589e</Button>\n      <EditableDataTable\n        data={items}\n        editingRows={editingRows}\n        validate={validate}\n        idPropertyName={idPropertyName}\n      >\n        <TableColumn title=\"\u5e8f\u53f7\" order />\n        <TableColumn title=\"\u6807\u9898\" name=\"title\" editor={TextInput} />\n        <TableColumn title=\"\u5907\u6ce8\" name=\"note\" editor={TextInput} />\n        <TableColumn\n          title=\"\u64cd\u4f5c\"\n          name=\"id\"\n          render={(value, row, index, id, context) => (\n            <>\n              {context.editing ? (\n                <Button\n                  autoWidth\n                  onClick={() => handleSave(row, index, context)}\n                >\n                  \u4fdd\u5b58\n                </Button>\n              ) : (\n                <Button autoWidth onClick={() => edit(index)}>\n                  \u7f16\u8f91\n                </Button>\n              )}\n              <Button autoWidth onClick={() => remove(row, index)}>\n                \u5220\u9664\n              </Button>\n            </>\n          )}\n        />\n      </EditableDataTable>\n    </>\n  );\n}\n")),Object(d.b)("p",null,Object(d.b)("inlineCode",{parentName:"p"},"useEditingList.add()"),"\u65b9\u6cd5\u53ef\u4ee5\u6307\u5b9a\u6dfb\u52a0\u6570\u636e\u7684\u4f4d\u7f6e\uff0c\u9ed8\u8ba4\u5728\u672b\u5c3e\u6dfb\u52a0\u6570\u636e\uff0c\u5982\u679c\u9700\u8981\u5728\u5f00\u59cb\u4f4d\u7f6e\u6dfb\u52a0\u6570\u636e\uff0c\u5219\u53ef\u4ee5\u6307\u5b9a",Object(d.b)("inlineCode",{parentName:"p"},"index"),"\u53c2\u6570\u4e3a 0 \u5373\u53ef\uff1a"),Object(d.b)("pre",null,Object(d.b)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"const { add } = useEditingList('url');\n\n// \u5728\u5f00\u59cb\u4f4d\u7f6e\u6dfb\u52a0\u6570\u636e\nadd({}, 0);\n")),Object(d.b)("p",null,"\u793a\u4f8b\uff1a"),Object(d.b)(s.c,{__position:4,__code:'() => {\n  const validate = data => {\n    const result = {}\n\n    if (data.title && data.title.startsWith(\'1\')) {\n      result.title = \'\u6807\u9898\u4e0d\u80fd\u4ee51\u5f00\u5934\'\n    }\n    return result\n  }\n  const {\n    items,\n    add,\n    edit,\n    save,\n    remove,\n    idPropertyName,\n    editingRows,\n  } = useEditingList(\'/api/tests\', [])\n\n  const handleSave = (row, index, context) => {\n    if (!context.validate()) {\n      alert(\'\u6570\u636e\u586b\u5199\u4e0d\u5b8c\u6574\')\n    } else {\n      save(row, index).then(\n        () => {\n          alert(\'\u4fdd\u5b58\u6210\u529f\')\n        },\n        () => {\n          alert(\'\u4fdd\u5b58\u5931\u8d25\')\n        },\n      )\n    }\n  }\n\n  return (\n    <>\n      <Button onClick={add}>\u65b0\u589e</Button>\n      <EditableDataTable\n        data={items}\n        editingRows={editingRows}\n        validate={validate}\n        idPropertyName={idPropertyName}\n      >\n        <TableColumn title="\u5e8f\u53f7" order />\n        <TableColumn title="\u6807\u9898" name="title" editor={TextInput} />\n        <TableColumn title="\u5907\u6ce8" name="note" editor={TextInput} />\n        <TableColumn\n          title="\u64cd\u4f5c"\n          name="id"\n          render={(value, row, index, id, context) => (\n            <>\n              {context.editing ? (\n                <Button\n                  autoWidth\n                  onClick={() => handleSave(row, index, context)}\n                >\n                  \u4fdd\u5b58\n                </Button>\n              ) : (\n                <Button autoWidth onClick={() => edit(index)}>\n                  \u7f16\u8f91\n                </Button>\n              )}\n              <Button autoWidth onClick={() => remove(row, index)}>\n                \u5220\u9664\n              </Button>\n            </>\n          )}\n        />\n      </EditableDataTable>\n    </>\n  )\n}',__scope:{props:this?this.props:n,useState:l.useState,useCallback:l.useCallback,useMemo:l.useMemo,Playground:s.c,Props:s.d,TableColumn:u.b,EditableDataTable:b.b,useEditingList:c.a,Button:m.a,TextInput:p.a,produce:f.default},mdxType:"Playground"},function(){var e=Object(c.a)("/api/tests",[]),t=e.items,n=e.add,a=e.edit,i=e.save,o=e.remove,l=e.idPropertyName,s=e.editingRows;return Object(d.b)(r.a.Fragment,null,Object(d.b)(m.a,{onClick:n,mdxType:"Button"},"\u65b0\u589e"),Object(d.b)(b.b,{data:t,editingRows:s,validate:function(e){var t={};return e.title&&e.title.startsWith("1")&&(t.title="\u6807\u9898\u4e0d\u80fd\u4ee51\u5f00\u5934"),t},idPropertyName:l,mdxType:"EditableDataTable"},Object(d.b)(u.b,{title:"\u5e8f\u53f7",order:!0,mdxType:"TableColumn"}),Object(d.b)(u.b,{title:"\u6807\u9898",name:"title",editor:p.a,mdxType:"TableColumn"}),Object(d.b)(u.b,{title:"\u5907\u6ce8",name:"note",editor:p.a,mdxType:"TableColumn"}),Object(d.b)(u.b,{title:"\u64cd\u4f5c",name:"id",render:function(e,t,n,l,s){return Object(d.b)(r.a.Fragment,null,s.editing?Object(d.b)(m.a,{autoWidth:!0,onClick:function(){return function(e,t,n){n.validate()?i(e,t).then(function(){alert("\u4fdd\u5b58\u6210\u529f")},function(){alert("\u4fdd\u5b58\u5931\u8d25")}):alert("\u6570\u636e\u586b\u5199\u4e0d\u5b8c\u6574")}(t,n,s)},mdxType:"Button"},"\u4fdd\u5b58"):Object(d.b)(m.a,{autoWidth:!0,onClick:function(){return a(n)},mdxType:"Button"},"\u7f16\u8f91"),Object(d.b)(m.a,{autoWidth:!0,onClick:function(){return o(t,n)},mdxType:"Button"},"\u5220\u9664"))},mdxType:"TableColumn"})))}),Object(d.b)("h2",{id:"\u65e0\u6570\u636e"},"\u65e0\u6570\u636e"),Object(d.b)(s.c,{__position:5,__code:'<EditableDataTable data={[]}>\n  <TableColumn title="id" name="id" />\n  <TableColumn title="\u6807\u9898" name="title" />\n</EditableDataTable>',__scope:{props:this?this.props:n,useState:l.useState,useCallback:l.useCallback,useMemo:l.useMemo,Playground:s.c,Props:s.d,TableColumn:u.b,EditableDataTable:b.b,useEditingList:c.a,Button:m.a,TextInput:p.a,produce:f.default},mdxType:"Playground"},Object(d.b)(b.b,{data:[],mdxType:"EditableDataTable"},Object(d.b)(u.b,{title:"id",name:"id",mdxType:"TableColumn"}),Object(d.b)(u.b,{title:"\u6807\u9898",name:"title",mdxType:"TableColumn"}))))}O&&O===Object(O)&&Object.isExtensible(O)&&Object.defineProperty(O,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"MDXContent",filename:"docs\\index.mdx"}}),O.isMDXComponent=!0},"./src/EditableDataTable.tsx":function(e,t,n){"use strict";var a=n("./node_modules/react/index.js"),i=n.n(a),o=n("./node_modules/classnames/index.js"),l=n.n(o),r=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js"),d=n("./node_modules/sinoui-components/styles/index.js"),s=n("./node_modules/sinoui-components/Table/index.js");function u(){var e=Object(r.a)(["\n  table-layout: fixed;\n  border-top: 1px solid rgba(224, 224, 224, 1);\n  & .sinoui-data-table-head {\n    ",";\n    ",";\n    background-color: ",";\n    text-align: left;\n    vertical-align: middle;\n  }\n\n  .sinoui-checkbox-button {\n    margin: 14px;\n  }\n\n  & .sinoui-data-table-head.numeric,\n  .sinoui-data-table-body-td.numeric {\n    text-align: right;\n    flex-direction: row-reverse;\n  }\n\n  & .sinoui-data-table-head.align_center,\n  .sinoui-data-table-body-td.align_center {\n    text-align: center;\n  }\n\n  & .sinoui-data-table-head.checkbox,\n  .sinoui-data-table-body-td.checkbox {\n    padding: 0;\n    width: 48px;\n  }\n\n  & .sinoui-data-table-head.extraInfo,\n  .sinoui-data-table-body-td.extraInfo {\n    padding: 0;\n    width: 60px;\n  }\n\n  & .sinoui-data-table-head:last-child,\n  .sinoui-data-table-body-td:last-child {\n    padding-right: 24px;\n  }\n\n  & .sinoui-data-table-footer {\n    ",";\n    ",";\n    padding-left: 24px;\n    padding-right: 12px;\n  }\n\n  & .sinoui-data-table-body-cell-no-data {\n    ",";\n    ",";\n    padding: 64px;\n    text-align: center;\n    color: ",";\n  }\n\n  & .sinoui-data-table-body-td {\n    ",";\n    ",";\n    text-align: left;\n    vertical-align: middle;\n    word-wrap: break-word;\n    word-break: break-all;\n  }\n\n  & .sinoui-data-table-head-row {\n    height: 48px;\n  }\n\n  & .sinoui-data-table-footer-row,\n  .sinoui-data-table-body-row-no-data {\n    height: 56px;\n    background-color: transparent;\n  }\n\n  & .sinoui-data-table-body-row {\n    height: 48px;\n    background-color: transparent;\n\n    &:hover {\n      background-color: ",";\n    }\n  }\n\n  & .sinoui-data-table-body-row.selected {\n    background-color: ",";\n  }\n"]);return u=function(){return e},e}function b(){var e=Object(r.a)(["\n  padding: 0;\n  padding-left: 8px;\n  padding-right: 8px;\n  border-bottom: 1px solid\n    ",";\n"]);return b=function(){return e},e}function c(){var e=Object(r.a)(["\n  font-size: ","rem;\n  font-family: ",";\n  font-weight: ",";\n  color: ",";\n"]);return c=function(){return e},e}function m(){var e=Object(r.a)(["\n  font-size: ","rem;\n  font-family: ",";\n  font-weight: ",";\n  color: ",";\n"]);return m=function(){return e},e}var p=Object(d.b)(m(),function(e){return e.theme.typography.body1.fontSize},function(e){return e.theme.typography.fontFamily},function(e){return e.theme.typography.fontWeightMedium},function(e){return e.theme.typography.body1.color}),f=Object(d.b)(c(),function(e){return e.theme.typography.body1.fontSize},function(e){return e.theme.typography.fontFamily},function(e){return e.theme.typography.body1.fontWeight},function(e){return e.theme.typography.body1.color}),j=Object(d.b)(b(),function(e){return"light"===e.theme.palette.type?"rgba(224, 224, 224, 1)":"rgba(80, 80, 80, 1)"}),x={light:{tableRowSelected:"rgba(0, 0, 0, 0.04)",tableRowHover:"rgba(0, 0, 0, 0.07)"},dark:{tableRowSelected:"rgba(255, 255, 255, 0.08)",tableRowHover:"rgba(255, 255, 255, 0.14)"}},O=Object(d.c)(s.a)(u(),p,j,function(e){return"light"===e.theme.palette.type?e.theme.palette.primary[50]:e.theme.palette.primary[200]},p,j,f,j,function(e){return e.theme.typography.caption.color},f,j,function(e){return x[e.theme.palette.type].tableRowHover},function(e){return x[e.theme.palette.type].tableRowSelected}),g=O;"undefined"!==typeof O&&O&&O===Object(O)&&Object.isExtensible(O)&&Object.defineProperty(O,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"StyledTable",filename:"src\\Table.tsx"}});var T=n("./src/shared/EditableDataTableContext.ts");function y(){var e=Object(r.a)(["\n  text-align: center;\n  padding: 32px 8px;\n"]);return y=function(){return e},e}var C=d.c.div(y()),h=function(e){var t=e.children;return i.a.createElement(C,{className:"sinoui-data-table-info","data-testid":"emptyInfo"},t)},v=h;h&&h===Object(h)&&Object.isExtensible(h)&&Object.defineProperty(h,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"EmptyDataTableRow",filename:"src\\EmptyDataTableRow.tsx"}});var w=n("./src/shared/constants.ts"),E=n("./src/shared/DataTableRowContext.ts"),_={type:w.a.ColGroup};function R(e){var t=e.children;return i.a.createElement(E.a.Provider,{value:_},i.a.createElement("colgroup",{"data-testid":"colgroup"},t))}var N=R;R&&R===Object(R)&&Object.isExtensible(R)&&Object.defineProperty(R,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"DataTableColGroup",filename:"src\\DataTableColGroup.tsx"}});var D=function(e){var t=e.children;return i.a.createElement("thead",null,i.a.createElement("tr",{className:"sinoui-data-table-head-row","data-testid":"tableHead"},t))},P=D;D&&D===Object(D)&&Object.isExtensible(D)&&Object.defineProperty(D,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"DataTableHead",filename:"src\\DataTableHead.tsx"}});var k=n("./src/shared/EditingBodyRowContainer.ts"),B=i.a.memo(function(e){var t=e.data,n=e.index,o=e.children,l=e.editing,r=e.error,d=e.touched,s=Object(a.useMemo)(function(){return{type:w.a.Body,data:t,index:n,editing:!!l,error:r,touched:d}},[t,n,l,r,d]);return i.a.createElement(E.a.Provider,{value:s},i.a.createElement(k.a.Provider,null,i.a.createElement("tr",{className:"sinoui-data-table-body-row","data-testid":"bodyRow"},o)))}),S=function(e){var t=e.idPropertyName,n=e.data,a=e.children,o=e.editingRows,l=void 0===o?[]:o,r=e.errors,d=e.touched;return n&&0!==n.length?i.a.createElement("tbody",null,n.map(function(e,n){return i.a.createElement(B,{key:e[t]||"index_".concat(n),data:e,index:n,"data-testid":"tableBody",editing:l[n],error:r?r[n]:void 0,touched:d?d[n]:void 0},a)})):null},I=S;function W(e){var t=e.data,n=void 0===t?[]:t,o=e.idPropertyName,r=void 0===o?"id":o,d=e.children,s=e.emptyTitle,u=void 0===s?"\u6682\u65e0\u6570\u636e":s,b=e.editingRows,c=e.errors,m=e.touched,p=e.className,f=e.style,j=function(e){var t=e.idPropertyName,n=void 0===t?"id":t,i=e.onRowChange,o=e.validate,l=e.onFieldChange,r=Object(a.useRef)({onRowChange:i,validate:o,onFieldChange:l});return Object(a.useEffect)(function(){r.current.onRowChange=i,r.current.validate=o,r.current.onFieldChange=l},[i,o,l]),Object(a.useMemo)(function(){return{idPropertyName:n,options:r.current}},[n])}(e);return i.a.createElement(i.a.Fragment,null,i.a.createElement(g,{className:l()("sinoui-editable-data-table",p),style:f},i.a.createElement(T.a.Provider,{value:j},i.a.createElement(N,null,d),i.a.createElement(P,null,d),i.a.createElement(I,{data:n,idPropertyName:r,editingRows:b,errors:c,touched:m},d))),(!n||0===n.length)&&i.a.createElement(v,null,u))}S&&S===Object(S)&&Object.isExtensible(S)&&Object.defineProperty(S,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"DataTableBody",filename:"src\\DataTableBody.tsx"}}),"undefined"!==typeof Props&&Props&&Props===Object(Props)&&Object.isExtensible(Props)&&Object.defineProperty(Props,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"Props",filename:"src\\EditableDataTable.tsx"}});t.b=W;W&&W===Object(W)&&Object.isExtensible(W)&&Object.defineProperty(W,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"EditableDataTable",filename:"src\\EditableDataTable.tsx"}})},"./src/TableColumn.tsx":function(e,t,n){"use strict";var a=n("./node_modules/react/index.js"),i=n.n(a),o=n("./src/shared/DataTableRowContext.ts"),l=n("./src/shared/EditableDataTableContext.ts"),r=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),d=n("./node_modules/sinoui-components/Form/FormHelpText.js"),s=n("./src/shared/EditingBodyRowContainer.ts");var u=i.a.memo(function(e){var t=e.name,n=e.editor,u=Object(a.useContext)(o.a),b=u.data,c=u.index,m=b[t]||"",p=Object(a.useState)(m),f=Object(r.a)(p,2)[1],j=Object(a.useContext)(l.a).options,x=s.a.useContainer(),O=x.touched,g=x.errors,T=x.validateField,y=x.errorControlled,C=Object(a.useCallback)(function(e){var n=function(e){return!(!e||!e.target)}(e)?e.target.value:e;f(n),b[t]=n,j.onRowChange&&j.onRowChange(c,b),j.onFieldChange&&j.onFieldChange(c,t,b),y||T(t,b)},[b,t,j,c,y,T]),h=O[t]?g[t]:void 0;return Object(a.useMemo)(function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(n,{name:t,value:m,item:b,onChange:C,error:!!h}),h&&i.a.createElement(d.a,{error:!0,className:"sinoui-editable-data-table-editor-error"},h))},[b,h,C,t,m])});var b=i.a.memo(function(e){var t=e.order,n=e.render,a=e.name,o=e.editor,l=e.index,r=e.editing,d=e.data,s=e.idPropertyName,b=e.validate;if(t)return i.a.createElement("td",{className:"sinoui-data-table-body-td align_center"},l+1);if(r&&o){if(!a)throw new Error("\u6ca1\u6709\u7ed9TableColumn\u6307\u5b9aname\u5c5e\u6027");return i.a.createElement("td",{className:"sinoui-data-table-body-td"},i.a.createElement(u,{name:a,editor:o}))}return n?i.a.createElement("td",{className:"sinoui-data-table-body-td"},n(a?d[a]:void 0,d,l,d[s],{editing:r,validate:b})):a?i.a.createElement("td",{className:"sinoui-data-table-body-td"},d[a]):null});function c(e){var t,n,r,d,u,c=(t=Object(a.useContext)(o.a),n=t.data,r=t.index,d=t.editing,u=s.a.useContainer().validate,{data:n,index:r,editing:d,idPropertyName:Object(a.useContext)(l.a).idPropertyName,validate:u});return i.a.createElement(b,Object.assign({},e,c))}var m=c;c&&c===Object(c)&&Object.isExtensible(c)&&Object.defineProperty(c,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"DataTableBodyCell",filename:"src\\DataTableBodyCell.tsx"}});var p=n("./node_modules/classnames/index.js"),f=n.n(p);function j(e){var t=e.order,n=e.title;return i.a.createElement("th",{className:f()("sinoui-data-table-head",{align_center:t})},n)}var x=j;j&&j===Object(j)&&Object.isExtensible(j)&&Object.defineProperty(j,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"DataTableHeadCell",filename:"src\\DataTableHeadCell.tsx"}});var O=n("./src/shared/constants.ts");"undefined"!==typeof Props&&Props&&Props===Object(Props)&&Object.isExtensible(Props)&&Object.defineProperty(Props,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"Props",filename:"src\\TableColumn.tsx"}});var g=i.a.memo(function(e){var t=e.title,n=e.order,l=e.width;switch(Object(a.useContext)(o.a).type){case O.a.Head:return i.a.createElement(x,{title:t,order:n});case O.a.ColGroup:return i.a.createElement("col",{width:n?50:l});default:return i.a.createElement(m,e)}});t.b=g;"undefined"!==typeof g&&g&&g===Object(g)&&Object.isExtensible(g)&&Object.defineProperty(g,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"TableColumn",filename:"src\\TableColumn.tsx"}})},"./src/shared/DataTableRowContext.ts":function(e,t,n){"use strict";var a=n("./node_modules/react/index.js"),i=n.n(a),o=n("./src/shared/constants.ts");"undefined"!==typeof BodyRowContextType&&BodyRowContextType&&BodyRowContextType===Object(BodyRowContextType)&&Object.isExtensible(BodyRowContextType)&&Object.defineProperty(BodyRowContextType,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"BodyRowContextType",filename:"src\\shared\\DataTableRowContext.ts"}}),"undefined"!==typeof HeadRowContextType&&HeadRowContextType&&HeadRowContextType===Object(HeadRowContextType)&&Object.isExtensible(HeadRowContextType)&&Object.defineProperty(HeadRowContextType,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"HeadRowContextType",filename:"src\\shared\\DataTableRowContext.ts"}}),"undefined"!==typeof ColGroupContextType&&ColGroupContextType&&ColGroupContextType===Object(ColGroupContextType)&&Object.isExtensible(ColGroupContextType)&&Object.defineProperty(ColGroupContextType,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"ColGroupContextType",filename:"src\\shared\\DataTableRowContext.ts"}}),"undefined"!==typeof RowContextType&&RowContextType&&RowContextType===Object(RowContextType)&&Object.isExtensible(RowContextType)&&Object.defineProperty(RowContextType,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"RowContextType",filename:"src\\shared\\DataTableRowContext.ts"}});var l=i.a.createContext({type:o.a.Head});t.a=l,"undefined"!==typeof l&&l&&l===Object(l)&&Object.isExtensible(l)&&Object.defineProperty(l,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"DataTableRowContext",filename:"src\\shared\\DataTableRowContext.ts"}})},"./src/shared/EditableDataTableContext.ts":function(e,t,n){"use strict";var a=n("./node_modules/react/index.js"),i=n.n(a).a.createContext({idPropertyName:"id",options:{}});t.a=i,"undefined"!==typeof i&&i&&i===Object(i)&&Object.isExtensible(i)&&Object.defineProperty(i,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"EditableDataTableContext",filename:"src\\shared\\EditableDataTableContext.ts"}})},"./src/shared/EditingBodyRowContainer.ts":function(e,t,n){"use strict";var a=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread.js"),o=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),l=n("./node_modules/react/index.js"),r=n("./node_modules/unstated-next/dist/unstated-next.mjs"),d=n("./node_modules/shallowequal/index.js"),s=n.n(d),u=n("./src/shared/EditableDataTableContext.ts"),b=n("./src/shared/DataTableRowContext.ts");var c=Object(r.a)(function(){var e=Object(l.useContext)(b.a),t=e.data,n=e.error,r=e.touched,d=Object(l.useState)({}),c=Object(o.a)(d,2),m=c[0],p=c[1],f=Object(l.useState)({}),j=Object(o.a)(f,2),x=j[0],O=j[1],g=Object(l.useRef)(t),T=Object(l.useContext)(u.a),y=T.options,C=T.idPropertyName;Object(l.useEffect)(function(){g.current=t},[t]);var h=Object(l.useCallback)(function(e){O(function(t){return s()(e,t)?t:e})},[]);Object(l.useEffect)(function(){if(!t[C]&&y.validate){var e=y.validate(t)||{};h(e)}},[t,y,C,h]);var v=Object(l.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g.current,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(y.validate){var n=y.validate(e);if(n){if(t){var a={};Object.keys(n).forEach(function(e){a[e]=!0}),p(a)}return h(n||{}),0===Object.keys(n).filter(function(e){return!!n[e]}).length}}return!0},[y,h]),w=Object(l.useCallback)(function(e,t){p(function(t){return t[e]?t:Object(i.a)({},t,Object(a.a)({},e,!0))}),v(t,!1)},[v]);return{errors:n||x,errorControlled:!!n,touched:r||m,validate:v,validateField:w}});t.a=c,"undefined"!==typeof c&&c&&c===Object(c)&&Object.isExtensible(c)&&Object.defineProperty(c,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"EditingBodyRowContainer",filename:"src\\shared\\EditingBodyRowContainer.ts"}})},"./src/shared/constants.ts":function(e,t,n){"use strict";var a;n.d(t,"a",function(){return a}),function(e){e[e.Body=0]="Body",e[e.Head=1]="Head",e[e.ColGroup=2]="ColGroup"}(a||(a={})),"undefined"!==typeof a&&a&&a===Object(a)&&Object.isExtensible(a)&&Object.defineProperty(a,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"RowType",filename:"src\\shared\\constants.ts"}});"\u6682\u65e0\u6570\u636e"===Object("\u6682\u65e0\u6570\u636e")&&Object.isExtensible("\u6682\u65e0\u6570\u636e")&&Object.defineProperty("\u6682\u65e0\u6570\u636e","__filemeta",{enumerable:!0,configurable:!0,value:{name:"EMPTY_ROW_INFO",filename:"src\\shared\\constants.ts"}})},"./src/useEditingList.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return b});var a=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js"),i=n.n(a),o=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),l=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),r=n("./node_modules/@sinoui/use-rest-list-api/dist/index.js"),d=n.n(r),s=n("./node_modules/react/index.js"),u=n("./node_modules/immer/dist/immer.module.js");function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=((arguments.length>2?arguments[2]:void 0)||{}).keyName,a=void 0===n?"id":n,r=d()(e,t),b=r.items,c=r.setItems,m=r.remove,p=r.removeItemAt,f=r.update,j=r.save,x=r.isLoading,O=r.addItem,g=Object(s.useState)(function(){return t.map(function(){return!1})}),T=Object(l.a)(g,2),y=T[0],C=T[1],h=b.length;Object(s.useEffect)(function(){C(function(e){return h!==e.length?new Array(h).fill(!1):e})},[x,h]);var v=Object(s.useCallback)(function(){var e=Object(o.a)(i.a.mark(function e(t,n){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t[a]){e.next=7;break}return e.next=4,m(t[a]);case 4:C(Object(u.produce)(y,function(e){e.splice(n,1)})),e.next=9;break;case 7:p(n),C(Object(u.produce)(function(e){e.splice(n,1)}));case 9:e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(0),e.t0;case 14:case"end":return e.stop()}},e,null,[[0,11]])}));return function(t,n){return e.apply(this,arguments)}}(),[y,a,m,p]),w=Object(s.useCallback)(function(){var e=Object(o.a)(i.a.mark(function e(t,n){var o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t[a]){e.next=6;break}return e.next=4,f(t);case 4:e.next=11;break;case 6:return e.next=8,j(t,!1);case 8:o=e.sent,p(n),O(o,n);case 11:C(Object(u.produce)(y,function(e){e[n]=!1})),e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}},e,null,[[0,14]])}));return function(t,n){return e.apply(this,arguments)}}(),[O,y,a,p,j,f]),E=Object(s.useCallback)(function(e){C(Object(u.produce)(y,function(t){t[e]=!0}))},[y]);return{items:b,editingRows:y,add:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=Object(u.produce)(function(e,n){-1===t||t>=e.length?e.push(n):e.splice(t,0,n)});c(n(b,e)),C(n(y,!0))},remove:v,edit:E,save:w,idPropertyName:a}}b&&b===Object(b)&&Object.isExtensible(b)&&Object.defineProperty(b,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"useEditingList",filename:"src\\useEditingList.ts"}})}}]);
//# sourceMappingURL=docs-index.4374e5ff92df86a94a2a.js.map