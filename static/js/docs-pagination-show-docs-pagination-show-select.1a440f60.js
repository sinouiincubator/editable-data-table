(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"./docs/pagination-show-docs/pagination-show-select.mdx":function(e,n,t){"use strict";t.r(n),t.d(n,"default",function(){return c});var l=t("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),i=(t("./node_modules/react/index.js"),t("./node_modules/@mdx-js/react/dist/index.es.js")),a={},s="wrapper";function c(e){var n=e.components,t=Object(l.a)(e,["components"]);return Object(i.b)(s,Object.assign({},a,t,{components:n,mdxType:"MDXLayout"}),Object(i.b)("h1",{id:"\u9009\u62e9\u6570\u636e\u884c"},"\u9009\u62e9\u6570\u636e\u884c"),Object(i.b)("p",null,"\u8fd9\u4e2a\u573a\u666f\u7684\u9009\u62e9\u56e0\u5206\u9875\u548c\u4e00\u6b21\u6027\u52a0\u8f7d\u7684\u8981\u6c42\uff0c\u6240\u4ee5\u5904\u7406\u65b9\u5f0f\u4e5f\u4f1a\u6bd4",Object(i.b)("a",Object.assign({parentName:"p"},{href:""}),"\u666e\u901a\u9009\u62e9"),"\u8981\u590d\u6742\u4e00\u4e9b\u3002",Object(i.b)("inlineCode",{parentName:"p"},"useEditingList"),"\u9ed8\u8ba4\u96c6\u6210\u4e86\u9009\u62e9\u884c\u72b6\u6001\u7ba1\u7406\u903b\u8f91\uff0c\u4f46\u662f\u9700\u8981\u4e8c\u6b21\u5904\u7406\u624d\u80fd\u9002\u5408\u5f53\u524d\u8fd9\u4e2a\u573a\u666f\u3002"),Object(i.b)("p",null,"\u9996\u5148\uff0c\u6211\u4eec\u4f7f\u7528",Object(i.b)("a",Object.assign({parentName:"p"},{href:""}),"RowTableColumn"),"\u6765\u6e32\u67d3\u9009\u62e9\u5217\uff1a"),Object(i.b)("pre",null,Object(i.b)("code",Object.assign({parentName:"pre"},{className:"language-tsx"}),"<RowSelectColumn\n  startIndex={currentPage * pageSize}\n  selectedRows={editingList.selectedRows}\n  isAllSelected={editingList.isAllSelected}\n  isContainsSelected={editingList.isContainsSelected}\n  toggleAllSelected={editingList.toggleAllSelected}\n  toggleRowSelected={editingList.toggleRowSelected}\n/>\n")),Object(i.b)("p",null,"\u8fd9\u4e2a\u7ec4\u4ef6\u7684\u4e09\u4e2a\u5c5e\u6027\u9700\u8981\u505a\u5206\u9875\u8c03\u6574\uff1a"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"isAllSelected")," - \u5224\u65ad\u662f\u5426\u5168\u90e8\u9009\u4e2d\u3002",Object(i.b)("strong",{parentName:"li"},"\u66f4\u51c6\u786e\u5730\u8bf4"),"\uff0c\u5e94\u8be5\u662f\u5224\u65ad\u5f53\u524d\u9875\u7684\u6570\u636e\u662f\u5426\u5168\u90e8\u9009\u4e2d\u3002"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"isContainsSelected")," - \u5224\u65ad\u662f\u5426\u5305\u542b\u9009\u4e2d\u6570\u636e\u3002",Object(i.b)("strong",{parentName:"li"},"\u66f4\u51c6\u786e\u5730\u8bf4"),"\uff0c\u5e94\u8be5\u662f\u5224\u65ad\u5f53\u524d\u9875\u662f\u5426\u6709\u9009\u4e2d\u7684\u6570\u636e\u884c\u3002"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"toggleAllSelected")," - \u5207\u6362\u5168\u9009\u3002",Object(i.b)("strong",{parentName:"li"},"\u66f4\u51c6\u786e\u5730\u8bf4"),"\uff0c\u5e94\u8be5\u662f\u5207\u6362\u5f53\u524d\u9875\u6240\u6709\u6570\u636e\u7684\u9009\u4e2d\u72b6\u6001\uff0c\u8981\u4e48\u5168\u9009\uff0c\u8981\u4e48\u5168\u90e8\u53d6\u6d88\u9009\u4e2d\u3002")),Object(i.b)("p",null,"\u4ee5\u4e0a\u4e09\u4e2a\u5c5e\u6027\u5e94\u8be5\u53ea\u8ddf\u5f53\u524d\u9875\u7684\u6570\u636e\u76f8\u5173\uff0c\u4f46\u662f",Object(i.b)("inlineCode",{parentName:"p"},"editingList"),"\u63d0\u4f9b\u7684\u9009\u62e9\u72b6\u6001\u662f\u4e0e\u6574\u4e2a\u5217\u8868\u76f8\u5173\u7684\uff0c\u6240\u4ee5\u9700\u8981\u505a\u4e8c\u6b21\u5904\u7406\u3002"),Object(i.b)("p",null,"\u9996\u5148\uff0c\u6211\u4eec\u521b\u5efa\u4e00\u4e2a\u81ea\u5b9a\u4e49 hook\uff0c\u540d\u79f0\u4e3a",Object(i.b)("inlineCode",{parentName:"p"},"usePaginationSelectedRows"),":"),Object(i.b)("pre",null,Object(i.b)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"function usePaginationSelectedRows(\n  editingList: any,\n  currentPage: number,\n  pageSize: number,\n) {\n  const start = currentPage * pageSize;\n  const end = Math.min(editingList.items.length, (currentPage + 1) * pageSize);\n\n  // TODO: \u4e0b\u9762\u7684isAllSelected\u3001isContainsSelected\u3001toggleAllSelected\u7684\u4ee3\u7801\u90fd\u653e\u5728\u8fd9\n\n  return {\n    isAllSelected,\n    isContainsSelected,\n    toggleAllSelected,\n  };\n}\n")),Object(i.b)("p",null,"\u7136\u540e\uff0c\u6211\u4eec\u6765\u5904\u7406",Object(i.b)("inlineCode",{parentName:"p"},"isAllSelected"),"\uff0c\u5b83\u8868\u793a\u5f53\u524d\u9875\u662f\u5426\u5168\u90e8\u9009\u4e2d\uff0c\u90a3\u4e48\u6211\u4eec\u53ea\u9700\u8981\u62ff\u5230\u5f53\u524d\u9875\u6240\u6709\u884c\uff0c\u7136\u540e\u770b\u770b\u6bcf\u4e00\u884c\u662f\u5426\u90fd\u5728",Object(i.b)("inlineCode",{parentName:"p"},"editingList.selectedRows"),"\u4e2d\u5373\u53ef\u3002"),Object(i.b)("p",null,"\u4e3a\u4e86\u65b9\u4fbf\u751f\u6210\u5f53\u524d\u9875\u6240\u6709\u884c\u7684\u7d22\u5f15\u6570\u7ec4\uff0c\u521b\u5efa\u4e00\u4e2a range \u65b9\u6cd5\uff1a"),Object(i.b)("pre",null,Object(i.b)("code",Object.assign({parentName:"pre"},{className:"language-tsx"}),"/**\n * \u751f\u6210\u5e8f\u5217\u6570\u7ec4\n *\n * @param start \u5f00\u59cb\n * @param end \u7ed3\u675f\n */\nfunction range(start: number, end: number) {\n  return new Array(end - start).fill(null).map((_, idx) => start + idx);\n}\n")),Object(i.b)("p",null,Object(i.b)("inlineCode",{parentName:"p"},"isAllSelected"),"\u7684\u8ba1\u7b97\u8fc7\u7a0b\uff1a"),Object(i.b)("pre",null,Object(i.b)("code",Object.assign({parentName:"pre"},{className:"language-tsx"}),"/**\n * \u662f\u5426\u5168\u90e8\u9009\u4e2d\n */\nconst isAllSelected = useMemo(() => {\n  return range(start, end).every(\n    (idx) => editingList.selectedRows.indexOf(idx) !== -1,\n  );\n}, [currentPage, editingList.selectedRows, pageSize]);\n")),Object(i.b)("p",null,"\u63a5\u7740\u5904\u7406",Object(i.b)("inlineCode",{parentName:"p"},"isContainsSelected"),"\uff0c\u5b83\u8868\u793a\u5f53\u524d\u9875\u662f\u5426\u6709\u9009\u4e2d\u7684\u6570\u636e\u884c\uff1a"),Object(i.b)("pre",null,Object(i.b)("code",Object.assign({parentName:"pre"},{className:"language-tsx"}),"/**\n * \u662f\u5426\u5305\u542b\u9009\u4e2d\n */\nconst isContainsSelected = useMemo(() => {\n  return range(start, end).some(\n    (idx) => editingList.selectedRows.indexOf(idx) !== -1,\n  );\n}, [currentPage, editingList.selectedRows, pageSize]);\n")),Object(i.b)("p",null,"\u7136\u540e\u5904\u7406\u4e00\u4e0b",Object(i.b)("inlineCode",{parentName:"p"},"toggleAllSelected"),"\uff0c\u5b83\u53ea\u80fd\u5207\u6362\u5f53\u524d\u9875\u884c\u7684\u9009\u4e2d\u72b6\u6001\uff1a"),Object(i.b)("pre",null,Object(i.b)("code",Object.assign({parentName:"pre"},{className:"language-tsx"}),"/**\n * \u5207\u6362\u5168\u9009\n */\nconst toggleAllSelected = useCallback(() => {\n  editingList.setRowsSelected(range(start, end), !isAllSelected);\n}, [editingList, end, isAllSelected, start]);\n")),Object(i.b)("p",null,"\u6700\u540e\uff0c\u5728",Object(i.b)("inlineCode",{parentName:"p"},"Demo"),"\u7ec4\u4ef6\u4e2d\u4f7f\u7528",Object(i.b)("inlineCode",{parentName:"p"},"usePaginationSelectedRows"),":"),Object(i.b)("pre",null,Object(i.b)("code",Object.assign({parentName:"pre"},{className:"language-tsx"}),"function Demo() {\n  // ...\n  const paginationSelectedRows = usePaginationSelectedRows(\n    editingList,\n    currentPage,\n    pageSize,\n  );\n\n  return (\n    <EditableDataTable>\n      <RowSelectColumn\n        startIndex={currentPage * pageSize}\n        selectedRows={editingList.selectedRows}\n        isAllSelected={paginationSelectedRows.isAllSelected}\n        isContainsSelected={paginationSelectedRows.isContainsSelected}\n        toggleAllSelected={paginationSelectedRows.toggleAllSelected}\n        toggleRowSelected={editingList.toggleRowSelected}\n      />\n    </EditableDataTable>\n  );\n}\n")),Object(i.b)("h2",{id:"\u5220\u9664\u9009\u4e2d\u6570\u636e"},"\u5220\u9664\u9009\u4e2d\u6570\u636e"),Object(i.b)("p",null,"\u5728",Object(i.b)("inlineCode",{parentName:"p"},"usePaginationSelectedRows"),"\u4e2d\u6dfb\u52a0\u4e00\u4e2a",Object(i.b)("inlineCode",{parentName:"p"},"removeAllSelectedRows"),"\u65b9\u6cd5\uff1a"),Object(i.b)("pre",null,Object(i.b)("code",Object.assign({parentName:"pre"},{className:"language-tsx"}),"function usePaginationSelectedRows() {\n  /**\n   * \u5220\u9664\u6240\u6709\u9009\u4e2d\u7684\u6570\u636e\n   */\n  const removeAllSelectedRows = async () => {\n    const rows = editingList.items\n      .map((item, idx) => [item, idx])\n      .filter((_data, index) => editingList.selectedRows.includes(index));\n    await editingList.remove(rows);\n  };\n\n  return {\n    // ...\n    removeAllSelectedRows,\n  };\n}\n")),Object(i.b)("p",null,"\u5c06",Object(i.b)("inlineCode",{parentName:"p"},"paginationSelectedRows.removeAllSelectedRows"),"\u65b9\u6cd5\u7ed1\u5b9a\u5230\u5220\u9664\u6309\u94ae\u7684\u70b9\u51fb\u4e8b\u4ef6\u4e0a\u5373\u53ef\u3002"))}c&&c===Object(c)&&Object.isExtensible(c)&&Object.defineProperty(c,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"MDXContent",filename:"docs\\pagination-show-docs\\pagination-show-select.mdx"}}),c.isMDXComponent=!0}}]);
//# sourceMappingURL=docs-pagination-show-docs-pagination-show-select.e18bd2cd872df3ec74fc.js.map