{"version":3,"sources":["/Users/sinosoft/Documents/GitHub/editable-data-table/docs/index.mdx","/Users/sinosoft/Documents/GitHub/editable-data-table/src/Table.tsx","/Users/sinosoft/Documents/GitHub/editable-data-table/src/EmptyDataTableRow.tsx","/Users/sinosoft/Documents/GitHub/editable-data-table/src/DataTableColGroup.tsx","/Users/sinosoft/Documents/GitHub/editable-data-table/src/DataTableHead.tsx","/Users/sinosoft/Documents/GitHub/editable-data-table/src/DataTableBodyRow.tsx","/Users/sinosoft/Documents/GitHub/editable-data-table/src/DataTableBody.tsx","/Users/sinosoft/Documents/GitHub/editable-data-table/src/EditableDataTable.tsx","/Users/sinosoft/Documents/GitHub/editable-data-table/src/DataTableCellEditor.tsx","/Users/sinosoft/Documents/GitHub/editable-data-table/src/DataTableBodyCell.tsx","/Users/sinosoft/Documents/GitHub/editable-data-table/src/DataTableHeadCell.tsx","/Users/sinosoft/Documents/GitHub/editable-data-table/src/TableColumn.tsx","/Users/sinosoft/Documents/GitHub/editable-data-table/src/shared/DataTableRowContext.ts","/Users/sinosoft/Documents/GitHub/editable-data-table/src/shared/EditableDataTableContext.ts","/Users/sinosoft/Documents/GitHub/editable-data-table/src/shared/EditingBodyRowContainer.ts","/Users/sinosoft/Documents/GitHub/editable-data-table/src/shared/constants.ts","/Users/sinosoft/Documents/GitHub/editable-data-table/src/useEditingList.ts"],"names":["layoutProps","MDXLayout","MDXContent","_ref","components","props","Object","_Users_sinosoft_Documents_GitHub_editable_data_table_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_2__","_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__","assign","mdxType","id","parentName","className","href","docz__WEBPACK_IMPORTED_MODULE_5__","__position","__code","__scope","this","useState","useCallback","useMemo","Playground","Props","TableColumn","EditableDataTable","useEditingList","Button","TextInput","produce","_src_EditableDataTable__WEBPACK_IMPORTED_MODULE_7__","data","firstName","lastName","title","_src_TableColumn__WEBPACK_IMPORTED_MODULE_6__","name","render","value","row","concat","editingRows","editor","validate","rowData","errors","startsWith","_useState","_useState2","_Users_sinosoft_Documents_GitHub_editable_data_table_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__","setEditingRows","_useState3","_useState4","items","setItems","react__WEBPACK_IMPORTED_MODULE_3___default","a","Fragment","sinoui_components_Button__WEBPACK_IMPORTED_MODULE_9__","onClick","_Users_sinosoft_Documents_GitHub_editable_data_table_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__","result","order","index","context","editing","autoWidth","draft","alert","handleSave","handleEdit","removeByIndex","splice","handleRemove","_useEditingList","add","edit","save","remove","idPropertyName","then","_useState5","_useState6","setData","prev","filter","_item","i","renderButtons","columns","length","isMDXComponent","captionTypeStyle","css","_templateObject","theme","typography","body1","fontSize","fontFamily","fontWeightMedium","color","bodyTypeStyle","_templateObject2","fontWeight","dataTableCellStyle","_templateObject3","palette","type","rowBgColor","light","tableRowSelected","tableRowHover","dark","StyledTable","styled","Table","_templateObject4","primary","caption","Wrapper","div","EmptyDataTableRow_templateObject","EmptyDataTableRow","children","react_default","createElement","data-testid","RowType","ColGroup","DataTableColGroup","DataTableRowContext","Provider","DataTableHead","React","memo","error","touched","Body","EditingBodyRowContainer","DataTableBody","_ref$editingRows","map","item","src_DataTableBodyRow","key","undefined","_props$data","_props$idPropertyName","_props$emptyTitle","emptyTitle","_ref$idPropertyName","onRowChange","onFieldChange","options","useRef","useEffect","current","useEditableDataTable","src_Table","EditableDataTableContext","src_DataTableColGroup","src_DataTableHead","src_DataTableBody","src_EmptyDataTableRow","Editor","useContext","valueFromContext","setValue","slicedToArray","_EditingBodyRowContai","useContainer","validateField","errorControlled","handleChange","event","newValue","target","isChangeEvent","onChange","FormHelpText","MemoDataTableBodyCellInner","Error","src_DataTableCellEditor","DataTableBodyCell","state","DataTableHeadCell","classNames","align_center","width","Head","src_DataTableHeadCell","src_DataTableBodyCell","react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","_constants__WEBPACK_IMPORTED_MODULE_1__","createContext","createContainer","outerError","outTouched","_Users_sinosoft_Documents_GitHub_editable_data_table_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__","setTouched","setErrors","rowDataRef","_useContext","updateErrors","newErrors","shallowEqual","newRowData","arguments","updateTouched","newTouched","keys","forEach","fieldName","_Users_sinosoft_Documents_GitHub_editable_data_table_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__","_Users_sinosoft_Documents_GitHub_editable_data_table_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","d","__webpack_exports__","url","defaultValue","_useRestListApi","useRestListApi","removeItemAt","update","isLoading","addItem","_Users_sinosoft_Documents_GitHub_editable_data_table_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__","itemsCount","Array","fill","asyncRemove","_ref2","_Users_sinosoft_Documents_GitHub_editable_data_table_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","_Users_sinosoft_Documents_GitHub_editable_data_table_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","mark","_callee","wrap","_context","next","t0","stop","_x","_x2","apply","asyncUpdate","_ref3","_callee2","_context2","sent","_x3","_x4","_Users_sinosoft_Documents_GitHub_editable_data_table_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__"],"mappings":"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","file":"static/js/docs-index.fd74929d.js","sourcesContent":["/* @jsx mdx */\n  import React from 'react'\n  import { mdx } from '@mdx-js/react'\n  /* @jsx mdx */\nimport { useState, useCallback, useMemo } from 'react';\nimport { Playground, Props } from 'docz';\nimport TableColumn from '../src/TableColumn';\nimport EditableDataTable from '../src/EditableDataTable';\nimport useEditingList from '../src/useEditingList';\nimport Button from 'sinoui-components/Button';\nimport TextInput from 'sinoui-components/TextInput';\nimport produce from 'immer';\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n    <h1 {...{\n      \"id\": \"可编辑表格\"\n    }}>{`可编辑表格`}</h1>\n    <p>{`安装：`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`yarn add @sinouiincubator/editable-data-table\n`}</code></pre>\n    <p>{`引用：`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-ts\"\n      }}>{`import EditableDataTable, {\n  TableColumn,\n} from '@sinouiincubator/editable-data-table';\n`}</code></pre>\n    <p>{`源码路径：`}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/sinouiincubator/editable-data-table\"\n      }}>{`https://github.com/sinouiincubator/editable-data-table`}</a>{`。`}</p>\n    <p>{`可编辑列表（`}<inlineCode parentName=\"p\">{`EditableDataTable`}</inlineCode>{`）提供以下功能：`}</p>\n    <ul>\n      <li parentName=\"ul\">{`展现列表数据（不支持分页，但是可以与分页功能组合使用）`}</li>\n      <li parentName=\"ul\">{`编辑数据行`}</li>\n      <li parentName=\"ul\">{`校验数据行`}</li>\n    </ul>\n    <p>{`我们可以基于可编辑表格做列表数据的增删改查。下面我们通过例子来了解基本用法。`}</p>\n    <h2 {...{\n      \"id\": \"展现列表数据\"\n    }}>{`展现列表数据`}</h2>\n    <p><inlineCode parentName=\"p\">{`EditableDataTable`}</inlineCode>{`可以用来展现列表数据，可以通过`}<inlineCode parentName=\"p\">{`TableColumn`}</inlineCode>{`定义列表的列信息：列标题、列单元格数据渲染逻辑、宽度等。`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-tsx\"\n      }}>{`import EditableDataTable, {\n  TableColumn,\n} from '@sinouiincubator/editable-data-table';\n\nfunction Demo() {\n  const users = [\n    {\n      id: '1',\n      firstName: 'Jacking',\n      lastName: 'Liu',\n      title: 'developer',\n    },\n    {\n      id: '2',\n      firstName: 'Zinuo',\n      lastName: 'Tian',\n      title: 'developer',\n    },\n  ];\n\n  return (\n    <EditableDataTable data={users}>\n      <TableColumn title=\"id\" name=\"id\" />\n      <TableColumn\n        title=\"姓名\"\n        render={(value, row) => \\`\\${row.firstName} \\${row.lastName}\\`}\n      />\n      <TableColumn title=\"标题\" name=\"title\" />\n    </EditableDataTable>\n  );\n}\n`}</code></pre>\n    <p>{`查看运行效果：`}</p>\n    <Playground __position={0} __code={'() => {\\n  const users = [\\n    {\\n      id: \\'1\\',\\n      firstName: \\'Jacking\\',\\n      lastName: \\'Liu\\',\\n      title: \\'developer\\',\\n    },\\n    {\\n      id: \\'2\\',\\n      firstName: \\'Zinuo\\',\\n      lastName: \\'Tian\\',\\n      title: \\'developer\\',\\n    },\\n  ]\\n  return (\\n    <EditableDataTable data={users}>\\n      <TableColumn title=\\\"id\\\" name=\\\"id\\\" />\\n      <TableColumn\\n        title=\\\"姓名\\\"\\n        render={(value, row) => `${row.firstName} ${row.lastName}`}\\n      />\\n      <TableColumn title=\\\"标题\\\" name=\\\"title\\\" />\\n    </EditableDataTable>\\n  )\\n}'} __scope={{\n      props: this ? this.props : props,\n      useState,\n      useCallback,\n      useMemo,\n      Playground,\n      Props,\n      TableColumn,\n      EditableDataTable,\n      useEditingList,\n      Button,\n      TextInput,\n      produce\n    }} mdxType=\"Playground\">\n  {() => {\n        const users = [{\n          id: '1',\n          firstName: 'Jacking',\n          lastName: 'Liu',\n          title: 'developer'\n        }, {\n          id: '2',\n          firstName: 'Zinuo',\n          lastName: 'Tian',\n          title: 'developer'\n        }];\n        return <EditableDataTable data={users} mdxType=\"EditableDataTable\">\n        <TableColumn title=\"id\" name=\"id\" mdxType=\"TableColumn\" />\n        <TableColumn title=\"姓名\" render={(value, row) => `${row.firstName} ${row.lastName}`} mdxType=\"TableColumn\" />\n        <TableColumn title=\"标题\" name=\"title\" mdxType=\"TableColumn\" />\n      </EditableDataTable>;\n      }}\n    </Playground>\n    <h2 {...{\n      \"id\": \"编辑数据行\"\n    }}>{`编辑数据行`}</h2>\n    <p><inlineCode parentName=\"p\">{`EditableDataTable`}</inlineCode>{`组件通过`}<inlineCode parentName=\"p\">{`editingRows`}</inlineCode>{`接收数据行是否处于编辑状态的数据。这是一个与`}<inlineCode parentName=\"p\">{`data`}</inlineCode>{`数组等长的布尔数组，`}<inlineCode parentName=\"p\">{`editingRows`}</inlineCode>{`数组的每一项与`}<inlineCode parentName=\"p\">{`data`}</inlineCode>{`数组一一对应，`}<inlineCode parentName=\"p\">{`true`}</inlineCode>{`表示编辑状态、`}<inlineCode parentName=\"p\">{`false`}</inlineCode>{`表示非编辑状态。`}</p>\n    <p>{`可以通过`}<inlineCode parentName=\"p\">{`TableColumn`}</inlineCode>{`组件的`}<inlineCode parentName=\"p\">{`editor`}</inlineCode>{`属性指定单元格的编辑器。如下所示：`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-jsx\"\n      }}>{`import EditableDataTable, {\n  TableColumn,\n} from '@sinouiincubator/editable-data-table';\n\nfunction Demo() {\n  const users = [\n    {\n      id: '1',\n      name: 'Jacking',\n      title: 'developer',\n    },\n    {\n      id: '2',\n      name: 'zinuo',\n      title: 'developer',\n    },\n  ];\n\n  const editingRows = [false, true]; // 第二行数据是编辑状态\n\n  return (\n    <EditableDataTable data={users} editingRows={editingRows}>\n      <TableColumn title=\"id\" name=\"id\" editor=\"input\" />\n      <TableColumn title=\"姓名\" name=\"name\" editor=\"input\" />\n      <TableColumn title=\"标题\" name=\"title\" editor=\"input\" />\n    </EditableDataTable>\n  );\n}\n`}</code></pre>\n    <p>{`查看运行效果：`}</p>\n    <Playground __position={1} __code={'() => {\\n  const users = [\\n    {\\n      id: \\'1\\',\\n      name: \\'Jacking\\',\\n      title: \\'developer\\',\\n    },\\n    {\\n      id: \\'2\\',\\n      name: \\'zinuo\\',\\n      title: \\'developer\\',\\n    },\\n  ]\\n  const editingRows = [false, true] // 第二行数据是编辑状态\\n\\n  return (\\n    <EditableDataTable data={users} editingRows={editingRows}>\\n      <TableColumn title=\\\"id\\\" name=\\\"id\\\" editor=\\\"input\\\" />\\n      <TableColumn title=\\\"姓名\\\" name=\\\"name\\\" editor=\\\"input\\\" />\\n      <TableColumn title=\\\"标题\\\" name=\\\"title\\\" editor=\\\"input\\\" />\\n    </EditableDataTable>\\n  )\\n}'} __scope={{\n      props: this ? this.props : props,\n      useState,\n      useCallback,\n      useMemo,\n      Playground,\n      Props,\n      TableColumn,\n      EditableDataTable,\n      useEditingList,\n      Button,\n      TextInput,\n      produce\n    }} mdxType=\"Playground\">\n  {() => {\n        const users = [{\n          id: '1',\n          name: 'Jacking',\n          title: 'developer'\n        }, {\n          id: '2',\n          name: 'zinuo',\n          title: 'developer'\n        }];\n        const editingRows = [false, true]; // 第二行数据是编辑状态\n\n        return <EditableDataTable data={users} editingRows={editingRows} mdxType=\"EditableDataTable\">\n    <TableColumn title=\"id\" name=\"id\" editor=\"input\" mdxType=\"TableColumn\" />\n    <TableColumn title=\"姓名\" name=\"name\" editor=\"input\" mdxType=\"TableColumn\" />\n    <TableColumn title=\"标题\" name=\"title\" editor=\"input\" mdxType=\"TableColumn\" />\n  </EditableDataTable>;\n      }}\n    </Playground>\n    <h2 {...{\n      \"id\": \"校验数据行\"\n    }}>{`校验数据行`}</h2>\n    <p>{`可以通过`}<inlineCode parentName=\"p\">{`EditableDataTable`}</inlineCode>{`的`}<inlineCode parentName=\"p\">{`validate`}</inlineCode>{`属性指定行数据的校验，这是一个方法，方法返回验证错误的结果。如下所示：`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-ts\"\n      }}>{`function validate(rowData) {\n  const errors = {};\n\n  if (!rowData.id) {\n    errors.id = '必填';\n  }\n\n  if (!rowData.name) {\n    errors.name = '必填';\n  }\n\n  if (rowData.title && rowData.title.startsWith('1')) {\n    errors.title = '不能以1开头';\n  }\n\n  return errors;\n}\n`}</code></pre>\n    <p>{`这个方法运行的结果类似如下面：`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`{\n  id: '必填',\n  title: '不能以1开头'\n}\n`}</code></pre>\n    <p>{`这个键值对数据，键表示有验证错误的字段名（表单域名称），值表示字段名对应的验证错误。`}</p>\n    <p>{`看看效果：`}</p>\n    <Playground __position={2} __code={'() => {\\n  function validate(rowData) {\\n    const errors = {}\\n    if (!rowData.id) {\\n      errors.id = \\'必填\\'\\n    }\\n\\n    if (!rowData.name) {\\n      errors.name = \\'必填\\'\\n    }\\n\\n    if (rowData.title && rowData.title.startsWith(\\'1\\')) {\\n      errors.title = \\'不能以1开头\\'\\n    }\\n\\n    return errors\\n  }\\n\\n  const users = [\\n    {\\n      id: \\'1\\',\\n      name: \\'Jacking\\',\\n      title: \\'developer\\',\\n    },\\n    {\\n      id: \\'2\\',\\n      name: \\'zinuo\\',\\n      title: \\'developer\\',\\n    },\\n  ]\\n\\n  const editingRows = [false, true] // 第二行数据是编辑状态\\n\\n  return (\\n    <EditableDataTable\\n      data={users}\\n      editingRows={editingRows}\\n      validate={validate}\\n    >\\n      <TableColumn title=\\\"id\\\" name=\\\"id\\\" editor=\\\"input\\\" />\\n      <TableColumn title=\\\"姓名\\\" name=\\\"name\\\" editor=\\\"input\\\" />\\n      <TableColumn title=\\\"标题\\\" name=\\\"title\\\" editor=\\\"input\\\" />\\n    </EditableDataTable>\\n  )\\n}'} __scope={{\n      props: this ? this.props : props,\n      useState,\n      useCallback,\n      useMemo,\n      Playground,\n      Props,\n      TableColumn,\n      EditableDataTable,\n      useEditingList,\n      Button,\n      TextInput,\n      produce\n    }} mdxType=\"Playground\">\n  {() => {\n        function validate(rowData) {\n          const errors = {};\n\n          if (!rowData.id) {\n            errors.id = '必填';\n          }\n\n          if (!rowData.name) {\n            errors.name = '必填';\n          }\n\n          if (rowData.title && rowData.title.startsWith('1')) {\n            errors.title = '不能以1开头';\n          }\n\n          return errors;\n        }\n\n        const users = [{\n          id: '1',\n          name: 'Jacking',\n          title: 'developer'\n        }, {\n          id: '2',\n          name: 'zinuo',\n          title: 'developer'\n        }];\n        const editingRows = [false, true]; // 第二行数据是编辑状态\n\n        return <EditableDataTable data={users} editingRows={editingRows} validate={validate} mdxType=\"EditableDataTable\">\n    <TableColumn title=\"id\" name=\"id\" editor=\"input\" mdxType=\"TableColumn\" />\n    <TableColumn title=\"姓名\" name=\"name\" editor=\"input\" mdxType=\"TableColumn\" />\n    <TableColumn title=\"标题\" name=\"title\" editor=\"input\" mdxType=\"TableColumn\" />\n  </EditableDataTable>;\n      }}\n    </Playground>\n    <h2 {...{\n      \"id\": \"增删改查\"\n    }}>{`增删改查`}</h2>\n    <p>{`可以基于`}<inlineCode parentName=\"p\">{`EditableDataTable`}</inlineCode>{`实现增删改查。看看下面一个与后端 API 无法的增删改查示例：`}</p>\n    <Playground __position={3} __code={'() => {\\n  const validate = data => {\\n    const result = {}\\n    if (!data.id) {\\n      result.id = \\'必填\\'\\n    }\\n    if (data.title && data.title.startsWith(\\'1\\')) {\\n      result.title = \\'标题不能以1开头\\'\\n    }\\n    return result\\n  }\\n  const [editingRows, setEditingRows] = useState([true, false])\\n  const [items, setItems] = useState([\\n    { id: \\'1\\', title: \\'123\\' },\\n    { id: \\'2\\', title: \\'1234\\' },\\n  ])\\n\\n  const handleSave = (row, index, context) => {\\n    if (!context.validate()) {\\n      alert(\\'数据填写不完整\\')\\n    } else {\\n      setEditingRows(\\n        produce(editingRows, draft => {\\n          draft[index] = false\\n        }),\\n      )\\n      alert(\\'保存成功\\')\\n    }\\n  }\\n\\n  const handleEdit = index => {\\n    setEditingRows(\\n      produce(editingRows, draft => {\\n        draft[index] = true\\n      }),\\n    )\\n  }\\n\\n  const handleRemove = index => {\\n    const removeByIndex = produce(draft => {\\n      draft.splice(index, 1)\\n    })\\n    setEditingRows(removeByIndex)\\n    setItems(removeByIndex)\\n  }\\n\\n  const handleAdd = () => {\\n    setEditingRows([...editingRows, true])\\n    setItems([...items, {}])\\n  }\\n\\n  return (\\n    <>\\n      <Button onClick={handleAdd}>新增</Button>\\n      <EditableDataTable\\n        data={items}\\n        editingRows={editingRows}\\n        validate={validate}\\n      >\\n        <TableColumn title=\\\"序号\\\" order />\\n        <TableColumn title=\\\"id\\\" name=\\\"id\\\" editor={TextInput} />\\n        <TableColumn title=\\\"标题\\\" name=\\\"title\\\" editor={TextInput} />\\n        <TableColumn\\n          title=\\\"操作\\\"\\n          name=\\\"id\\\"\\n          render={(value, row, index, id, context) => (\\n            <>\\n              {context.editing ? (\\n                <Button\\n                  autoWidth\\n                  onClick={() => handleSave(row, index, context)}\\n                >\\n                  保存\\n                </Button>\\n              ) : (\\n                <Button autoWidth onClick={() => handleEdit(index)}>\\n                  编辑\\n                </Button>\\n              )}\\n              <Button autoWidth onClick={() => handleRemove(index)}>\\n                删除\\n              </Button>\\n            </>\\n          )}\\n        />\\n      </EditableDataTable>\\n    </>\\n  )\\n}'} __scope={{\n      props: this ? this.props : props,\n      useState,\n      useCallback,\n      useMemo,\n      Playground,\n      Props,\n      TableColumn,\n      EditableDataTable,\n      useEditingList,\n      Button,\n      TextInput,\n      produce\n    }} mdxType=\"Playground\">\n  {() => {\n        const validate = data => {\n          const result = {};\n\n          if (!data.id) {\n            result.id = '必填';\n          }\n\n          if (data.title && data.title.startsWith('1')) {\n            result.title = '标题不能以1开头';\n          }\n\n          return result;\n        };\n\n        const [editingRows, setEditingRows] = useState([true, false]);\n        const [items, setItems] = useState([{\n          id: '1',\n          title: '123'\n        }, {\n          id: '2',\n          title: '1234'\n        }]);\n\n        const handleSave = (row, index, context) => {\n          if (!context.validate()) {\n            alert('数据填写不完整');\n          } else {\n            setEditingRows(produce(editingRows, draft => {\n              draft[index] = false;\n            }));\n            alert('保存成功');\n          }\n        };\n\n        const handleEdit = index => {\n          setEditingRows(produce(editingRows, draft => {\n            draft[index] = true;\n          }));\n        };\n\n        const handleRemove = index => {\n          const removeByIndex = produce(draft => {\n            draft.splice(index, 1);\n          });\n          setEditingRows(removeByIndex);\n          setItems(removeByIndex);\n        };\n\n        const handleAdd = () => {\n          setEditingRows([...editingRows, true]);\n          setItems([...items, {}]);\n        };\n\n        return <>\n  <Button onClick={handleAdd} mdxType=\"Button\">新增</Button>\n  <EditableDataTable data={items} editingRows={editingRows} validate={validate} mdxType=\"EditableDataTable\">\n    <TableColumn title=\"序号\" order mdxType=\"TableColumn\" />\n    <TableColumn title=\"id\" name=\"id\" editor={TextInput} mdxType=\"TableColumn\" />\n    <TableColumn title=\"标题\" name=\"title\" editor={TextInput} mdxType=\"TableColumn\" />\n    <TableColumn title=\"操作\" name=\"id\" render={(value, row, index, id, context) => <>\n        {context.editing ? <Button autoWidth onClick={() => handleSave(row, index, context)} mdxType=\"Button\">保存</Button> : <Button autoWidth onClick={() => handleEdit(index)} mdxType=\"Button\">编辑</Button>}\n        <Button autoWidth onClick={() => handleRemove(index)} mdxType=\"Button\">删除</Button>\n      </>} mdxType=\"TableColumn\" />\n  </EditableDataTable>\n        </>;\n      }}\n    </Playground>\n    <h2 {...{\n      \"id\": \"使用-useeditinglist\"\n    }}>{`使用 useEditingList`}</h2>\n    <p>{`可以使用 useEditingList 简化增删改查场景的开发：`}</p>\n    <ul>\n      <li parentName=\"ul\">{`内置`}<inlineCode parentName=\"li\">{`editingRows`}</inlineCode>{`和`}<inlineCode parentName=\"li\">{`items`}</inlineCode>{`两个状态和变更方法。`}</li>\n      <li parentName=\"ul\">{`集成了`}<a parentName=\"li\" {...{\n          \"href\": \"https://github.com/sinoui/use-rest-list-api\"\n        }}>{`@sinoui/use-rest-list-api`}</a>{`，与后端 API 做增删改查交互。`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-tsx\"\n      }}>{`import EditableDataTable, {\n  useEiditingList,\n  TableColumn,\n} from '@sinouiincubator/editable-data-table';\nimport Button from 'sinoui-components/Button';\nimport TextInput from 'sinoui-components/TextInput';\n\nfunction validate(data) {\n  const result = {};\n  if (!data.id) {\n    result.id = '必填';\n  }\n  if (data.title && data.title.startsWith('1')) {\n    result.title = '标题不能以1开头';\n  }\n  return result;\n}\n\nfunction Demo() {\n  const {\n    items,\n    add,\n    edit,\n    save,\n    remove,\n    idPropertyName,\n    editingRows,\n  } = useEditingList('/api/tests', []);\n\n  const handleSave = (row, index, context) => {\n    if (!context.validate()) {\n      alert('数据填写不完整');\n    } else {\n      save(row, index);\n      alert('保存成功');\n    }\n  };\n\n  return (\n    <>\n      <Button onClick={add}>新增</Button>\n      <EditableDataTable\n        data={items}\n        editingRows={editingRows}\n        validate={validate}\n        idPropertyName={idPropertyName}\n      >\n        <TableColumn title=\"序号\" order />\n        <TableColumn title=\"标题\" name=\"title\" editor={TextInput} />\n        <TableColumn title=\"备注\" name=\"note\" editor={TextInput} />\n        <TableColumn\n          title=\"操作\"\n          name=\"id\"\n          render={(value, row, index, id, context) => (\n            <>\n              {context.editing ? (\n                <Button\n                  autoWidth\n                  onClick={() => handleSave(row, index, context)}\n                >\n                  保存\n                </Button>\n              ) : (\n                <Button autoWidth onClick={() => edit(index)}>\n                  编辑\n                </Button>\n              )}\n              <Button autoWidth onClick={() => remove(row, index)}>\n                删除\n              </Button>\n            </>\n          )}\n        />\n      </EditableDataTable>\n    </>\n  );\n}\n`}</code></pre>\n    <p>{`示例：`}</p>\n    <Playground __position={4} __code={'() => {\\n  const validate = data => {\\n    const result = {}\\n\\n    if (data.title && data.title.startsWith(\\'1\\')) {\\n      result.title = \\'标题不能以1开头\\'\\n    }\\n    return result\\n  }\\n  const {\\n    items,\\n    add,\\n    edit,\\n    save,\\n    remove,\\n    idPropertyName,\\n    editingRows,\\n  } = useEditingList(\\'/api/tests\\', [])\\n\\n  const handleSave = (row, index, context) => {\\n    if (!context.validate()) {\\n      alert(\\'数据填写不完整\\')\\n    } else {\\n      save(row, index).then(\\n        () => {\\n          alert(\\'保存成功\\')\\n        },\\n        () => {\\n          alert(\\'保存失败\\')\\n        },\\n      )\\n    }\\n  }\\n\\n  return (\\n    <>\\n      <Button onClick={add}>新增</Button>\\n      <EditableDataTable\\n        data={items}\\n        editingRows={editingRows}\\n        validate={validate}\\n        idPropertyName={idPropertyName}\\n      >\\n        <TableColumn title=\\\"序号\\\" order />\\n        <TableColumn title=\\\"标题\\\" name=\\\"title\\\" editor={TextInput} />\\n        <TableColumn title=\\\"备注\\\" name=\\\"note\\\" editor={TextInput} />\\n        <TableColumn\\n          title=\\\"操作\\\"\\n          name=\\\"id\\\"\\n          render={(value, row, index, id, context) => (\\n            <>\\n              {context.editing ? (\\n                <Button\\n                  autoWidth\\n                  onClick={() => handleSave(row, index, context)}\\n                >\\n                  保存\\n                </Button>\\n              ) : (\\n                <Button autoWidth onClick={() => edit(index)}>\\n                  编辑\\n                </Button>\\n              )}\\n              <Button autoWidth onClick={() => remove(row, index)}>\\n                删除\\n              </Button>\\n            </>\\n          )}\\n        />\\n      </EditableDataTable>\\n    </>\\n  )\\n}'} __scope={{\n      props: this ? this.props : props,\n      useState,\n      useCallback,\n      useMemo,\n      Playground,\n      Props,\n      TableColumn,\n      EditableDataTable,\n      useEditingList,\n      Button,\n      TextInput,\n      produce\n    }} mdxType=\"Playground\">\n  {() => {\n        const validate = data => {\n          const result = {};\n\n          if (data.title && data.title.startsWith('1')) {\n            result.title = '标题不能以1开头';\n          }\n\n          return result;\n        };\n\n        const {\n          items,\n          add,\n          edit,\n          save,\n          remove,\n          idPropertyName,\n          editingRows\n        } = useEditingList('/api/tests', []);\n\n        const handleSave = (row, index, context) => {\n          if (!context.validate()) {\n            alert('数据填写不完整');\n          } else {\n            save(row, index).then(() => {\n              alert('保存成功');\n            }, () => {\n              alert('保存失败');\n            });\n          }\n        };\n\n        return <>\n  <Button onClick={add} mdxType=\"Button\">新增</Button>\n  <EditableDataTable data={items} editingRows={editingRows} validate={validate} idPropertyName={idPropertyName} mdxType=\"EditableDataTable\">\n    <TableColumn title=\"序号\" order mdxType=\"TableColumn\" />\n    <TableColumn title=\"标题\" name=\"title\" editor={TextInput} mdxType=\"TableColumn\" />\n    <TableColumn title=\"备注\" name=\"note\" editor={TextInput} mdxType=\"TableColumn\" />\n    <TableColumn title=\"操作\" name=\"id\" render={(value, row, index, id, context) => <>\n          {context.editing ? <Button autoWidth onClick={() => handleSave(row, index, context)} mdxType=\"Button\">\n              保存\n            </Button> : <Button autoWidth onClick={() => edit(index)} mdxType=\"Button\">\n              编辑\n            </Button>}\n          <Button autoWidth onClick={() => remove(row, index)} mdxType=\"Button\">\n            删除\n          </Button>\n        </>} mdxType=\"TableColumn\" />\n  </EditableDataTable>\n        </>;\n      }}\n    </Playground>\n    <h2 {...{\n      \"id\": \"优化版本\"\n    }}>{`优化版本`}</h2>\n    <Playground __position={5} __code={'() => {\\n  const [data, setData] = useState([\\n    { id: \\'1\\', title: \\'123\\' },\\n    { id: \\'2\\', title: \\'1234\\' },\\n  ])\\n  const handleAdd = () => {\\n    setData([\\n      ...data,\\n      { id: data.length + 1, title: `标题${data.length + 1}` },\\n    ])\\n  }\\n  const handleRemove = useCallback(index => {\\n    setData(prev => prev.filter((_item, i) => i !== index))\\n  }, [])\\n\\n  const renderButtons = useCallback(\\n    (id, row, index) => (\\n      <Button onClick={() => handleRemove(index)}>删除</Button>\\n    ),\\n    [handleRemove],\\n  )\\n\\n  const columns = useMemo(\\n    () => (\\n      <>\\n        <TableColumn title=\\\"id\\\" name=\\\"id\\\" />\\n        <TableColumn title=\\\"标题\\\" name=\\\"title\\\" />\\n        <TableColumn title=\\\"操作列\\\" name=\\\"id\\\" />\\n        <TableColumn title=\\\"操作\\\" name=\\\"id\\\" render={renderButtons} />\\n      </>\\n    ),\\n    [handleRemove],\\n  )\\n\\n  return (\\n    <div>\\n      <Button onClick={handleAdd}>添加</Button>\\n      <EditableDataTable data={data}>{columns}</EditableDataTable>\\n    </div>\\n  )\\n}'} __scope={{\n      props: this ? this.props : props,\n      useState,\n      useCallback,\n      useMemo,\n      Playground,\n      Props,\n      TableColumn,\n      EditableDataTable,\n      useEditingList,\n      Button,\n      TextInput,\n      produce\n    }} mdxType=\"Playground\">\n  {() => {\n        const [data, setData] = useState([{\n          id: '1',\n          title: '123'\n        }, {\n          id: '2',\n          title: '1234'\n        }]);\n\n        const handleAdd = () => {\n          setData([...data, {\n            id: data.length + 1,\n            title: `标题${data.length + 1}`\n          }]);\n        };\n\n        const handleRemove = useCallback(index => {\n          setData(prev => prev.filter((_item, i) => i !== index));\n        }, []);\n        const renderButtons = useCallback((id, row, index) => <Button onClick={() => handleRemove(index)} mdxType=\"Button\">删除</Button>, [handleRemove]);\n        const columns = useMemo(() => <>\n  <TableColumn title=\"id\" name=\"id\" mdxType=\"TableColumn\" />\n  <TableColumn title=\"标题\" name=\"title\" mdxType=\"TableColumn\" />\n  <TableColumn title=\"操作列\" name=\"id\" mdxType=\"TableColumn\" />\n  <TableColumn title=\"操作\" name=\"id\" render={renderButtons} mdxType=\"TableColumn\" />\n        </>, [handleRemove]);\n        return <div>\n      <Button onClick={handleAdd} mdxType=\"Button\">添加</Button>\n      <EditableDataTable data={data} mdxType=\"EditableDataTable\">\n      {columns}\n      </EditableDataTable>\n    </div>;\n      }}\n    </Playground>\n    <h2 {...{\n      \"id\": \"无数据\"\n    }}>{`无数据`}</h2>\n    <Playground __position={6} __code={'<EditableDataTable data={[]}>\\n  <TableColumn title=\\\"id\\\" name=\\\"id\\\" />\\n  <TableColumn title=\\\"标题\\\" name=\\\"title\\\" />\\n</EditableDataTable>'} __scope={{\n      props: this ? this.props : props,\n      useState,\n      useCallback,\n      useMemo,\n      Playground,\n      Props,\n      TableColumn,\n      EditableDataTable,\n      useEditingList,\n      Button,\n      TextInput,\n      produce\n    }} mdxType=\"Playground\">\n  <EditableDataTable data={[]} mdxType=\"EditableDataTable\">\n    <TableColumn title=\"id\" name=\"id\" mdxType=\"TableColumn\" />\n    <TableColumn title=\"标题\" name=\"title\" mdxType=\"TableColumn\" />\n  </EditableDataTable>\n    </Playground>\n    </MDXLayout>;\n}\n\nMDXContent.isMDXComponent = true;\n  ","import styled, { css } from 'sinoui-components/styles';\nimport Table from 'sinoui-components/Table';\n\nconst captionTypeStyle = css`\n  font-size: ${(props) => props.theme.typography.body1.fontSize}rem;\n  font-family: ${(props) => props.theme.typography.fontFamily};\n  font-weight: ${(props) => props.theme.typography.fontWeightMedium};\n  color: ${(props) => props.theme.typography.body1.color};\n`;\n\nconst bodyTypeStyle = css`\n  font-size: ${(props) => props.theme.typography.body1.fontSize}rem;\n  font-family: ${(props) => props.theme.typography.fontFamily};\n  font-weight: ${(props) => props.theme.typography.body1.fontWeight};\n  color: ${(props) => props.theme.typography.body1.color};\n`;\n\nconst dataTableCellStyle = css`\n  padding: 0;\n  padding-left: 8px;\n  padding-right: 8px;\n  border-bottom: 1px solid\n    ${(props) =>\n      props.theme.palette.type === 'light'\n        ? 'rgba(224, 224, 224, 1)'\n        : 'rgba(80, 80, 80, 1)'};\n`;\n\nconst rowBgColor = {\n  light: {\n    tableRowSelected: 'rgba(0, 0, 0, 0.04)', // 表格行选中时的背景色\n    tableRowHover: 'rgba(0, 0, 0, 0.07)', // 表格行hover时的背景色\n  },\n  dark: {\n    tableRowSelected: 'rgba(255, 255, 255, 0.08)', // 表格行选中时的背景色\n    tableRowHover: 'rgba(255, 255, 255, 0.14)', // 表格行hover时的背景色\n  },\n};\n\nconst StyledTable = styled(Table)`\n  table-layout: fixed;\n  border-top: 1px solid rgba(224, 224, 224, 1);\n  & .sinoui-data-table-head {\n    ${captionTypeStyle};\n    ${dataTableCellStyle};\n    background-color: ${(props) =>\n      props.theme.palette.type === 'light'\n        ? props.theme.palette.primary[50]\n        : props.theme.palette.primary[200]};\n    text-align: left;\n    vertical-align: middle;\n  }\n\n  .sinoui-checkbox-button {\n    margin: 14px;\n  }\n\n  & .sinoui-data-table-head.numeric,\n  .sinoui-data-table-body-td.numeric {\n    text-align: right;\n    flex-direction: row-reverse;\n  }\n\n  & .sinoui-data-table-head.align_center,\n  .sinoui-data-table-body-td.align_center {\n    text-align: center;\n  }\n\n  & .sinoui-data-table-head.checkbox,\n  .sinoui-data-table-body-td.checkbox {\n    padding: 0;\n    width: 48px;\n  }\n\n  & .sinoui-data-table-head.extraInfo,\n  .sinoui-data-table-body-td.extraInfo {\n    padding: 0;\n    width: 60px;\n  }\n\n  & .sinoui-data-table-head:last-child,\n  .sinoui-data-table-body-td:last-child {\n    padding-right: 24px;\n  }\n\n  & .sinoui-data-table-footer {\n    ${captionTypeStyle};\n    ${dataTableCellStyle};\n    padding-left: 24px;\n    padding-right: 12px;\n  }\n\n  & .sinoui-data-table-body-cell-no-data {\n    ${bodyTypeStyle};\n    ${dataTableCellStyle};\n    padding: 64px;\n    text-align: center;\n    color: ${(props) => props.theme.typography.caption.color};\n  }\n\n  & .sinoui-data-table-body-td {\n    ${bodyTypeStyle};\n    ${dataTableCellStyle};\n    text-align: left;\n    vertical-align: middle;\n    word-wrap: break-word;\n    word-break: break-all;\n  }\n\n  & .sinoui-data-table-head-row {\n    height: 48px;\n  }\n\n  & .sinoui-data-table-footer-row,\n  .sinoui-data-table-body-row-no-data {\n    height: 56px;\n    background-color: transparent;\n  }\n\n  & .sinoui-data-table-body-row {\n    height: 48px;\n    background-color: transparent;\n\n    &:hover {\n      background-color: ${(props) =>\n        rowBgColor[props.theme.palette.type].tableRowHover};\n    }\n  }\n\n  & .sinoui-data-table-body-row.selected {\n    background-color: ${(props) =>\n      rowBgColor[props.theme.palette.type].tableRowSelected};\n  }\n`;\n\nexport default StyledTable;\n","import React from 'react';\nimport styled from 'sinoui-components/styles';\n\nconst Wrapper = styled.div`\n  text-align: center;\n  padding: 32px 8px;\n`;\n\n/**\n * 表格空数据时显示的行\n */\nconst EmptyDataTableRow: React.SFC = (props) => {\n  const { children } = props;\n  return (\n    <Wrapper className=\"sinoui-data-table-info\" data-testid=\"emptyInfo\">\n      {children}\n    </Wrapper>\n  );\n};\n\nexport default EmptyDataTableRow;\n","import React from 'react';\nimport { RowType } from './shared/constants';\nimport DataTableRowContext from './shared/DataTableRowContext';\n\nconst context: { type: RowType.ColGroup } = {\n  type: RowType.ColGroup,\n};\n\ninterface Props {\n  children: React.ReactNode;\n}\n\nfunction DataTableColGroup(props: Props) {\n  const { children } = props;\n  return (\n    <DataTableRowContext.Provider value={context}>\n      <colgroup data-testid=\"colgroup\">{children}</colgroup>\n    </DataTableRowContext.Provider>\n  );\n}\n\nexport default DataTableColGroup;\n","import React from 'react';\n\n/**\n * 数据表头\n */\nconst DataTableHead: React.SFC = function TableHead({ children }) {\n  return (\n    <thead>\n      <tr className=\"sinoui-data-table-head-row\" data-testid=\"tableHead\">\n        {children}\n      </tr>\n    </thead>\n  );\n};\n\nexport default DataTableHead;\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React, { useMemo } from 'react';\nimport { RowType } from './shared/constants';\nimport DataTableRowContext, {\n  BodyRowContextType,\n} from './shared/DataTableRowContext';\nimport EditingBodyRowContainer from './shared/EditingBodyRowContainer';\n\ninterface Props<T> {\n  /**\n   * 此行数据\n   */\n  data: T;\n  /**\n   * 数据序号\n   */\n  index: number;\n  /**\n   * 单元格子组件\n   */\n  children: React.ReactNode;\n\n  /**\n   * 是否处于编辑状态\n   */\n  editing?: boolean;\n\n  /**\n   * 行数据错误状态\n   */\n  error?: ErrorResult;\n\n  /**\n   * 单元格编辑器是否被点击过\n   */\n  touched?: TouchedState;\n}\n\ntype CompType<T = any> = React.SFC<Props<T>>;\n\n/**\n * 内容行\n */\nconst DataTableBodyRow: CompType = (props) => {\n  const { data, index, children, editing, error, touched } = props;\n  const context: BodyRowContextType<any> = useMemo(\n    () => ({\n      type: RowType.Body,\n      data,\n      index,\n      editing: !!editing,\n      error,\n      touched,\n    }),\n    [data, index, editing, error, touched],\n  );\n\n  return (\n    <DataTableRowContext.Provider value={context}>\n      <EditingBodyRowContainer.Provider>\n        <tr className=\"sinoui-data-table-body-row\" data-testid=\"bodyRow\">\n          {children}\n        </tr>\n      </EditingBodyRowContainer.Provider>\n    </DataTableRowContext.Provider>\n  );\n};\n\nexport default React.memo(DataTableBodyRow);\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React from 'react';\nimport DataTableBodyRow from './DataTableBodyRow';\n\n/**\n * 数据表格内容组件\n */\nconst DataTableBody: React.SFC<{\n  data?: any[];\n  idPropertyName: string;\n  editingRows?: boolean[];\n  errors?: ErrorResult[];\n  touched?: TouchedState[];\n}> = function DataTableBody({\n  idPropertyName,\n  data,\n  children,\n  editingRows = [],\n  errors,\n  touched,\n}) {\n  if (!data || data.length === 0) {\n    return null;\n  }\n  return (\n    <tbody>\n      {data.map((item, index) => (\n        <DataTableBodyRow\n          key={item[idPropertyName] || `index_${index}`}\n          data={item}\n          index={index}\n          data-testid=\"tableBody\"\n          editing={editingRows[index]}\n          error={errors ? errors[index] : undefined}\n          touched={touched ? touched[index] : undefined}\n        >\n          {children}\n        </DataTableBodyRow>\n      ))}\n    </tbody>\n  );\n};\n\nexport default DataTableBody;\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React, { useMemo, useRef, useEffect } from 'react';\nimport Table from './Table';\nimport EditableDataTableContext from './shared/EditableDataTableContext';\nimport EmptyDataTableRow from './EmptyDataTableRow';\nimport DataTableColGroup from './DataTableColGroup';\nimport DataTableHead from './DataTableHead';\nimport DataTableBody from './DataTableBody';\n\nexport interface Props<T> {\n  /**\n   * 列表数据\n   */\n  data?: T[];\n  /**\n   * 处于编辑状态的行。`editingRows`数组需要与`data`数组保持一一对应的关系，`editingRows`数组中每一个数据项代表的是`data`数组中对应数据项的编辑状态，`true`表示编辑状态，`false`表示非编辑状态。\n   */\n  editingRows?: boolean[];\n\n  /**\n   * 错误状态\n   */\n  errors?: ErrorResult[];\n\n  /**\n   * 单元格是否被点击的状态\n   */\n  touched?: TouchedState[];\n\n  /**\n   * 子节点，一组TableColumn。使用TableColumn指表格列信息。\n   */\n  children: React.ReactNode;\n  /**\n   * 数据的id属性名。默认为'id'。\n   */\n  idPropertyName?: string;\n  /**\n   * 无数据时的提示信息。默认为“暂无数据”。\n   */\n  emptyTitle?: React.ReactNode;\n\n  /**\n   * 监听行数据发生变化的事件。回调函数的`rowData`参数代表的是变更后的行数据对象。\n   */\n  onRowChange?: (index: number, rowData: T) => void;\n\n  /**\n   * 监听单元格值变化事件。回调函数的`rowData`参数代表的是变更后的行数据对象。\n   */\n  onFieldChange?: (index: number, fieldName: string, rowData: T) => void;\n\n  /**\n   * 给正在编辑的行添加校验规则。\n   * \n   * 返回错误提示：\n   * \n   * ```js\n     {\n       'title': '不能为空',\n       'name': '不能少于三个字'\n     }\n   * ```\n   *\n   * 上面的错误信息表示字段`title`和`name`校验失败。\n   * \n   * 如果数据行没有错误，则返回`{}`或者`undefined`。\n   */\n  validate?: (rowData: T) => { [x: string]: string } | undefined;\n}\n\nfunction useEditableDataTable<T>({\n  idPropertyName = 'id',\n  onRowChange,\n  validate,\n  onFieldChange,\n}: Props<T>) {\n  const options = useRef({\n    onRowChange,\n    validate,\n    onFieldChange,\n  });\n\n  useEffect(() => {\n    options.current.onRowChange = onRowChange;\n    options.current.validate = validate;\n    options.current.onFieldChange = onFieldChange;\n  }, [onRowChange, validate, onFieldChange]);\n\n  const context = useMemo(\n    () => ({ idPropertyName, options: options.current }),\n    [idPropertyName],\n  );\n\n  return context;\n}\n\n/**\n * 可编辑表格\n */\nfunction EditableDataTable<T>(props: Props<T>) {\n  const {\n    data = [],\n    idPropertyName = 'id',\n    children,\n    emptyTitle = '暂无数据',\n    editingRows,\n    errors,\n    touched,\n  } = props;\n  const context = useEditableDataTable(props);\n  return (\n    <>\n      <Table>\n        <EditableDataTableContext.Provider value={context}>\n          <DataTableColGroup>{children}</DataTableColGroup>\n          <DataTableHead>{children}</DataTableHead>\n          <DataTableBody\n            data={data}\n            idPropertyName={idPropertyName}\n            editingRows={editingRows}\n            errors={errors}\n            touched={touched}\n          >\n            {children}\n          </DataTableBody>\n        </EditableDataTableContext.Provider>\n      </Table>\n      {(!data || data.length === 0) && (\n        <EmptyDataTableRow>{emptyTitle}</EmptyDataTableRow>\n      )}\n    </>\n  );\n}\n\nexport default EditableDataTable;\n","import React, { useState, useContext, useCallback, useMemo } from 'react';\nimport FormHelpText from 'sinoui-components/Form/FormHelpText';\nimport DataTableRowContext, {\n  BodyRowContextType,\n} from './shared/DataTableRowContext';\nimport EditableDataTableContext from './shared/EditableDataTableContext';\nimport EditingBodyRowContainer from './shared/EditingBodyRowContainer';\n\ninterface Props {\n  editor: React.ReactType;\n  name: string;\n}\n\nfunction isChangeEvent(\n  event?: React.ChangeEvent<HTMLInputElement> | string,\n): event is React.ChangeEvent<HTMLInputElement> {\n  return !!(event && (event as React.ChangeEvent<HTMLInputElement>).target);\n}\n\n/**\n * 单元格编辑器\n */\nfunction DataTableCellEditor(props: Props) {\n  const { name, editor: Editor } = props;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const { data, index } = useContext(DataTableRowContext) as BodyRowContextType<\n    any\n  >;\n  const valueFromContext = data[name] || '';\n  const [, setValue] = useState(valueFromContext);\n  const { options } = useContext(EditableDataTableContext);\n  const {\n    touched,\n    errors,\n    validateField,\n    errorControlled,\n  } = EditingBodyRowContainer.useContainer();\n\n  const handleChange = useCallback(\n    (event?: React.ChangeEvent<HTMLInputElement> | string) => {\n      const newValue = isChangeEvent(event) ? event.target.value : event;\n      setValue(newValue);\n\n      data[name] = newValue;\n\n      if (options.onRowChange) {\n        options.onRowChange(index, data);\n      }\n\n      if (options.onFieldChange) {\n        options.onFieldChange(index, name, data);\n      }\n\n      if (!errorControlled) {\n        validateField(name, data);\n      }\n    },\n    [data, name, options, index, errorControlled, validateField],\n  );\n\n  const isTouched = touched[name];\n  const error = isTouched ? errors[name] : undefined;\n\n  const element = useMemo(\n    () => (\n      <>\n        <Editor\n          name={name}\n          value={valueFromContext}\n          item={data}\n          onChange={handleChange}\n          error={!!error}\n        />\n        {error && <FormHelpText error>{error}</FormHelpText>}\n      </>\n    ),\n    [data, error, handleChange, name, valueFromContext],\n  );\n\n  return element;\n}\n\nexport default React.memo(DataTableCellEditor);\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React, { useContext } from 'react';\nimport EditableDataTableContext from './shared/EditableDataTableContext';\nimport DataTableRowContext, {\n  BodyRowContextType,\n} from './shared/DataTableRowContext';\nimport DataTableCellEditor from './DataTableCellEditor';\nimport EditingBodyRowContainer from './shared/EditingBodyRowContainer';\n\ninterface CellState<T> {\n  data: T;\n  index: number;\n  editing: boolean;\n  errors?: { [x: string]: any };\n  validate: (rowData?: T) => boolean;\n  idPropertyName: string;\n}\n\ninterface DataCellProps<T, CellDataType> {\n  /**\n   * 是否显示序号\n   */\n  order?: boolean;\n  /**\n   * 渲染单元格\n   */\n  render?: (\n    value: CellDataType,\n    row: T,\n    index: number,\n    id: string,\n    context: {\n      editing: boolean;\n      validate: (rowData?: any) => boolean;\n    },\n  ) => React.ReactNode;\n  /**\n   * 数据列名称\n   */\n  name?: string;\n\n  /**\n   * 编辑器\n   */\n  editor?: React.ReactType;\n}\n\nfunction useCellState<T>(): CellState<T> {\n  const { data, index, editing } = useContext(\n    DataTableRowContext,\n  ) as BodyRowContextType<any>;\n  const { validate } = EditingBodyRowContainer.useContainer();\n  const { idPropertyName } = useContext(EditableDataTableContext);\n\n  return {\n    data,\n    index,\n    editing,\n    idPropertyName,\n    validate,\n  };\n}\n\n/**\n * 数据单元格\n */\nfunction DataTableBodyCellInner(\n  props: DataCellProps<any, any> & CellState<any>,\n) {\n  const {\n    order,\n    render,\n    name,\n    editor,\n    index,\n    editing,\n    data,\n    idPropertyName,\n    validate,\n  } = props;\n\n  if (order) {\n    return (\n      <td className=\"sinoui-data-table-body-td align_center\">{index + 1}</td>\n    );\n  }\n\n  if (editing && editor) {\n    if (!name) {\n      throw new Error(`没有给TableColumn指定name属性`);\n    }\n    return (\n      <td className=\"sinoui-data-table-body-td\">\n        <DataTableCellEditor name={name} editor={editor} />\n      </td>\n    );\n  }\n\n  if (render) {\n    return (\n      <td className=\"sinoui-data-table-body-td\">\n        {render(\n          name ? data[name] : undefined,\n          data,\n          index,\n          data[idPropertyName],\n          {\n            editing,\n            validate,\n          },\n        )}\n      </td>\n    );\n  }\n\n  return name ? (\n    <td className=\"sinoui-data-table-body-td\">{data[name]}</td>\n  ) : null;\n}\n\nconst MemoDataTableBodyCellInner = React.memo(DataTableBodyCellInner);\n\nfunction DataTableBodyCell<T = any, CellDataType = string>(\n  props: DataCellProps<T, CellDataType>,\n) {\n  const state = useCellState<any>();\n\n  return <MemoDataTableBodyCellInner {...props} {...state} />;\n}\n\nexport default DataTableBodyCell;\n","import React from 'react';\nimport classNames from 'classnames';\n\ninterface Props {\n  order?: boolean;\n  title?: React.ReactNode;\n}\n\n/**\n * 表格头单元格\n */\nfunction DataTableHeadCell(props: Props) {\n  const { order, title } = props;\n  return (\n    <th\n      className={classNames('sinoui-data-table-head', {\n        // eslint-disable-next-line @typescript-eslint/camelcase\n        align_center: order,\n      })}\n    >\n      {title}\n    </th>\n  );\n}\n\nexport default DataTableHeadCell;\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React, { useContext } from 'react';\nimport DataTableRowContext from './shared/DataTableRowContext';\nimport DataTableBodyCell from './DataTableBodyCell';\nimport DataTableHeadCell from './DataTableHeadCell';\nimport { RowType } from './shared/constants';\n\nexport interface Props<T, CellDataType> {\n  /**\n   * 数据列名称\n   */\n  name?: string;\n  /**\n   * 标题\n   */\n  title?: React.ReactNode;\n\n  /**\n   * 是否显示序号\n   */\n  order?: boolean;\n\n  /**\n   * 渲染单元格\n   */\n  render?: (\n    value: CellDataType,\n    row: T,\n    index: number,\n    id: string,\n    context: {\n      editing: boolean;\n      validate: (rowData?: any) => boolean;\n    },\n  ) => React.ReactNode;\n\n  /**\n   * 列宽度\n   */\n  width?: number | string;\n\n  /**\n   * 编辑器\n   */\n  editor?: React.ReactType;\n}\n\n/**\n * 表格列\n */\nconst TableColumn: React.SFC<Props<any, any>> = React.memo(function TableColumn<\n  T,\n  CellDataType\n>(props: Props<T, CellDataType>) {\n  const { title, order, width } = props;\n  const { type } = useContext(DataTableRowContext);\n\n  switch (type) {\n    case RowType.Head:\n      return <DataTableHeadCell title={title} order={order} />;\n    case RowType.ColGroup:\n      return <col width={order ? 50 : width} />;\n    default:\n      return <DataTableBodyCell {...props} />;\n  }\n});\n\nexport default TableColumn;\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React from 'react';\nimport { RowType } from './constants';\n\nexport interface BodyRowContextType<T> {\n  type: RowType.Body;\n  data: T;\n  index: number;\n  /**\n   * 是否处于编辑状态\n   */\n  editing: boolean;\n\n  /**\n   * 数据行的验证结果\n   */\n  error?: ErrorResult;\n\n  /**\n   * 单元格数据被点击状态\n   */\n  touched?: TouchedState;\n}\n\nexport interface HeadRowContextType {\n  type: RowType.Head;\n}\n\nexport interface ColGroupContextType {\n  type: RowType.ColGroup;\n}\n\nexport type RowContextType<T = any> =\n  | BodyRowContextType<T>\n  | HeadRowContextType\n  | ColGroupContextType;\n\nconst DataTableRowContext = React.createContext<RowContextType>({\n  type: RowType.Head,\n});\n\nexport default DataTableRowContext;\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React from 'react';\n\ninterface ContextType {\n  idPropertyName: string;\n  options: {\n    onRowChange?: (index: number, rowData: any) => void;\n    onFieldChange?: (index: number, fieldName: string, rowData: any) => void;\n    validate?: (rowData: any) => { [x: string]: string } | undefined;\n  };\n}\n\nconst EditableDataTableContext = React.createContext<ContextType>({\n  idPropertyName: 'id',\n  options: {},\n});\n\nexport default EditableDataTableContext;\n","import { useState, useCallback, useRef, useEffect, useContext } from 'react';\nimport { createContainer } from 'unstated-next';\nimport shallowEqual from 'shallowequal';\nimport EditableDataTableContext from './EditableDataTableContext';\nimport DataTableRowContext, { BodyRowContextType } from './DataTableRowContext';\n\ninterface ContextType<T> {\n  /**\n   * 校验错误信息\n   */\n  errors: {\n    [x: string]: string;\n  };\n\n  /**\n   * 表单校验状态是否是受控于外部。（也就是使用者处理数据行校验）\n   */\n  errorControlled: boolean;\n\n  /**\n   * 点击状态\n   */\n  touched: {\n    [x: string]: boolean;\n  };\n\n  /**\n   * 校验数据行\n   *\n   * 如果通过校验，则返回`true`，否则返回`false`。\n   */\n  validate: (newItem?: T) => boolean;\n\n  /**\n   * 校验表单域\n   */\n  validateField: (fieldName: string, newRowData: T) => void;\n}\n\n/**\n * 用于正在编辑的行数据的状态管理hook\n *\n * 主要维护的状态：\n *\n * * 表单校验\n * * 是否点击过的状态\n *\n */\nfunction useEditingBodyRow<T>(): ContextType<T> {\n  const { data: rowData, error: outerError, touched: outTouched } = useContext(\n    DataTableRowContext,\n  ) as BodyRowContextType<T>;\n  const [touched, setTouched] = useState<{ [x: string]: boolean }>({});\n  const [errors, setErrors] = useState({});\n  const rowDataRef = useRef(rowData);\n  const { options, idPropertyName } = useContext(EditableDataTableContext);\n\n  useEffect(() => {\n    rowDataRef.current = rowData;\n  }, [rowData]);\n\n  const updateErrors = useCallback((newErrors: any) => {\n    setErrors((prev) => {\n      if (!shallowEqual(newErrors, prev)) {\n        return newErrors;\n      }\n      return prev;\n    });\n  }, []);\n\n  useEffect(() => {\n    if (!(rowData as any)[idPropertyName] && options.validate) {\n      const newErrors = options.validate(rowData) || {};\n      updateErrors(newErrors);\n    }\n  }, [rowData, options, idPropertyName, updateErrors]);\n\n  const validate = useCallback(\n    (newRowData: T = rowDataRef.current, updateTouched: boolean = true) => {\n      if (options.validate) {\n        const result = options.validate(newRowData);\n        if (result) {\n          if (updateTouched) {\n            const newTouched: { [x: string]: boolean } = {};\n            Object.keys(result).forEach((key) => {\n              newTouched[key] = true;\n            });\n\n            setTouched(newTouched);\n          }\n\n          updateErrors(result || {});\n\n          return (\n            Object.keys(result).filter((key) => !!result[key]).length === 0\n          );\n        }\n      }\n\n      return true;\n    },\n    [options, updateErrors],\n  );\n\n  const validateField = useCallback(\n    (fieldName: string, newRowData: T) => {\n      setTouched((prev) => {\n        if (!prev[fieldName]) {\n          return { ...prev, [fieldName]: true };\n        }\n        return prev;\n      });\n      validate(newRowData, false);\n    },\n    [validate],\n  );\n\n  return {\n    errors: outerError || errors,\n    errorControlled: !!outerError,\n    touched: outTouched || touched,\n    validate,\n    validateField,\n  };\n}\n\nconst EditingBodyRowContainer = createContainer(useEditingBodyRow);\n\nexport default EditingBodyRowContainer;\n","export enum RowType {\n  Body,\n  Head,\n  ColGroup,\n}\n\nexport const EMPTY_ROW_INFO = '暂无数据';\n","import useRestListApi from '@sinoui/use-rest-list-api';\nimport { useState, useEffect, useCallback } from 'react';\nimport { produce } from 'immer';\n\ninterface Options {\n  idPropertyName?: string;\n}\n\n/**\n * 维护可编辑列表的hook\n */\nexport default function useEditingList<T>(\n  url: string,\n  defaultValue: T[] = [],\n  options?: Options,\n) {\n  const { idPropertyName = 'id' } = options || {};\n  const {\n    items,\n    setItems,\n    remove,\n    removeItemAt,\n    update,\n    save,\n    isLoading,\n    addItem,\n  } = useRestListApi<T>(url, defaultValue);\n  const [editingRows, setEditingRows] = useState(() =>\n    defaultValue.map(() => false),\n  );\n\n  const itemsCount = items.length;\n  useEffect(() => {\n    setEditingRows((prev) => {\n      if (itemsCount !== prev.length) {\n        return new Array(itemsCount).fill(false);\n      }\n      return prev;\n    });\n  }, [isLoading, itemsCount]);\n\n  const add = () => {\n    setItems([...items, {}]);\n    setEditingRows([...editingRows, true]);\n  };\n\n  const asyncRemove = useCallback(\n    async (row: T, index: number) => {\n      try {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if ((row as any)[idPropertyName]) {\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          await remove((row as any)[idPropertyName]);\n          setEditingRows(\n            produce(editingRows, (draft) => {\n              draft.splice(index, 1);\n            }),\n          );\n        } else {\n          removeItemAt(index);\n          setEditingRows(\n            produce((draft) => {\n              draft.splice(index, 1);\n            }),\n          );\n        }\n      } catch (error) {\n        throw error;\n      }\n    },\n    [editingRows, idPropertyName, remove, removeItemAt],\n  );\n\n  const asyncUpdate = useCallback(\n    async (row: T, index: number) => {\n      try {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if ((row as any)[idPropertyName]) {\n          await update(row);\n        } else {\n          const result = await save(row, false);\n          removeItemAt(index);\n          addItem(result);\n        }\n\n        setEditingRows(\n          produce(editingRows, (draft) => {\n            draft[index] = false;\n          }),\n        );\n      } catch (error) {\n        throw error;\n      }\n    },\n    [addItem, editingRows, idPropertyName, removeItemAt, save, update],\n  );\n\n  const edit = useCallback((index: number) => {\n    setEditingRows(\n      produce(editingRows, (draft) => {\n        draft[index] = true;\n      }),\n    );\n  }, [editingRows]);\n\n  return {\n    items,\n    editingRows,\n    add,\n    remove: asyncRemove,\n    edit,\n    save: asyncUpdate,\n    idPropertyName,\n  };\n}\n"],"sourceRoot":""}