{"version":3,"sources":["D:/workspaces/editable-data-table/src/Table.tsx","D:/workspaces/editable-data-table/src/EmptyDataTableRow.tsx","D:/workspaces/editable-data-table/src/DataTableColGroup.tsx","D:/workspaces/editable-data-table/src/DataTableHead.tsx","D:/workspaces/editable-data-table/src/DataTableBodyRow.tsx","D:/workspaces/editable-data-table/src/DataTableBody.tsx","D:/workspaces/editable-data-table/src/EditableDataTable.tsx","D:/workspaces/editable-data-table/src/RowSelectColumn.tsx","D:/workspaces/editable-data-table/src/DataTableCellEditor.tsx","D:/workspaces/editable-data-table/src/DataTableBodyCell.tsx","D:/workspaces/editable-data-table/src/DataTableHeadCell.tsx","D:/workspaces/editable-data-table/src/TableColumn.tsx","D:/workspaces/editable-data-table/src/shared/DataTableRowContext.ts","D:/workspaces/editable-data-table/src/shared/EditableDataTableContext.ts","D:/workspaces/editable-data-table/src/shared/EditingBodyRowContainer.ts","D:/workspaces/editable-data-table/src/shared/constants.ts","D:/workspaces/editable-data-table/src/useSimpleEditingList.ts"],"names":["captionTypeStyle","css","_templateObject","props","theme","typography","body1","fontSize","fontFamily","fontWeightMedium","color","bodyTypeStyle","_templateObject2","fontWeight","dataTableCellStyle","_templateObject3","palette","type","rowBgColor","light","tableRowSelected","tableRowHover","dark","StyledTable","styled","Table","_templateObject4","primary","caption","Wrapper","div","EmptyDataTableRow_templateObject","EmptyDataTableRow","children","react_default","a","createElement","className","data-testid","context","RowType","ColGroup","DataTableColGroup","DataTableRowContext","Provider","value","DataTableHead","_ref","React","memo","data","index","editing","error","touched","useMemo","Body","EditingBodyRowContainer","classNames","DataTableBody","idPropertyName","_ref$editingRows","editingRows","errors","rowClassName","length","map","item","src_DataTableBodyRow","key","concat","undefined","EditableDataTable","_props$data","_props$idPropertyName","_props$emptyTitle","emptyTitle","style","_ref$idPropertyName","onRowChange","validate","onFieldChange","options","useRef","useEffect","current","useEditableDataTable","Fragment","src_Table","EditableDataTableContext","src_DataTableColGroup","src_DataTableHead","src_DataTableBody","src_EmptyDataTableRow","react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","sinoui_components_Checkbox__WEBPACK_IMPORTED_MODULE_1__","_TableColumn__WEBPACK_IMPORTED_MODULE_2__","RowSelectColumn","isAllSelected","isContainsSelected","toggleAllSelected","selectedRows","toggleRowSelected","_props$startIndex","startIndex","width","title","checked","indeterminate","onChange","render","_value","_row","indexOf","name","Editor","editor","useContext","valueFromContext","_useState","useState","setValue","Object","slicedToArray","_EditingBodyRowContai","useContainer","validateField","errorControlled","handleChange","useCallback","event","newValue","target","isChangeEvent","FormHelpText","MemoDataTableBodyCellInner","order","Error","src_DataTableCellEditor","DataTableBodyCell","state","assign","DataTableHeadCell","align_center","TableColumn","Head","src_DataTableHeadCell","src_DataTableBodyCell","_constants__WEBPACK_IMPORTED_MODULE_1__","createContext","createContainer","rowData","outerError","outTouched","_useState2","D_workspaces_editable_data_table_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__","setTouched","_useState3","_useState4","setErrors","rowDataRef","_useContext","updateErrors","newErrors","prev","shallowEqual","newRowData","arguments","updateTouched","result","newTouched","keys","forEach","filter","fieldName","D_workspaces_editable_data_table_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__","D_workspaces_editable_data_table_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","d","__webpack_exports__","useSimpleEditingList","defaultItems","D_workspaces_editable_data_table_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","items","setItems","Array","fill","alwaysEditing","setEditingRows","_useState5","_useState6","_useState7","_useState8","_useState9","_useState10","setSelectedRows","optionsRef","edit","rowIndex","produce","draft","setReadonly","replaceItems","newItems","add","addAt","push","splice","removeItems","indexes","removeByIndexes","array","_","remove","isArray","removeByIndex","updateItem","rowErrors","every","Boolean","some","setRowsSelected","rowIndexes","selected","idx","externalSelectedRows","_ref3","validateAllEditingRows","_item","fieldError","fieldTouched","field"],"mappings":"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","file":"static/js/docs-components-api~docs-index~docs-pagination~docs-pagination-show-docs-pagination-show-demo~docs-validate.d92d1a5a.js","sourcesContent":["import styled, { css } from 'sinoui-components/styles';\nimport Table from 'sinoui-components/Table';\n\nconst captionTypeStyle = css`\n  font-size: ${(props) => props.theme.typography.body1.fontSize}rem;\n  font-family: ${(props) => props.theme.typography.fontFamily};\n  font-weight: ${(props) => props.theme.typography.fontWeightMedium};\n  color: ${(props) => props.theme.typography.body1.color};\n`;\n\nconst bodyTypeStyle = css`\n  font-size: ${(props) => props.theme.typography.body1.fontSize}rem;\n  font-family: ${(props) => props.theme.typography.fontFamily};\n  font-weight: ${(props) => props.theme.typography.body1.fontWeight};\n  color: ${(props) => props.theme.typography.body1.color};\n`;\n\nconst dataTableCellStyle = css`\n  padding: 0;\n  padding-left: 8px;\n  padding-right: 8px;\n  border-bottom: 1px solid\n    ${(props) =>\n      props.theme.palette.type === 'light'\n        ? 'rgba(224, 224, 224, 1)'\n        : 'rgba(80, 80, 80, 1)'};\n`;\n\nconst rowBgColor = {\n  light: {\n    tableRowSelected: 'rgba(0, 0, 0, 0.04)', // 表格行选中时的背景色\n    tableRowHover: 'rgba(0, 0, 0, 0.07)', // 表格行hover时的背景色\n  },\n  dark: {\n    tableRowSelected: 'rgba(255, 255, 255, 0.08)', // 表格行选中时的背景色\n    tableRowHover: 'rgba(255, 255, 255, 0.14)', // 表格行hover时的背景色\n  },\n};\n\nconst StyledTable = styled(Table)`\n  table-layout: fixed;\n  border-top: 1px solid rgba(224, 224, 224, 1);\n  & .sinoui-data-table-head {\n    ${captionTypeStyle};\n    ${dataTableCellStyle};\n    background-color: ${(props) =>\n      props.theme.palette.type === 'light'\n        ? props.theme.palette.primary[50]\n        : props.theme.palette.primary[200]};\n    text-align: left;\n    vertical-align: middle;\n  }\n\n  .sinoui-checkbox-button {\n    margin: 14px;\n  }\n\n  & .sinoui-data-table-head.numeric,\n  .sinoui-data-table-body-td.numeric {\n    text-align: right;\n    flex-direction: row-reverse;\n  }\n\n  & .sinoui-data-table-head.align_center,\n  .sinoui-data-table-body-td.align_center {\n    text-align: center;\n  }\n\n  & .sinoui-data-table-head.checkbox,\n  .sinoui-data-table-body-td.checkbox {\n    padding: 0;\n    width: 48px;\n  }\n\n  & .sinoui-data-table-head.extraInfo,\n  .sinoui-data-table-body-td.extraInfo {\n    padding: 0;\n    width: 60px;\n  }\n\n  & .sinoui-data-table-head:last-child,\n  .sinoui-data-table-body-td:last-child {\n    padding-right: 24px;\n  }\n\n  & .sinoui-data-table-footer {\n    ${captionTypeStyle};\n    ${dataTableCellStyle};\n    padding-left: 24px;\n    padding-right: 12px;\n  }\n\n  & .sinoui-data-table-body-cell-no-data {\n    ${bodyTypeStyle};\n    ${dataTableCellStyle};\n    padding: 64px;\n    text-align: center;\n    color: ${(props) => props.theme.typography.caption.color};\n  }\n\n  & .sinoui-data-table-body-td {\n    ${bodyTypeStyle};\n    ${dataTableCellStyle};\n    text-align: left;\n    vertical-align: middle;\n    word-wrap: break-word;\n    word-break: break-all;\n  }\n\n  & .sinoui-data-table-head-row {\n    height: 48px;\n  }\n\n  & .sinoui-data-table-footer-row,\n  .sinoui-data-table-body-row-no-data {\n    height: 56px;\n    background-color: transparent;\n  }\n\n  & .sinoui-data-table-body-row {\n    height: 48px;\n    background-color: transparent;\n\n    &:hover {\n      background-color: ${(props) =>\n        rowBgColor[props.theme.palette.type].tableRowHover};\n    }\n  }\n\n  & .sinoui-data-table-body-row.selected {\n    background-color: ${(props) =>\n      rowBgColor[props.theme.palette.type].tableRowSelected};\n  }\n`;\n\nexport default StyledTable;\n","import React from 'react';\nimport styled from 'sinoui-components/styles';\n\nconst Wrapper = styled.div`\n  text-align: center;\n  padding: 32px 8px;\n`;\n\n/**\n * 表格空数据时显示的行\n */\nconst EmptyDataTableRow: React.SFC = (props) => {\n  const { children } = props;\n  return (\n    <Wrapper className=\"sinoui-data-table-info\" data-testid=\"emptyInfo\">\n      {children}\n    </Wrapper>\n  );\n};\n\nexport default EmptyDataTableRow;\n","import React from 'react';\nimport { RowType } from './shared/constants';\nimport DataTableRowContext from './shared/DataTableRowContext';\n\nconst context: { type: RowType.ColGroup } = {\n  type: RowType.ColGroup,\n};\n\ninterface Props {\n  children: React.ReactNode;\n}\n\nfunction DataTableColGroup(props: Props) {\n  const { children } = props;\n  return (\n    <DataTableRowContext.Provider value={context}>\n      <colgroup data-testid=\"colgroup\">{children}</colgroup>\n    </DataTableRowContext.Provider>\n  );\n}\n\nexport default DataTableColGroup;\n","import React from 'react';\n\n/**\n * 数据表头\n */\nconst DataTableHead: React.SFC = function TableHead({ children }) {\n  return (\n    <thead>\n      <tr className=\"sinoui-data-table-head-row\" data-testid=\"tableHead\">\n        {children}\n      </tr>\n    </thead>\n  );\n};\n\nexport default DataTableHead;\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React, { useMemo } from 'react';\nimport classNames from 'classnames';\nimport { RowType } from './shared/constants';\nimport DataTableRowContext, {\n  BodyRowContextType,\n} from './shared/DataTableRowContext';\nimport EditingBodyRowContainer from './shared/EditingBodyRowContainer';\nimport { ErrorResult, TouchedState } from './types';\n\ninterface Props<T> {\n  /**\n   * 此行数据\n   */\n  data: T;\n  /**\n   * 数据序号\n   */\n  index: number;\n  /**\n   * 单元格子组件\n   */\n  children: React.ReactNode;\n\n  /**\n   * 是否处于编辑状态\n   */\n  editing?: boolean;\n\n  /**\n   * 行数据错误状态\n   */\n  error?: ErrorResult;\n\n  /**\n   * 单元格编辑器是否被点击过\n   */\n  touched?: TouchedState;\n  /**\n   * 样式类名称\n   */\n  className?: string;\n}\n\ntype CompType<T = any> = React.SFC<Props<T>>;\n\n/**\n * 内容行\n */\nconst DataTableBodyRow: CompType = (props) => {\n  const { data, index, children, editing, error, touched, className } = props;\n  const context: BodyRowContextType<any> = useMemo(\n    () => ({\n      type: RowType.Body,\n      data,\n      index,\n      editing: !!editing,\n      error,\n      touched,\n    }),\n    [data, index, editing, error, touched],\n  );\n\n  return (\n    <DataTableRowContext.Provider value={context}>\n      <EditingBodyRowContainer.Provider>\n        <tr\n          className={classNames('sinoui-data-table-body-row', className)}\n          data-testid=\"bodyRow\"\n        >\n          {children}\n        </tr>\n      </EditingBodyRowContainer.Provider>\n    </DataTableRowContext.Provider>\n  );\n};\n\nexport default React.memo(DataTableBodyRow);\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React from 'react';\nimport DataTableBodyRow from './DataTableBodyRow';\nimport { ErrorResult, TouchedState } from './types';\n\n/**\n * 数据表格内容组件\n */\nconst DataTableBody: React.SFC<{\n  data?: any[];\n  idPropertyName: string;\n  editingRows?: boolean[];\n  errors?: ErrorResult[];\n  touched?: TouchedState[];\n  rowClassName?: (index: number) => string | undefined;\n}> = function DataTableBody({\n  idPropertyName,\n  data,\n  children,\n  editingRows = [],\n  errors,\n  touched,\n  rowClassName,\n}) {\n  if (!data || data.length === 0) {\n    return null;\n  }\n  return (\n    <tbody>\n      {data.map((item, index) => (\n        <DataTableBodyRow\n          key={item[idPropertyName] || `index_${index}`}\n          data={item}\n          index={index}\n          data-testid=\"tableBody\"\n          editing={editingRows[index]}\n          error={errors ? errors[index] : undefined}\n          touched={touched ? touched[index] : undefined}\n          className={rowClassName && rowClassName(index)}\n        >\n          {children}\n        </DataTableBodyRow>\n      ))}\n    </tbody>\n  );\n};\n\nexport default DataTableBody;\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React, { useMemo, useRef, useEffect } from 'react';\nimport classNames from 'classnames';\nimport Table from './Table';\nimport EditableDataTableContext from './shared/EditableDataTableContext';\nimport EmptyDataTableRow from './EmptyDataTableRow';\nimport DataTableColGroup from './DataTableColGroup';\nimport DataTableHead from './DataTableHead';\nimport DataTableBody from './DataTableBody';\nimport { ErrorResult, TouchedState } from './types';\n\nexport interface Props<T> {\n  /**\n   * 列表数据\n   */\n  data?: T[];\n  /**\n   * 处于编辑状态的行。`editingRows`数组需要与`data`数组保持一一对应的关系，`editingRows`数组中每一个数据项代表的是`data`数组中对应数据项的编辑状态，`true`表示编辑状态，`false`表示非编辑状态。\n   */\n  editingRows?: boolean[];\n\n  /**\n   * 给table元素添加className\n   */\n  className?: string;\n\n  /**\n   * 给table元素添加样式\n   */\n  style?: React.CSSProperties;\n\n  /**\n   * 错误状态\n   */\n  errors?: ErrorResult[];\n\n  /**\n   * 单元格是否被点击的状态\n   */\n  touched?: TouchedState[];\n\n  /**\n   * 子节点，一组TableColumn。使用TableColumn指表格列信息。\n   */\n  children: React.ReactNode;\n  /**\n   * 数据的id属性名。默认为'id'。\n   */\n  idPropertyName?: string;\n  /**\n   * 无数据时的提示信息。默认为“暂无数据”。\n   */\n  emptyTitle?: React.ReactNode;\n\n  /**\n   * 监听行数据发生变化的事件。回调函数的`rowData`参数代表的是变更后的行数据对象。\n   */\n  onRowChange?: (index: number, rowData: T) => void;\n\n  /**\n   * 监听单元格值变化事件。回调函数的`rowData`参数代表的是变更后的行数据对象。\n   */\n  onFieldChange?: (index: number, fieldName: string, rowData: T) => void;\n\n  /**\n   * 给正在编辑的行添加校验规则。\n   * \n   * 返回错误提示：\n   * \n   * ```js\n     {\n       'title': '不能为空',\n       'name': '不能少于三个字'\n     }\n   * ```\n   *\n   * 上面的错误信息表示字段`title`和`name`校验失败。\n   * \n   * 如果数据行没有错误，则返回`{}`或者`undefined`。\n   */\n  validate?: (rowData: T) => { [x: string]: string } | undefined;\n  /**\n   * 定制数据行样式的函数。\n   */\n  rowClassName?: (index: number) => string | undefined;\n}\n\nfunction useEditableDataTable<T>({\n  idPropertyName = 'id',\n  onRowChange,\n  validate,\n  onFieldChange,\n}: Props<T>) {\n  const options = useRef({\n    onRowChange,\n    validate,\n    onFieldChange,\n  });\n\n  useEffect(() => {\n    options.current.onRowChange = onRowChange;\n    options.current.validate = validate;\n    options.current.onFieldChange = onFieldChange;\n  }, [onRowChange, validate, onFieldChange]);\n\n  const context = useMemo(\n    () => ({ idPropertyName, options: options.current }),\n    [idPropertyName],\n  );\n\n  return context;\n}\n\n/**\n * 可编辑表格\n */\nfunction EditableDataTable<T>(props: Props<T>) {\n  const {\n    data = [],\n    idPropertyName = 'id',\n    children,\n    emptyTitle = '暂无数据',\n    editingRows,\n    errors,\n    touched,\n    className,\n    style,\n    rowClassName,\n  } = props;\n  const context = useEditableDataTable(props);\n  return (\n    <>\n      <Table\n        className={classNames('sinoui-editable-data-table', className)}\n        style={style}\n      >\n        <EditableDataTableContext.Provider value={context}>\n          <DataTableColGroup>{children}</DataTableColGroup>\n          <DataTableHead>{children}</DataTableHead>\n          <DataTableBody\n            data={data}\n            idPropertyName={idPropertyName}\n            editingRows={editingRows}\n            errors={errors}\n            touched={touched}\n            rowClassName={rowClassName}\n          >\n            {children}\n          </DataTableBody>\n        </EditableDataTableContext.Provider>\n      </Table>\n      {(!data || data.length === 0) && (\n        <EmptyDataTableRow>{emptyTitle}</EmptyDataTableRow>\n      )}\n    </>\n  );\n}\n\nexport default EditableDataTable;\n","import React from 'react';\nimport Checkbox from 'sinoui-components/Checkbox';\nimport TableColumn from './TableColumn';\n\nexport interface Props {\n  /**\n   * 选中行\n   */\n  selectedRows: number[];\n  /**\n   * 是否全选\n   */\n  isAllSelected: boolean;\n  /**\n   * 是否选中部分\n   */\n  isContainsSelected: boolean;\n  /**\n   * 全选时的回调函数\n   */\n  toggleAllSelected: () => void;\n  /**\n   * 选中一行时的回调函数\n   */\n  toggleRowSelected: (index: number) => void;\n  /**\n   * 开始的索引。默认从0开始。在分页展示数据时，此属性非常有用。\n   */\n  startIndex?: number;\n}\n\n/**\n * 选择行的列\n */\nfunction RowSelectColumn(props: Props) {\n  const {\n    isAllSelected,\n    isContainsSelected,\n    toggleAllSelected,\n    selectedRows,\n    toggleRowSelected,\n    startIndex = 0,\n  } = props;\n\n  return (\n    <TableColumn\n      width={50}\n      title={\n        <Checkbox\n          checked={isAllSelected}\n          indeterminate={!isAllSelected && isContainsSelected}\n          onChange={toggleAllSelected}\n        />\n      }\n      render={(_value, _row, index) => (\n        <Checkbox\n          checked={selectedRows.indexOf(index + startIndex) !== -1}\n          onChange={() => toggleRowSelected(index + startIndex)}\n        />\n      )}\n    />\n  );\n}\n\nexport default RowSelectColumn;\n","import React, { useState, useContext, useCallback, useMemo } from 'react';\nimport FormHelpText from 'sinoui-components/Form/FormHelpText';\nimport DataTableRowContext, {\n  BodyRowContextType,\n} from './shared/DataTableRowContext';\nimport EditableDataTableContext from './shared/EditableDataTableContext';\nimport EditingBodyRowContainer from './shared/EditingBodyRowContainer';\n\ninterface Props {\n  editor: React.ReactType;\n  name: string;\n}\n\nfunction isChangeEvent(\n  event?: React.ChangeEvent<HTMLInputElement> | string,\n): event is React.ChangeEvent<HTMLInputElement> {\n  return !!(event && (event as React.ChangeEvent<HTMLInputElement>).target);\n}\n\n/**\n * 单元格编辑器\n */\nfunction DataTableCellEditor(props: Props) {\n  const { name, editor: Editor } = props;\n  const { data, index } = useContext(DataTableRowContext) as BodyRowContextType<\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    any\n  >;\n  const valueFromContext = data[name] || '';\n  const [, setValue] = useState(valueFromContext);\n  const { options } = useContext(EditableDataTableContext);\n  const {\n    touched,\n    errors,\n    validateField,\n    errorControlled,\n  } = EditingBodyRowContainer.useContainer();\n\n  const handleChange = useCallback(\n    (event?: React.ChangeEvent<HTMLInputElement> | string) => {\n      const newValue = isChangeEvent(event) ? event.target.value : event;\n      setValue(newValue);\n\n      data[name] = newValue;\n\n      if (options.onRowChange) {\n        options.onRowChange(index, data);\n      }\n\n      if (options.onFieldChange) {\n        options.onFieldChange(index, name, data);\n      }\n\n      if (!errorControlled) {\n        validateField(name, data);\n      }\n    },\n    [data, name, options, index, errorControlled, validateField],\n  );\n\n  const isTouched = touched[name];\n  const error = isTouched ? errors[name] : undefined;\n\n  const element = useMemo(\n    () => (\n      <>\n        <Editor\n          name={name}\n          value={valueFromContext}\n          item={data}\n          onChange={handleChange}\n          error={!!error}\n        />\n        {error && (\n          <FormHelpText\n            error\n            className=\"sinoui-editable-data-table-editor-error\"\n          >\n            {error}\n          </FormHelpText>\n        )}\n      </>\n    ),\n    [data, error, handleChange, name, valueFromContext],\n  );\n\n  return element;\n}\n\nexport default React.memo(DataTableCellEditor);\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React, { useContext } from 'react';\nimport EditableDataTableContext from './shared/EditableDataTableContext';\nimport DataTableRowContext, {\n  BodyRowContextType,\n} from './shared/DataTableRowContext';\nimport DataTableCellEditor from './DataTableCellEditor';\nimport EditingBodyRowContainer from './shared/EditingBodyRowContainer';\n\ninterface CellState<T> {\n  data: T;\n  index: number;\n  editing: boolean;\n  errors?: { [x: string]: any };\n  validate: (rowData?: T) => boolean;\n  idPropertyName: string;\n}\n\ninterface DataCellProps<T, CellDataType> {\n  /**\n   * 是否显示序号\n   */\n  order?: boolean;\n  /**\n   * 渲染单元格\n   */\n  render?: (\n    value: CellDataType,\n    row: T,\n    index: number,\n    id: string,\n    context: {\n      editing: boolean;\n      validate: (rowData?: any) => boolean;\n    },\n  ) => React.ReactNode;\n  /**\n   * 数据列名称\n   */\n  name?: string;\n\n  /**\n   * 编辑器\n   */\n  editor?: React.ReactType;\n}\n\nfunction useCellState<T>(): CellState<T> {\n  const { data, index, editing } = useContext(\n    DataTableRowContext,\n  ) as BodyRowContextType<any>;\n  const { validate } = EditingBodyRowContainer.useContainer();\n  const { idPropertyName } = useContext(EditableDataTableContext);\n\n  return {\n    data,\n    index,\n    editing,\n    idPropertyName,\n    validate,\n  };\n}\n\n/**\n * 数据单元格\n */\nfunction DataTableBodyCellInner(\n  props: DataCellProps<any, any> & CellState<any>,\n) {\n  const {\n    order,\n    render,\n    name,\n    editor,\n    index,\n    editing,\n    data,\n    idPropertyName,\n    validate,\n  } = props;\n\n  if (order) {\n    return (\n      <td className=\"sinoui-data-table-body-td align_center\">{index + 1}</td>\n    );\n  }\n\n  if (editing && editor) {\n    if (!name) {\n      throw new Error(`没有给TableColumn指定name属性`);\n    }\n    return (\n      <td className=\"sinoui-data-table-body-td\">\n        <DataTableCellEditor name={name} editor={editor} />\n      </td>\n    );\n  }\n\n  if (render) {\n    return (\n      <td className=\"sinoui-data-table-body-td\">\n        {render(\n          name ? data[name] : undefined,\n          data,\n          index,\n          data[idPropertyName],\n          {\n            editing,\n            validate,\n          },\n        )}\n      </td>\n    );\n  }\n\n  return name ? (\n    <td className=\"sinoui-data-table-body-td\">{data[name]}</td>\n  ) : null;\n}\n\nconst MemoDataTableBodyCellInner = React.memo(DataTableBodyCellInner);\n\nfunction DataTableBodyCell<T = any, CellDataType = string>(\n  props: DataCellProps<T, CellDataType>,\n) {\n  const state = useCellState<any>();\n\n  return <MemoDataTableBodyCellInner {...props} {...state} />;\n}\n\nexport default DataTableBodyCell;\n","import React from 'react';\nimport classNames from 'classnames';\n\ninterface Props {\n  order?: boolean;\n  title?: React.ReactNode;\n}\n\n/**\n * 表格头单元格\n */\nfunction DataTableHeadCell(props: Props) {\n  const { order, title } = props;\n  return (\n    <th\n      className={classNames('sinoui-data-table-head', {\n        // eslint-disable-next-line @typescript-eslint/camelcase\n        align_center: order,\n      })}\n    >\n      {title}\n    </th>\n  );\n}\n\nexport default DataTableHeadCell;\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React, { useContext } from 'react';\nimport DataTableRowContext from './shared/DataTableRowContext';\nimport DataTableBodyCell from './DataTableBodyCell';\nimport DataTableHeadCell from './DataTableHeadCell';\nimport { RowType } from './shared/constants';\n\nexport interface Props<T, CellDataType> {\n  /**\n   * 数据列名称\n   */\n  name?: string;\n  /**\n   * 标题\n   */\n  title?: React.ReactNode;\n\n  /**\n   * 是否显示序号\n   */\n  order?: boolean;\n\n  /**\n   * 渲染单元格\n   */\n  render?: (\n    value: CellDataType,\n    row: T,\n    index: number,\n    id: string,\n    context: {\n      editing: boolean;\n      validate: (rowData?: any) => boolean;\n    },\n  ) => React.ReactNode;\n\n  /**\n   * 列宽度\n   */\n  width?: number | string;\n\n  /**\n   * 编辑器\n   */\n  editor?: React.ReactType;\n}\n\n/**\n * 表格列\n */\nconst TableColumn: React.SFC<Props<any, any>> = React.memo(function TableColumn<\n  T,\n  CellDataType\n>(props: Props<T, CellDataType>) {\n  const { title, order, width } = props;\n  const { type } = useContext(DataTableRowContext);\n\n  switch (type) {\n    case RowType.Head:\n      return <DataTableHeadCell title={title} order={order} />;\n    case RowType.ColGroup:\n      return <col width={order ? 50 : width} />;\n    default:\n      return <DataTableBodyCell {...props} />;\n  }\n});\n\nexport default TableColumn;\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React from 'react';\nimport { RowType } from './constants';\nimport { ErrorResult, TouchedState } from '../types';\n\nexport interface BodyRowContextType<T> {\n  type: RowType.Body;\n  data: T;\n  index: number;\n  /**\n   * 是否处于编辑状态\n   */\n  editing: boolean;\n\n  /**\n   * 数据行的验证结果\n   */\n  error?: ErrorResult;\n\n  /**\n   * 单元格数据被点击状态\n   */\n  touched?: TouchedState;\n}\n\nexport interface HeadRowContextType {\n  type: RowType.Head;\n}\n\nexport interface ColGroupContextType {\n  type: RowType.ColGroup;\n}\n\nexport type RowContextType<T = any> =\n  | BodyRowContextType<T>\n  | HeadRowContextType\n  | ColGroupContextType;\n\nconst DataTableRowContext = React.createContext<RowContextType>({\n  type: RowType.Head,\n});\n\nexport default DataTableRowContext;\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React from 'react';\n\ninterface ContextType {\n  idPropertyName: string;\n  options: {\n    onRowChange?: (index: number, rowData: any) => void;\n    onFieldChange?: (index: number, fieldName: string, rowData: any) => void;\n    validate?: (rowData: any) => { [x: string]: string } | undefined;\n  };\n}\n\nconst EditableDataTableContext = React.createContext<ContextType>({\n  idPropertyName: 'id',\n  options: {},\n});\n\nexport default EditableDataTableContext;\n","import { useState, useCallback, useRef, useEffect, useContext } from 'react';\nimport { createContainer } from 'unstated-next';\nimport shallowEqual from 'shallowequal';\nimport EditableDataTableContext from './EditableDataTableContext';\nimport DataTableRowContext, { BodyRowContextType } from './DataTableRowContext';\n\ninterface ContextType<T> {\n  /**\n   * 校验错误信息\n   */\n  errors: {\n    [x: string]: string;\n  };\n\n  /**\n   * 表单校验状态是否是受控于外部。（也就是使用者处理数据行校验）\n   */\n  errorControlled: boolean;\n\n  /**\n   * 点击状态\n   */\n  touched: {\n    [x: string]: boolean;\n  };\n\n  /**\n   * 校验数据行\n   *\n   * 如果通过校验，则返回`true`，否则返回`false`。\n   */\n  validate: (newItem?: T) => boolean;\n\n  /**\n   * 校验表单域\n   */\n  validateField: (fieldName: string, newRowData: T) => void;\n}\n\n/**\n * 用于正在编辑的行数据的状态管理hook\n *\n * 主要维护的状态：\n *\n * * 表单校验\n * * 是否点击过的状态\n *\n */\nfunction useEditingBodyRow<T>(): ContextType<T> {\n  const { data: rowData, error: outerError, touched: outTouched } = useContext(\n    DataTableRowContext,\n  ) as BodyRowContextType<T>;\n  const [touched, setTouched] = useState<{ [x: string]: boolean }>({});\n  const [errors, setErrors] = useState({});\n  const rowDataRef = useRef(rowData);\n  const { options, idPropertyName } = useContext(EditableDataTableContext);\n\n  useEffect(() => {\n    rowDataRef.current = rowData;\n  }, [rowData]);\n\n  const updateErrors = useCallback((newErrors: any) => {\n    setErrors((prev) => {\n      if (!shallowEqual(newErrors, prev)) {\n        return newErrors;\n      }\n      return prev;\n    });\n  }, []);\n\n  useEffect(() => {\n    if (!(rowData as any)[idPropertyName] && options.validate) {\n      const newErrors = options.validate(rowData) || {};\n      updateErrors(newErrors);\n    }\n  }, [rowData, options, idPropertyName, updateErrors]);\n\n  const validate = useCallback(\n    (newRowData: T = rowDataRef.current, updateTouched: boolean = true) => {\n      if (options.validate) {\n        const result = options.validate(newRowData);\n        if (result) {\n          if (updateTouched) {\n            const newTouched: { [x: string]: boolean } = {};\n            Object.keys(result).forEach((key) => {\n              newTouched[key] = true;\n            });\n\n            setTouched(newTouched);\n          }\n\n          updateErrors(result || {});\n\n          return (\n            Object.keys(result).filter((key) => !!result[key]).length === 0\n          );\n        }\n      }\n\n      return true;\n    },\n    [options, updateErrors],\n  );\n\n  const validateField = useCallback(\n    (fieldName: string, newRowData: T) => {\n      setTouched((prev) => {\n        if (!prev[fieldName]) {\n          return { ...prev, [fieldName]: true };\n        }\n        return prev;\n      });\n      validate(newRowData, false);\n    },\n    [validate],\n  );\n\n  return {\n    errors: outerError || errors,\n    errorControlled: !!outerError,\n    touched: outTouched || touched,\n    validate,\n    validateField,\n  };\n}\n\nconst EditingBodyRowContainer = createContainer(useEditingBodyRow);\n\nexport default EditingBodyRowContainer;\n","export enum RowType {\n  Body,\n  Head,\n  ColGroup,\n}\n\nexport const EMPTY_ROW_INFO = '暂无数据';\n","import { useRef, useEffect, useState, useCallback, useMemo } from 'react';\nimport { produce } from 'immer';\nimport shallowEqual from 'shallowequal';\nimport { ErrorResult, SimpleEditingListResult, TouchedState } from './types';\n\nexport interface SimpleEditingListOptions<T> {\n  /**\n   * 单元格表单域是否一直处于编辑状态。\n   */\n  alwaysEditing?: boolean;\n\n  /**\n   * 验证行数据的函数\n   */\n  validate?: (item: T) => ErrorResult | undefined;\n}\n\n/**\n * 可编辑列表外置状态管理hook\n *\n * 支持：\n *\n * * 列表数据管理\n * * 可编辑状态维护\n * * 单元格编辑器校验\n * * 行选择状态\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction useSimpleEditingList<T = any>(\n  defaultItems: T[] = [],\n  options: SimpleEditingListOptions<T> = {},\n): SimpleEditingListResult<T> {\n  const [items, setItems] = useState<T[]>(defaultItems);\n  const [editingRows, setEditingRows] = useState<boolean[]>(() =>\n    new Array(defaultItems.length).fill(!!options.alwaysEditing),\n  );\n  const [errors, setErrors] = useState<ErrorResult[]>(() =>\n    new Array(defaultItems.length).fill({}),\n  );\n  const [touched, setTouched] = useState<TouchedState[]>(() =>\n    new Array(defaultItems.length).fill({}),\n  );\n  const [selectedRows, setSelectedRows] = useState<boolean[]>(() =>\n    new Array(defaultItems.length).fill(false),\n  );\n\n  const optionsRef = useRef(options);\n\n  useEffect(() => {\n    optionsRef.current = options;\n  }, [options]);\n\n  /**\n   * 编辑\n   */\n  const edit = useCallback((rowIndex: number) => {\n    setEditingRows(\n      produce((draft) => {\n        draft[rowIndex] = true;\n      }),\n    );\n  }, []);\n\n  /**\n   * 设置为只读状态\n   */\n  const setReadonly = useCallback((rowIndex: number) => {\n    setEditingRows(\n      produce((draft) => {\n        draft[rowIndex] = false;\n      }),\n    );\n  }, []);\n\n  /**\n   * 更换items\n   *\n   * @param {T[]} newItems 新的items\n   */\n  const replaceItems = useCallback((newItems: T[]) => {\n    setItems(newItems);\n    setEditingRows(\n      new Array(newItems.length).fill(!!optionsRef.current.alwaysEditing),\n    );\n\n    setErrors(new Array(newItems.length).fill({}));\n    setTouched(new Array(newItems.length).fill({}));\n    setSelectedRows(new Array(newItems.length).fill(false));\n  }, []);\n\n  /**\n   * 新增一条数据\n   */\n  const add = useCallback((item: Partial<T> = {}, index: number = -1) => {\n    const addAt = produce(<V>(draft: V[], value: V) => {\n      if (index === -1 || index >= draft.length) {\n        draft.push(value);\n      } else {\n        draft.splice(index, 0, value);\n      }\n    });\n    setItems((prev) => addAt(prev, item));\n\n    setEditingRows((prev) => addAt(prev, true));\n\n    setErrors((prev) => addAt(prev, {}));\n\n    setTouched((prev) => addAt(prev, {}));\n\n    setSelectedRows((prev) => addAt(prev, false));\n  }, []);\n\n  /**\n   * 删除一组数据\n   */\n  const removeItems = useCallback((indexes: number[]) => {\n    const removeByIndexes = <T>(array: T[]) =>\n      array.filter((_, index) => indexes.indexOf(index) === -1);\n    setItems(removeByIndexes);\n    setEditingRows(removeByIndexes);\n    setErrors(removeByIndexes);\n    setTouched(removeByIndexes);\n    setSelectedRows(removeByIndexes);\n  }, []);\n\n  /**\n   * 删除数据\n   */\n  const remove = useCallback(\n    (index: number | number[]) => {\n      if (Array.isArray(index)) {\n        removeItems(index);\n      } else {\n        const removeByIndex = produce((draft) => {\n          draft.splice(index, 1);\n        });\n\n        setItems(removeByIndex);\n        setEditingRows(removeByIndex);\n        setErrors(removeByIndex);\n        setTouched(removeByIndex);\n        setSelectedRows(removeByIndex);\n      }\n    },\n    [removeItems],\n  );\n\n  /**\n   * 更新数据项\n   */\n  const updateItem = useCallback((index: number, item: T) => {\n    setItems(\n      produce((draft) => {\n        draft[index] = item;\n      }),\n    );\n  }, []);\n\n  /**\n   * 验证一个单元格的值\n   *\n   * @param index 单元格所在数据行索引位置\n   * @param fieldName 单元格对应的字段名称\n   * @param rowData 单元格所在行的数据对象\n   */\n  const validateField = useCallback(\n    (index: number, fieldName: string, rowData: T) => {\n      const { validate } = optionsRef.current;\n\n      if (validate) {\n        const rowErrors = validate(rowData) || {};\n\n        setErrors(\n          produce((draft) => {\n            if (!shallowEqual(draft[index], rowErrors)) {\n              draft[index] = rowErrors;\n            }\n          }),\n        );\n\n        setTouched(\n          produce((draft) => {\n            draft[index][fieldName] = true;\n          }),\n        );\n      }\n    },\n    [],\n  );\n\n  /**\n   * 校验列表中正在编辑的数据\n   */\n  const validateAllEditingRows = () => {\n    const { validate } = optionsRef.current;\n\n    if (!validate) {\n      return true;\n    }\n\n    const updateErrors = produce((draft: ErrorResult[]) => {\n      items\n        .map((item, index) => {\n          if (!editingRows[index]) {\n            return {};\n          }\n          return validate(item) || {};\n        })\n        .forEach((error, index) => {\n          if (!shallowEqual(draft[index], error)) {\n            draft[index] = error;\n          }\n        });\n    });\n\n    const newErrors = updateErrors(errors);\n    setErrors(newErrors);\n    setTouched(\n      produce((draft) => {\n        items.forEach((_item, index) => {\n          if (!editingRows[index]) {\n            return;\n          }\n\n          const fieldError = newErrors[index];\n          const fieldTouched: TouchedState = {};\n\n          Object.keys(fieldError).forEach((field) => {\n            fieldTouched[field] = true;\n          });\n\n          draft[index] = fieldTouched;\n        });\n      }),\n    );\n\n    return (\n      newErrors &&\n      newErrors.every(\n        (error) =>\n          Object.keys(error).filter((key) => !!error[key]).length === 0,\n      )\n    );\n  };\n\n  /**\n   * 是否所有的数据行都是选中的\n   */\n  const isAllSelected = selectedRows.length > 0 && selectedRows.every(Boolean);\n  /**\n   * 是否包含选中的数据行\n   */\n  const isContainsSelected =\n    selectedRows.length > 0 && selectedRows.some(Boolean);\n\n  /**\n   * 切换全部选中状态\n   */\n  const toggleAllSelected = useCallback(() => {\n    setSelectedRows(new Array(items.length).fill(!isAllSelected));\n  }, [items.length, isAllSelected]);\n\n  /**\n   * 切换行的选中状态\n   *\n   * @param index 数据行所在索引位置\n   */\n  const toggleRowSelected = useCallback((index: number) => {\n    setSelectedRows(\n      produce((draft) => {\n        draft[index] = !draft[index];\n      }),\n    );\n  }, []);\n\n  const setRowsSelected = useCallback(\n    (rowIndexes: number[], selected: boolean) => {\n      setSelectedRows(\n        produce((draft) => {\n          rowIndexes.forEach((idx) => {\n            draft[idx] = selected;\n          });\n        }),\n      );\n    },\n    [setSelectedRows],\n  );\n\n  const externalSelectedRows = useMemo(\n    () =>\n      selectedRows\n        .map((selected, index) => [selected, index] as [boolean, number])\n        .filter(([selected]) => !!selected)\n        .map(([, index]) => index),\n    [selectedRows],\n  );\n\n  return {\n    items,\n    setItems: replaceItems,\n    editingRows,\n    edit,\n    setReadonly,\n    add,\n    remove,\n    updateItem,\n    errors,\n    touched,\n    validateField,\n    validateAllEditingRows,\n    selectedRows: externalSelectedRows,\n    isAllSelected,\n    isContainsSelected,\n    toggleAllSelected,\n    toggleRowSelected,\n    setSelectedRows,\n    setRowsSelected,\n  };\n}\n\nexport default useSimpleEditingList;\n"],"sourceRoot":""}