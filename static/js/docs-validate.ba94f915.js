(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"./docs/validate.mdx":function(e,t,n){"use strict";n.r(t);var a=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),r=n("./node_modules/react/index.js"),i=n.n(r),o=n("./node_modules/@mdx-js/react/dist/index.es.js"),l=n("./node_modules/docz/dist/index.esm.js"),d=n("./src/EditableDataTable.tsx"),s=n("./src/TableColumn.tsx"),c=n("./src/shared/EditorProps.ts"),u=n.n(c),b=n("./src/useEditingList.ts"),m=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),f=n("./node_modules/immer/dist/immer.module.js"),p=n("./node_modules/shallowequal/index.js"),y=n.n(p);function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(r.useState)(e),a=Object(m.a)(n,2),i=a[0],o=a[1],l=Object(r.useState)(function(){return new Array(e.length).fill(!!t.alwaysEditing)}),d=Object(m.a)(l,2),s=d[0],c=d[1],u=Object(r.useState)(function(){return new Array(e.length).fill({})}),b=Object(m.a)(u,2),p=b[0],j=b[1],g=Object(r.useState)(function(){return new Array(e.length).fill({})}),O=Object(m.a)(g,2),v=O[0],x=O[1],h=Object(r.useRef)(t);Object(r.useEffect)(function(){h.current=t},[t]);var C=Object(r.useCallback)(function(e){c(Object(f.produce)(function(t){t[e]=!0}))},[]),E=Object(r.useCallback)(function(e){c(Object(f.produce)(function(t){t[e]=!1}))},[]),w=Object(r.useCallback)(function(e){o(e),c(new Array(e.length).fill(!!h.current.alwaysEditing)),j(new Array(e.length).fill({})),x(new Array(e.length).fill({}))},[]),_=Object(r.useCallback)(function(e){o(Object(f.produce)(function(t){t.push(e)})),c(Object(f.produce)(function(e){e.push(!0)})),j(Object(f.produce)(function(e){e.push({})})),x(Object(f.produce)(function(e){e.push({})}))},[]),T=Object(r.useCallback)(function(e){var t=Object(f.produce)(function(t){t.splice(e,1)});o(t),c(t),j(t),x(t)},[]),P=Object(r.useCallback)(function(e){var t=function(t){return t.filter(function(t,n){return-1===e.indexOf(n)})};o(t),c(t),j(t),x(t)},[]),R=Object(r.useCallback)(function(e,t){o(Object(f.produce)(function(n){n[e]=t}))},[]),D=Object(r.useCallback)(function(e,t,n){var a=h.current.validate;if(a){var r=a(n)||{};j(Object(f.produce)(function(t){y()(t[e],r)||(t[e]=r)})),x(Object(f.produce)(function(n){n[e][t]=!0}))}},[]);return{items:i,setItems:w,editingRows:s,edit:C,setReadonly:E,add:_,remove:T,removeItems:P,updateItem:R,errors:p,touched:v,validateField:D,validateAllEditingRows:function(){var e=h.current.validate;if(!e)return!0;var t=Object(f.produce)(function(t){i.map(function(t,n){return s[n]&&e(t)||{}}).forEach(function(e,n){y()(t[n],e)||(t[n]=e)})})(p);return j(t),x(Object(f.produce)(function(e){i.forEach(function(n,a){if(s[a]){var r=t[a],i={};Object.keys(r).forEach(function(e){i[e]=!0}),e[a]=i}})})),t&&t.every(function(e){return 0===Object.keys(e).filter(function(t){return!!e[t]}).length})}}}var g=j;j&&j===Object(j)&&Object.isExtensible(j)&&Object.defineProperty(j,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"useSimpleEditingList",filename:"src/useSimpleEditingList.ts"}});var O=d.b;"undefined"!==typeof d.b&&d.b&&d.b===Object(d.b)&&Object.isExtensible(d.b)&&Object.defineProperty(d.b,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"EditableDataTable",filename:"src/index.ts"}}),"undefined"!==typeof g&&g&&g===Object(g)&&Object.isExtensible(g)&&Object.defineProperty(g,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"useSimpleEditingList",filename:"src/index.ts"}}),"undefined"!==typeof b.a&&b.a&&b.a===Object(b.a)&&Object.isExtensible(b.a)&&Object.defineProperty(b.a,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"useEditingList",filename:"src/index.ts"}}),"undefined"!==typeof u.a&&u.a&&u.a===Object(u.a)&&Object.isExtensible(u.a)&&Object.defineProperty(u.a,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"EditorProps",filename:"src/index.ts"}}),"undefined"!==typeof s.Props&&s.Props&&s.Props===Object(s.Props)&&Object.isExtensible(s.Props)&&Object.defineProperty(s.Props,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"TableColumnProps",filename:"src/index.ts"}}),"undefined"!==typeof s.b&&s.b&&s.b===Object(s.b)&&Object.isExtensible(s.b)&&Object.defineProperty(s.b,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"TableColumn",filename:"src/index.ts"}}),"undefined"!==typeof d.Props&&d.Props&&d.Props===Object(d.Props)&&Object.isExtensible(d.Props)&&Object.defineProperty(d.Props,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"EditableDataTableProps",filename:"src/index.ts"}});var v=n("./node_modules/sinoui-components/Button/index.js");n.d(t,"default",function(){return E});x="Demo";var x,h={},C="wrapper";function E(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(o.b)(C,Object.assign({},h,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("h2",{id:"\u6821\u9a8c"},"\u6821\u9a8c"),Object(o.b)("p",null,"EditableDataTable \u5185\u7f6e\u652f\u6301\u6821\u9a8c\uff0c\u4e5f\u652f\u6301\u5728\u8868\u683c\u7ec4\u4ef6\u7684\u5916\u90e8\u7ef4\u62a4\u6821\u9a8c\u72b6\u6001\u3002\u53ef\u4ee5\u4f7f\u7528 useSimpleEditingList \u7ba1\u7406\u5916\u7f6e\u7684\u6821\u9a8c\u72b6\u6001\u3002"),Object(o.b)("pre",null,Object(o.b)("code",Object.assign({parentName:"pre"},{className:"language-tsx"}),"import React from 'react';\nimport EditableDataTable, {\n  useSimpleEditingList,\n  TableColumn,\n} from '@sinouiincubator/editable-data-table';\n\ninterface User {\n  id: string;\n  name: string;\n  duty?: string;\n}\n\nfunction validate(rowData: User) {\n  const errors = {};\n\n  if (!rowData.name) {\n    errors.name = '\u5fc5\u586b';\n  }\n\n  if (rowData.duty && rowData.duty.startsWith('1')) {\n    errors.duty = '\u804c\u52a1\u4e0d\u80fd\u4ee51\u5f00\u5934';\n  }\n\n  return errors;\n}\n\nfunction Demo() {\n  const editingList = useSimpleEditingList<User>(\n    [\n      { id: '1', name: 'Jacking', duty: 'developer' },\n      { id: '2', name: 'zinuo', duty: 'developer' },\n    ],\n    {\n      alwaysEditing: true,\n      validate,\n    },\n  );\n\n  const handleSave = () => {\n    if (!editingList.validateAllEditingRows()) {\n      alert('\u6570\u636e\u6821\u9a8c\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u3002');\n    } else {\n      console.log('\u9700\u8981\u4fdd\u5b58\u7684\u6570\u636e', editingList.items);\n      alert('\u4fdd\u5b58\u6570\u636e\u6210\u529f');\n    }\n  };\n\n  return (\n    <>\n      <button onClick={handleSave}>\u4fdd\u5b58</button>\n      <EditableDataTable\n        data={editingList.items}\n        editingRows={editingList.editingRows}\n        errors={editingList.errors}\n        touched={editingList.touched}\n        onFieldChange={editingList.validateField}\n      >\n        <TableColumn order title=\"\u5e8f\u53f7\" />\n        <TableColumn title=\"\u59d3\u540d\" name=\"name\" editor=\"input\" />\n        <TableColumn title=\"\u804c\u52a1\" name=\"duty\" editor=\"input\" />\n      </EditableDataTable>\n    </>\n  );\n}\n")),Object(o.b)("p",null,"\u6f14\u793a\u6548\u679c\uff1a"),Object(o.b)(l.c,{__position:0,__code:"() => {\n  function validate(rowData) {\n    const errors = {}\n    if (!rowData.name) {\n      errors.name = '\u5fc5\u586b'\n    }\n\n    if (rowData.duty && rowData.duty.startsWith('1')) {\n      errors.duty = '\u804c\u52a1\u4e0d\u80fd\u4ee51\u5f00\u5934'\n    }\n\n    return errors\n  }\n\n  function Demo() {\n    const editingList = useSimpleEditingList(\n      [\n        { id: '1', name: 'Jacking', duty: 'developer' },\n        { id: '2', name: 'zinuo', duty: 'developer' },\n      ],\n      {\n        alwaysEditing: true,\n        validate,\n      },\n    )\n\n    const handleSave = () => {\n      if (!editingList.validateAllEditingRows()) {\n        alert('\u6570\u636e\u6821\u9a8c\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u3002')\n      } else {\n        console.log('\u9700\u8981\u4fdd\u5b58\u7684\u6570\u636e', editingList.items)\n        alert('\u4fdd\u5b58\u6570\u636e\u6210\u529f')\n      }\n    }\n\n    return (\n      <>\n        <Button raised onClick={handleSave}>\n          \u4fdd\u5b58\n        </Button>\n        <Button raised onClick={() => editingList.add({})}>\n          \u65b0\u589e\n        </Button>\n        <EditableDataTable\n          data={editingList.items}\n          editingRows={editingList.editingRows}\n          errors={editingList.errors}\n          touched={editingList.touched}\n          onFieldChange={editingList.validateField}\n        >\n          <TableColumn order title=\"\u5e8f\u53f7\" />\n          <TableColumn title=\"\u59d3\u540d\" name=\"name\" editor=\"input\" />\n          <TableColumn title=\"\u804c\u52a1\" name=\"duty\" editor=\"input\" />\n        </EditableDataTable>\n      </>\n    )\n  }\n\n  return <Demo />\n}",__scope:{props:this?this.props:n,Playground:l.c,EditableDataTable:O,useSimpleEditingList:g,TableColumn:s.b,Button:v.a},mdxType:"Playground"},function(){function e(e){var t={};return e.name||(t.name="\u5fc5\u586b"),e.duty&&e.duty.startsWith("1")&&(t.duty="\u804c\u52a1\u4e0d\u80fd\u4ee51\u5f00\u5934"),t}return Object(o.b)(function(){var t=g([{id:"1",name:"Jacking",duty:"developer"},{id:"2",name:"zinuo",duty:"developer"}],{alwaysEditing:!0,validate:e});return Object(o.b)(i.a.Fragment,null,Object(o.b)(v.a,{raised:!0,onClick:function(){t.validateAllEditingRows()?(console.log("\u9700\u8981\u4fdd\u5b58\u7684\u6570\u636e",t.items),alert("\u4fdd\u5b58\u6570\u636e\u6210\u529f")):alert("\u6570\u636e\u6821\u9a8c\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u3002")},mdxType:"Button"},"\u4fdd\u5b58"),Object(o.b)(v.a,{raised:!0,onClick:function(){return t.add({})},mdxType:"Button"},"\u65b0\u589e"),Object(o.b)(O,{data:t.items,editingRows:t.editingRows,errors:t.errors,touched:t.touched,onFieldChange:t.validateField,mdxType:"EditableDataTable"},Object(o.b)(s.b,{order:!0,title:"\u5e8f\u53f7",mdxType:"TableColumn"}),Object(o.b)(s.b,{title:"\u59d3\u540d",name:"name",editor:"input",mdxType:"TableColumn"}),Object(o.b)(s.b,{title:"\u804c\u52a1",name:"duty",editor:"input",mdxType:"TableColumn"})))},{mdxType:"Demo"})}))}E&&E===Object(E)&&Object.isExtensible(E)&&Object.defineProperty(E,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"MDXContent",filename:"docs/validate.mdx"}}),E.isMDXComponent=!0},"./src/EditableDataTable.tsx":function(e,t,n){"use strict";var a=n("./node_modules/react/index.js"),r=n.n(a),i=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js"),o=n("./node_modules/sinoui-components/styles/index.js"),l=n("./node_modules/sinoui-components/Table/index.js");function d(){var e=Object(i.a)(["\n  table-layout: fixed;\n  border-top: 1px solid rgba(224, 224, 224, 1);\n  & .sinoui-data-table-head {\n    ",";\n    ",";\n    background-color: ",";\n    text-align: left;\n    vertical-align: middle;\n  }\n\n  .sinoui-checkbox-button {\n    margin: 14px;\n  }\n\n  & .sinoui-data-table-head.numeric,\n  .sinoui-data-table-body-td.numeric {\n    text-align: right;\n    flex-direction: row-reverse;\n  }\n\n  & .sinoui-data-table-head.align_center,\n  .sinoui-data-table-body-td.align_center {\n    text-align: center;\n  }\n\n  & .sinoui-data-table-head.checkbox,\n  .sinoui-data-table-body-td.checkbox {\n    padding: 0;\n    width: 48px;\n  }\n\n  & .sinoui-data-table-head.extraInfo,\n  .sinoui-data-table-body-td.extraInfo {\n    padding: 0;\n    width: 60px;\n  }\n\n  & .sinoui-data-table-head:last-child,\n  .sinoui-data-table-body-td:last-child {\n    padding-right: 24px;\n  }\n\n  & .sinoui-data-table-footer {\n    ",";\n    ",";\n    padding-left: 24px;\n    padding-right: 12px;\n  }\n\n  & .sinoui-data-table-body-cell-no-data {\n    ",";\n    ",";\n    padding: 64px;\n    text-align: center;\n    color: ",";\n  }\n\n  & .sinoui-data-table-body-td {\n    ",";\n    ",";\n    text-align: left;\n    vertical-align: middle;\n    word-wrap: break-word;\n    word-break: break-all;\n  }\n\n  & .sinoui-data-table-head-row {\n    height: 48px;\n  }\n\n  & .sinoui-data-table-footer-row,\n  .sinoui-data-table-body-row-no-data {\n    height: 56px;\n    background-color: transparent;\n  }\n\n  & .sinoui-data-table-body-row {\n    height: 48px;\n    background-color: transparent;\n\n    &:hover {\n      background-color: ",";\n    }\n  }\n\n  & .sinoui-data-table-body-row.selected {\n    background-color: ",";\n  }\n"]);return d=function(){return e},e}function s(){var e=Object(i.a)(["\n  padding: 0;\n  padding-left: 8px;\n  padding-right: 8px;\n  border-bottom: 1px solid\n    ",";\n"]);return s=function(){return e},e}function c(){var e=Object(i.a)(["\n  font-size: ","rem;\n  font-family: ",";\n  font-weight: ",";\n  color: ",";\n"]);return c=function(){return e},e}function u(){var e=Object(i.a)(["\n  font-size: ","rem;\n  font-family: ",";\n  font-weight: ",";\n  color: ",";\n"]);return u=function(){return e},e}var b=Object(o.b)(u(),function(e){return e.theme.typography.body1.fontSize},function(e){return e.theme.typography.fontFamily},function(e){return e.theme.typography.fontWeightMedium},function(e){return e.theme.typography.body1.color}),m=Object(o.b)(c(),function(e){return e.theme.typography.body1.fontSize},function(e){return e.theme.typography.fontFamily},function(e){return e.theme.typography.body1.fontWeight},function(e){return e.theme.typography.body1.color}),f=Object(o.b)(s(),function(e){return"light"===e.theme.palette.type?"rgba(224, 224, 224, 1)":"rgba(80, 80, 80, 1)"}),p={light:{tableRowSelected:"rgba(0, 0, 0, 0.04)",tableRowHover:"rgba(0, 0, 0, 0.07)"},dark:{tableRowSelected:"rgba(255, 255, 255, 0.08)",tableRowHover:"rgba(255, 255, 255, 0.14)"}},y=Object(o.c)(l.a)(d(),b,f,function(e){return"light"===e.theme.palette.type?e.theme.palette.primary[50]:e.theme.palette.primary[200]},b,f,m,f,function(e){return e.theme.typography.caption.color},m,f,function(e){return p[e.theme.palette.type].tableRowHover},function(e){return p[e.theme.palette.type].tableRowSelected}),j=y;"undefined"!==typeof y&&y&&y===Object(y)&&Object.isExtensible(y)&&Object.defineProperty(y,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"StyledTable",filename:"src/Table.tsx"}});var g=n("./src/shared/EditableDataTableContext.ts");function O(){var e=Object(i.a)(["\n  text-align: center;\n  padding: 32px 8px;\n"]);return O=function(){return e},e}var v=o.c.div(O()),x=function(e){var t=e.children;return r.a.createElement(v,{className:"sinoui-data-table-info","data-testid":"emptyInfo"},t)},h=x;x&&x===Object(x)&&Object.isExtensible(x)&&Object.defineProperty(x,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"EmptyDataTableRow",filename:"src/EmptyDataTableRow.tsx"}});var C=n("./src/shared/constants.ts"),E=n("./src/shared/DataTableRowContext.ts"),w={type:C.a.ColGroup};function _(e){var t=e.children;return r.a.createElement(E.a.Provider,{value:w},r.a.createElement("colgroup",{"data-testid":"colgroup"},t))}var T=_;_&&_===Object(_)&&Object.isExtensible(_)&&Object.defineProperty(_,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"DataTableColGroup",filename:"src/DataTableColGroup.tsx"}});var P=function(e){var t=e.children;return r.a.createElement("thead",null,r.a.createElement("tr",{className:"sinoui-data-table-head-row","data-testid":"tableHead"},t))},R=P;P&&P===Object(P)&&Object.isExtensible(P)&&Object.defineProperty(P,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"DataTableHead",filename:"src/DataTableHead.tsx"}});var D=n("./src/shared/EditingBodyRowContainer.ts"),k=r.a.memo(function(e){var t=e.data,n=e.index,i=e.children,o=e.editing,l=e.error,d=e.touched,s=Object(a.useMemo)(function(){return{type:C.a.Body,data:t,index:n,editing:!!o,error:l,touched:d}},[t,n,o,l,d]);return r.a.createElement(E.a.Provider,{value:s},r.a.createElement(D.a.Provider,null,r.a.createElement("tr",{className:"sinoui-data-table-body-row","data-testid":"bodyRow"},i)))}),L=function(e){var t=e.idPropertyName,n=e.data,a=e.children,i=e.editingRows,o=void 0===i?[]:i,l=e.errors,d=e.touched;return n&&0!==n.length?r.a.createElement("tbody",null,n.map(function(e,n){return r.a.createElement(k,{key:e[t]||"index_".concat(n),data:e,index:n,"data-testid":"tableBody",editing:o[n],error:l?l[n]:void 0,touched:d?d[n]:void 0},a)})):null},B=L;function S(e){var t=e.data,n=void 0===t?[]:t,i=e.idPropertyName,o=void 0===i?"id":i,l=e.children,d=e.emptyTitle,s=void 0===d?"\u6682\u65e0\u6570\u636e":d,c=e.editingRows,u=e.errors,b=e.touched,m=function(e){var t=e.idPropertyName,n=void 0===t?"id":t,r=e.onRowChange,i=e.validate,o=e.onFieldChange,l=Object(a.useRef)({onRowChange:r,validate:i,onFieldChange:o});return Object(a.useEffect)(function(){l.current.onRowChange=r,l.current.validate=i,l.current.onFieldChange=o},[r,i,o]),Object(a.useMemo)(function(){return{idPropertyName:n,options:l.current}},[n])}(e);return r.a.createElement(r.a.Fragment,null,r.a.createElement(j,null,r.a.createElement(g.a.Provider,{value:m},r.a.createElement(T,null,l),r.a.createElement(R,null,l),r.a.createElement(B,{data:n,idPropertyName:o,editingRows:c,errors:u,touched:b},l))),(!n||0===n.length)&&r.a.createElement(h,null,s))}L&&L===Object(L)&&Object.isExtensible(L)&&Object.defineProperty(L,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"DataTableBody",filename:"src/DataTableBody.tsx"}}),"undefined"!==typeof Props&&Props&&Props===Object(Props)&&Object.isExtensible(Props)&&Object.defineProperty(Props,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"Props",filename:"src/EditableDataTable.tsx"}});t.b=S;S&&S===Object(S)&&Object.isExtensible(S)&&Object.defineProperty(S,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"EditableDataTable",filename:"src/EditableDataTable.tsx"}})},"./src/TableColumn.tsx":function(e,t,n){"use strict";var a=n("./node_modules/react/index.js"),r=n.n(a),i=n("./src/shared/DataTableRowContext.ts"),o=n("./src/shared/EditableDataTableContext.ts"),l=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),d=n("./node_modules/sinoui-components/Form/FormHelpText.js"),s=n("./src/shared/EditingBodyRowContainer.ts");var c=r.a.memo(function(e){var t=e.name,n=e.editor,c=Object(a.useContext)(i.a),u=c.data,b=c.index,m=u[t]||"",f=Object(a.useState)(m),p=Object(l.a)(f,2)[1],y=Object(a.useContext)(o.a).options,j=s.a.useContainer(),g=j.touched,O=j.errors,v=j.validateField,x=j.errorControlled,h=Object(a.useCallback)(function(e){var n=function(e){return!(!e||!e.target)}(e)?e.target.value:e;p(n),u[t]=n,y.onRowChange&&y.onRowChange(b,u),y.onFieldChange&&y.onFieldChange(b,t,u),x||v(t,u)},[u,t,y,b,x,v]),C=g[t]?O[t]:void 0;return Object(a.useMemo)(function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(n,{name:t,value:m,item:u,onChange:h,error:!!C}),C&&r.a.createElement(d.a,{error:!0},C))},[u,C,h,t,m])});var u=r.a.memo(function(e){var t=e.order,n=e.render,a=e.name,i=e.editor,o=e.index,l=e.editing,d=e.data,s=e.idPropertyName,u=e.validate;if(t)return r.a.createElement("td",{className:"sinoui-data-table-body-td align_center"},o+1);if(l&&i){if(!a)throw new Error("\u6ca1\u6709\u7ed9TableColumn\u6307\u5b9aname\u5c5e\u6027");return r.a.createElement("td",{className:"sinoui-data-table-body-td"},r.a.createElement(c,{name:a,editor:i}))}return n?r.a.createElement("td",{className:"sinoui-data-table-body-td"},n(a?d[a]:void 0,d,o,d[s],{editing:l,validate:u})):a?r.a.createElement("td",{className:"sinoui-data-table-body-td"},d[a]):null});function b(e){var t,n,l,d,c,b=(t=Object(a.useContext)(i.a),n=t.data,l=t.index,d=t.editing,c=s.a.useContainer().validate,{data:n,index:l,editing:d,idPropertyName:Object(a.useContext)(o.a).idPropertyName,validate:c});return r.a.createElement(u,Object.assign({},e,b))}var m=b;b&&b===Object(b)&&Object.isExtensible(b)&&Object.defineProperty(b,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"DataTableBodyCell",filename:"src/DataTableBodyCell.tsx"}});var f=n("./node_modules/classnames/index.js"),p=n.n(f);function y(e){var t=e.order,n=e.title;return r.a.createElement("th",{className:p()("sinoui-data-table-head",{align_center:t})},n)}var j=y;y&&y===Object(y)&&Object.isExtensible(y)&&Object.defineProperty(y,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"DataTableHeadCell",filename:"src/DataTableHeadCell.tsx"}});var g=n("./src/shared/constants.ts");"undefined"!==typeof Props&&Props&&Props===Object(Props)&&Object.isExtensible(Props)&&Object.defineProperty(Props,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"Props",filename:"src/TableColumn.tsx"}});var O=r.a.memo(function(e){var t=e.title,n=e.order,o=e.width;switch(Object(a.useContext)(i.a).type){case g.a.Head:return r.a.createElement(j,{title:t,order:n});case g.a.ColGroup:return r.a.createElement("col",{width:n?50:o});default:return r.a.createElement(m,e)}});t.b=O;"undefined"!==typeof O&&O&&O===Object(O)&&Object.isExtensible(O)&&Object.defineProperty(O,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"TableColumn",filename:"src/TableColumn.tsx"}})},"./src/shared/DataTableRowContext.ts":function(e,t,n){"use strict";var a=n("./node_modules/react/index.js"),r=n.n(a),i=n("./src/shared/constants.ts");"undefined"!==typeof BodyRowContextType&&BodyRowContextType&&BodyRowContextType===Object(BodyRowContextType)&&Object.isExtensible(BodyRowContextType)&&Object.defineProperty(BodyRowContextType,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"BodyRowContextType",filename:"src/shared/DataTableRowContext.ts"}}),"undefined"!==typeof HeadRowContextType&&HeadRowContextType&&HeadRowContextType===Object(HeadRowContextType)&&Object.isExtensible(HeadRowContextType)&&Object.defineProperty(HeadRowContextType,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"HeadRowContextType",filename:"src/shared/DataTableRowContext.ts"}}),"undefined"!==typeof ColGroupContextType&&ColGroupContextType&&ColGroupContextType===Object(ColGroupContextType)&&Object.isExtensible(ColGroupContextType)&&Object.defineProperty(ColGroupContextType,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"ColGroupContextType",filename:"src/shared/DataTableRowContext.ts"}}),"undefined"!==typeof RowContextType&&RowContextType&&RowContextType===Object(RowContextType)&&Object.isExtensible(RowContextType)&&Object.defineProperty(RowContextType,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"RowContextType",filename:"src/shared/DataTableRowContext.ts"}});var o=r.a.createContext({type:i.a.Head});t.a=o,"undefined"!==typeof o&&o&&o===Object(o)&&Object.isExtensible(o)&&Object.defineProperty(o,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"DataTableRowContext",filename:"src/shared/DataTableRowContext.ts"}})},"./src/shared/EditableDataTableContext.ts":function(e,t,n){"use strict";var a=n("./node_modules/react/index.js"),r=n.n(a).a.createContext({idPropertyName:"id",options:{}});t.a=r,"undefined"!==typeof r&&r&&r===Object(r)&&Object.isExtensible(r)&&Object.defineProperty(r,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"EditableDataTableContext",filename:"src/shared/EditableDataTableContext.ts"}})},"./src/shared/EditingBodyRowContainer.ts":function(e,t,n){"use strict";var a=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread.js"),i=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),o=n("./node_modules/react/index.js"),l=n("./node_modules/unstated-next/dist/unstated-next.mjs"),d=n("./node_modules/shallowequal/index.js"),s=n.n(d),c=n("./src/shared/EditableDataTableContext.ts"),u=n("./src/shared/DataTableRowContext.ts");var b=Object(l.a)(function(){var e=Object(o.useContext)(u.a),t=e.data,n=e.error,l=e.touched,d=Object(o.useState)({}),b=Object(i.a)(d,2),m=b[0],f=b[1],p=Object(o.useState)({}),y=Object(i.a)(p,2),j=y[0],g=y[1],O=Object(o.useRef)(t),v=Object(o.useContext)(c.a),x=v.options,h=v.idPropertyName;Object(o.useEffect)(function(){O.current=t},[t]);var C=Object(o.useCallback)(function(e){g(function(t){return s()(e,t)?t:e})},[]);Object(o.useEffect)(function(){if(!t[h]&&x.validate){var e=x.validate(t)||{};C(e)}},[t,x,h,C]);var E=Object(o.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O.current,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(x.validate){var n=x.validate(e);if(n){if(t){var a={};Object.keys(n).forEach(function(e){a[e]=!0}),f(a)}return C(n||{}),0===Object.keys(n).filter(function(e){return!!n[e]}).length}}return!0},[x,C]),w=Object(o.useCallback)(function(e,t){f(function(t){return t[e]?t:Object(r.a)({},t,Object(a.a)({},e,!0))}),E(t,!1)},[E]);return{errors:n||j,errorControlled:!!n,touched:l||m,validate:E,validateField:w}});t.a=b,"undefined"!==typeof b&&b&&b===Object(b)&&Object.isExtensible(b)&&Object.defineProperty(b,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"EditingBodyRowContainer",filename:"src/shared/EditingBodyRowContainer.ts"}})},"./src/shared/EditorProps.ts":function(e,t){},"./src/shared/constants.ts":function(e,t,n){"use strict";var a;n.d(t,"a",function(){return a}),function(e){e[e.Body=0]="Body",e[e.Head=1]="Head",e[e.ColGroup=2]="ColGroup"}(a||(a={})),"undefined"!==typeof a&&a&&a===Object(a)&&Object.isExtensible(a)&&Object.defineProperty(a,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"RowType",filename:"src/shared/constants.ts"}});"\u6682\u65e0\u6570\u636e"===Object("\u6682\u65e0\u6570\u636e")&&Object.isExtensible("\u6682\u65e0\u6570\u636e")&&Object.defineProperty("\u6682\u65e0\u6570\u636e","__filemeta",{enumerable:!0,configurable:!0,value:{name:"EMPTY_ROW_INFO",filename:"src/shared/constants.ts"}})},"./src/useEditingList.ts":function(e,t,n){"use strict";n.d(t,"a",function(){return b});var a=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js"),r=n.n(a),i=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),o=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),l=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),d=n("./node_modules/@sinoui/use-rest-list-api/dist/index.js"),s=n.n(d),c=n("./node_modules/react/index.js"),u=n("./node_modules/immer/dist/immer.module.js");function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=((arguments.length>2?arguments[2]:void 0)||{}).idPropertyName,a=void 0===n?"id":n,d=s()(e,t),b=d.items,m=d.setItems,f=d.remove,p=d.removeItemAt,y=d.update,j=d.save,g=d.isLoading,O=d.addItem,v=Object(c.useState)(function(){return t.map(function(){return!1})}),x=Object(l.a)(v,2),h=x[0],C=x[1],E=b.length;Object(c.useEffect)(function(){C(function(e){return E!==e.length?new Array(E).fill(!1):e})},[g,E]);var w=Object(c.useCallback)(function(){var e=Object(i.a)(r.a.mark(function e(t,n){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t[a]){e.next=7;break}return e.next=4,f(t[a]);case 4:C(Object(u.produce)(h,function(e){e.splice(n,1)})),e.next=9;break;case 7:p(n),C(Object(u.produce)(function(e){e.splice(n,1)}));case 9:e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(0),e.t0;case 14:case"end":return e.stop()}},e,null,[[0,11]])}));return function(t,n){return e.apply(this,arguments)}}(),[h,a,f,p]),_=Object(c.useCallback)(function(){var e=Object(i.a)(r.a.mark(function e(t,n){var i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t[a]){e.next=6;break}return e.next=4,y(t);case 4:e.next=11;break;case 6:return e.next=8,j(t,!1);case 8:i=e.sent,p(n),O(i);case 11:C(Object(u.produce)(h,function(e){e[n]=!1})),e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}},e,null,[[0,14]])}));return function(t,n){return e.apply(this,arguments)}}(),[O,h,a,p,j,y]),T=Object(c.useCallback)(function(e){C(Object(u.produce)(h,function(t){t[e]=!0}))},[h]);return{items:b,editingRows:h,add:function(){m([].concat(Object(o.a)(b),[{}])),C([].concat(Object(o.a)(h),[!0]))},remove:w,edit:T,save:_,idPropertyName:a}}b&&b===Object(b)&&Object.isExtensible(b)&&Object.defineProperty(b,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"useEditingList",filename:"src/useEditingList.ts"}})}}]);
//# sourceMappingURL=docs-validate.2cf78005c158ddb7e3d5.js.map