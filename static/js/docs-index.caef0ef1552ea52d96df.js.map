{"version":3,"sources":["D:/workspaces/editable-data-table/docs/index.mdx","D:/workspaces/editable-data-table/src/Table.tsx","D:/workspaces/editable-data-table/src/EmptyDataTableRow.tsx","D:/workspaces/editable-data-table/src/DataTableColGroup.tsx","D:/workspaces/editable-data-table/src/DataTableHead.tsx","D:/workspaces/editable-data-table/src/DataTableBodyRow.tsx","D:/workspaces/editable-data-table/src/DataTableBody.tsx","D:/workspaces/editable-data-table/src/EditableDataTable.tsx","D:/workspaces/editable-data-table/src/DataTableCellEditor.tsx","D:/workspaces/editable-data-table/src/DataTableBodyCell.tsx","D:/workspaces/editable-data-table/src/DataTableHeadCell.tsx","D:/workspaces/editable-data-table/src/TableColumn.tsx","D:/workspaces/editable-data-table/src/shared/DataTableRowContext.ts","D:/workspaces/editable-data-table/src/shared/EditableDataTableContext.ts","D:/workspaces/editable-data-table/src/shared/EditingBodyRowContainer.ts","D:/workspaces/editable-data-table/src/shared/constants.ts","D:/workspaces/editable-data-table/src/useEditingList.ts"],"names":["layoutProps","MDXLayout","MDXContent","_ref","components","props","Object","D_workspaces_editable_data_table_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_2__","_mdx_js_react__WEBPACK_IMPORTED_MODULE_4__","assign","mdxType","id","parentName","className","href","docz__WEBPACK_IMPORTED_MODULE_5__","__position","__code","__scope","this","useState","useCallback","useMemo","Playground","Props","TableColumn","EditableDataTable","useEditingList","Button","TextInput","produce","_src_EditableDataTable__WEBPACK_IMPORTED_MODULE_7__","data","firstName","lastName","title","_src_TableColumn__WEBPACK_IMPORTED_MODULE_6__","name","render","value","row","concat","editingRows","editor","validate","rowData","errors","startsWith","_useState","_useState2","D_workspaces_editable_data_table_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__","setEditingRows","_useState3","_useState4","items","setItems","react__WEBPACK_IMPORTED_MODULE_3___default","a","Fragment","sinoui_components_Button__WEBPACK_IMPORTED_MODULE_9__","onClick","D_workspaces_editable_data_table_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__","result","order","index","context","editing","autoWidth","draft","alert","handleSave","handleEdit","removeByIndex","splice","handleRemove","_useEditingList","add","edit","save","remove","idPropertyName","then","isMDXComponent","captionTypeStyle","css","_templateObject","theme","typography","body1","fontSize","fontFamily","fontWeightMedium","color","bodyTypeStyle","_templateObject2","fontWeight","dataTableCellStyle","_templateObject3","palette","type","rowBgColor","light","tableRowSelected","tableRowHover","dark","StyledTable","styled","Table","_templateObject4","primary","caption","Wrapper","div","EmptyDataTableRow_templateObject","EmptyDataTableRow","children","react_default","createElement","data-testid","RowType","ColGroup","DataTableColGroup","DataTableRowContext","Provider","DataTableHead","React","memo","error","touched","Body","EditingBodyRowContainer","DataTableBody","_ref$editingRows","length","map","item","src_DataTableBodyRow","key","undefined","_props$data","_props$idPropertyName","_props$emptyTitle","emptyTitle","style","_ref$idPropertyName","onRowChange","onFieldChange","options","useRef","useEffect","current","useEditableDataTable","src_Table","classNames","EditableDataTableContext","src_DataTableColGroup","src_DataTableHead","src_DataTableBody","src_EmptyDataTableRow","Editor","useContext","valueFromContext","setValue","slicedToArray","_EditingBodyRowContai","useContainer","validateField","errorControlled","handleChange","event","newValue","target","isChangeEvent","onChange","FormHelpText","MemoDataTableBodyCellInner","Error","src_DataTableCellEditor","DataTableBodyCell","state","DataTableHeadCell","align_center","width","Head","src_DataTableHeadCell","src_DataTableBodyCell","react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","_constants__WEBPACK_IMPORTED_MODULE_1__","createContext","createContainer","outerError","outTouched","D_workspaces_editable_data_table_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__","setTouched","setErrors","rowDataRef","_useContext","updateErrors","newErrors","prev","shallowEqual","newRowData","arguments","updateTouched","newTouched","keys","forEach","filter","fieldName","D_workspaces_editable_data_table_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__","D_workspaces_editable_data_table_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","d","__webpack_exports__","url","defaultValue","_ref$keyName","keyName","_useRestListApi","useRestListApi","removeItemAt","update","isLoading","addItem","D_workspaces_editable_data_table_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__","itemsCount","Array","fill","asyncRemove","_ref2","D_workspaces_editable_data_table_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","D_workspaces_editable_data_table_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","mark","_callee","wrap","_context","next","t0","stop","_x","_x2","apply","asyncUpdate","_ref3","_callee2","_context2","sent","_x3","_x4","D_workspaces_editable_data_table_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__"],"mappings":"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","file":"static/js/docs-index.7ca159e1.js","sourcesContent":["/* @jsx mdx */\n  import React from 'react'\n  import { mdx } from '@mdx-js/react'\n  /* @jsx mdx */\nimport { useState, useCallback, useMemo } from 'react';\nimport { Playground, Props } from 'docz';\nimport TableColumn from '../src/TableColumn';\nimport EditableDataTable from '../src/EditableDataTable';\nimport useEditingList from '../src/useEditingList';\nimport Button from 'sinoui-components/Button';\nimport TextInput from 'sinoui-components/TextInput';\nimport produce from 'immer';\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n    <h1 {...{\n      \"id\": \"可编辑表格\"\n    }}>{`可编辑表格`}</h1>\n    <p>{`安装：`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-shell\"\n      }}>{`yarn add @sinouiincubator/editable-data-table\n`}</code></pre>\n    <p>{`引用：`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-ts\"\n      }}>{`import EditableDataTable, {\n  TableColumn,\n} from '@sinouiincubator/editable-data-table';\n`}</code></pre>\n    <p>{`源码路径：`}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/sinouiincubator/editable-data-table\"\n      }}>{`https://github.com/sinouiincubator/editable-data-table`}</a>{`。`}</p>\n    <p>{`可编辑列表（`}<inlineCode parentName=\"p\">{`EditableDataTable`}</inlineCode>{`）提供以下功能：`}</p>\n    <ul>\n      <li parentName=\"ul\">{`展现列表数据（不支持分页，但是可以与分页功能组合使用）`}</li>\n      <li parentName=\"ul\">{`编辑数据行`}</li>\n      <li parentName=\"ul\">{`校验数据行`}</li>\n    </ul>\n    <p>{`我们可以基于可编辑表格做列表数据的增删改查。下面我们通过例子来了解基本用法。`}</p>\n    <h2 {...{\n      \"id\": \"展现列表数据\"\n    }}>{`展现列表数据`}</h2>\n    <p><inlineCode parentName=\"p\">{`EditableDataTable`}</inlineCode>{`可以用来展现列表数据，可以通过`}<inlineCode parentName=\"p\">{`TableColumn`}</inlineCode>{`定义列表的列信息：列标题、列单元格数据渲染逻辑、宽度等。`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-tsx\"\n      }}>{`import EditableDataTable, {\n  TableColumn,\n} from '@sinouiincubator/editable-data-table';\n\nfunction Demo() {\n  const users = [\n    {\n      id: '1',\n      firstName: 'Jacking',\n      lastName: 'Liu',\n      title: 'developer',\n    },\n    {\n      id: '2',\n      firstName: 'Zinuo',\n      lastName: 'Tian',\n      title: 'developer',\n    },\n  ];\n\n  return (\n    <EditableDataTable data={users}>\n      <TableColumn title=\"id\" name=\"id\" />\n      <TableColumn\n        title=\"姓名\"\n        render={(value, row) => \\`\\${row.firstName} \\${row.lastName}\\`}\n      />\n      <TableColumn title=\"标题\" name=\"title\" />\n    </EditableDataTable>\n  );\n}\n`}</code></pre>\n    <p>{`查看运行效果：`}</p>\n    <Playground __position={0} __code={'() => {\\n  const users = [\\n    {\\n      id: \\'1\\',\\n      firstName: \\'Jacking\\',\\n      lastName: \\'Liu\\',\\n      title: \\'developer\\',\\n    },\\n    {\\n      id: \\'2\\',\\n      firstName: \\'Zinuo\\',\\n      lastName: \\'Tian\\',\\n      title: \\'developer\\',\\n    },\\n  ]\\n  return (\\n    <EditableDataTable data={users}>\\n      <TableColumn title=\\\"id\\\" name=\\\"id\\\" />\\n      <TableColumn\\n        title=\\\"姓名\\\"\\n        render={(value, row) => `${row.firstName} ${row.lastName}`}\\n      />\\n      <TableColumn title=\\\"标题\\\" name=\\\"title\\\" />\\n    </EditableDataTable>\\n  )\\n}'} __scope={{\n      props: this ? this.props : props,\n      useState,\n      useCallback,\n      useMemo,\n      Playground,\n      Props,\n      TableColumn,\n      EditableDataTable,\n      useEditingList,\n      Button,\n      TextInput,\n      produce\n    }} mdxType=\"Playground\">\n  {() => {\n        const users = [{\n          id: '1',\n          firstName: 'Jacking',\n          lastName: 'Liu',\n          title: 'developer'\n        }, {\n          id: '2',\n          firstName: 'Zinuo',\n          lastName: 'Tian',\n          title: 'developer'\n        }];\n        return <EditableDataTable data={users} mdxType=\"EditableDataTable\">\n        <TableColumn title=\"id\" name=\"id\" mdxType=\"TableColumn\" />\n        <TableColumn title=\"姓名\" render={(value, row) => `${row.firstName} ${row.lastName}`} mdxType=\"TableColumn\" />\n        <TableColumn title=\"标题\" name=\"title\" mdxType=\"TableColumn\" />\n      </EditableDataTable>;\n      }}\n    </Playground>\n    <h2 {...{\n      \"id\": \"编辑数据行\"\n    }}>{`编辑数据行`}</h2>\n    <p><inlineCode parentName=\"p\">{`EditableDataTable`}</inlineCode>{`组件通过`}<inlineCode parentName=\"p\">{`editingRows`}</inlineCode>{`接收数据行是否处于编辑状态的数据。这是一个与`}<inlineCode parentName=\"p\">{`data`}</inlineCode>{`数组等长的布尔数组，`}<inlineCode parentName=\"p\">{`editingRows`}</inlineCode>{`数组的每一项与`}<inlineCode parentName=\"p\">{`data`}</inlineCode>{`数组一一对应，`}<inlineCode parentName=\"p\">{`true`}</inlineCode>{`表示编辑状态、`}<inlineCode parentName=\"p\">{`false`}</inlineCode>{`表示非编辑状态。`}</p>\n    <p>{`可以通过`}<inlineCode parentName=\"p\">{`TableColumn`}</inlineCode>{`组件的`}<inlineCode parentName=\"p\">{`editor`}</inlineCode>{`属性指定单元格的编辑器。如下所示：`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-jsx\"\n      }}>{`import EditableDataTable, {\n  TableColumn,\n} from '@sinouiincubator/editable-data-table';\n\nfunction Demo() {\n  const users = [\n    {\n      id: '1',\n      name: 'Jacking',\n      title: 'developer',\n    },\n    {\n      id: '2',\n      name: 'zinuo',\n      title: 'developer',\n    },\n  ];\n\n  const editingRows = [false, true]; // 第二行数据是编辑状态\n\n  return (\n    <EditableDataTable data={users} editingRows={editingRows}>\n      <TableColumn title=\"id\" name=\"id\" editor=\"input\" />\n      <TableColumn title=\"姓名\" name=\"name\" editor=\"input\" />\n      <TableColumn title=\"标题\" name=\"title\" editor=\"input\" />\n    </EditableDataTable>\n  );\n}\n`}</code></pre>\n    <p>{`查看运行效果：`}</p>\n    <Playground __position={1} __code={'() => {\\n  const users = [\\n    {\\n      id: \\'1\\',\\n      name: \\'Jacking\\',\\n      title: \\'developer\\',\\n    },\\n    {\\n      id: \\'2\\',\\n      name: \\'zinuo\\',\\n      title: \\'developer\\',\\n    },\\n  ]\\n  const editingRows = [false, true] // 第二行数据是编辑状态\\n\\n  return (\\n    <EditableDataTable data={users} editingRows={editingRows}>\\n      <TableColumn title=\\\"id\\\" name=\\\"id\\\" editor=\\\"input\\\" />\\n      <TableColumn title=\\\"姓名\\\" name=\\\"name\\\" editor=\\\"input\\\" />\\n      <TableColumn title=\\\"标题\\\" name=\\\"title\\\" editor=\\\"input\\\" />\\n    </EditableDataTable>\\n  )\\n}'} __scope={{\n      props: this ? this.props : props,\n      useState,\n      useCallback,\n      useMemo,\n      Playground,\n      Props,\n      TableColumn,\n      EditableDataTable,\n      useEditingList,\n      Button,\n      TextInput,\n      produce\n    }} mdxType=\"Playground\">\n  {() => {\n        const users = [{\n          id: '1',\n          name: 'Jacking',\n          title: 'developer'\n        }, {\n          id: '2',\n          name: 'zinuo',\n          title: 'developer'\n        }];\n        const editingRows = [false, true]; // 第二行数据是编辑状态\n\n        return <EditableDataTable data={users} editingRows={editingRows} mdxType=\"EditableDataTable\">\n    <TableColumn title=\"id\" name=\"id\" editor=\"input\" mdxType=\"TableColumn\" />\n    <TableColumn title=\"姓名\" name=\"name\" editor=\"input\" mdxType=\"TableColumn\" />\n    <TableColumn title=\"标题\" name=\"title\" editor=\"input\" mdxType=\"TableColumn\" />\n  </EditableDataTable>;\n      }}\n    </Playground>\n    <h2 {...{\n      \"id\": \"校验数据行\"\n    }}>{`校验数据行`}</h2>\n    <p>{`可以通过`}<inlineCode parentName=\"p\">{`EditableDataTable`}</inlineCode>{`的`}<inlineCode parentName=\"p\">{`validate`}</inlineCode>{`属性指定行数据的校验，这是一个方法，方法返回验证错误的结果。如下所示：`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-ts\"\n      }}>{`function validate(rowData) {\n  const errors = {};\n\n  if (!rowData.id) {\n    errors.id = '必填';\n  }\n\n  if (!rowData.name) {\n    errors.name = '必填';\n  }\n\n  if (rowData.title && rowData.title.startsWith('1')) {\n    errors.title = '不能以1开头';\n  }\n\n  return errors;\n}\n`}</code></pre>\n    <p>{`这个方法运行的结果类似如下面：`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`{\n  id: '必填',\n  title: '不能以1开头'\n}\n`}</code></pre>\n    <p>{`这个键值对数据，键表示有验证错误的字段名（表单域名称），值表示字段名对应的验证错误。`}</p>\n    <p>{`看看效果：`}</p>\n    <Playground __position={2} __code={'() => {\\n  function validate(rowData) {\\n    const errors = {}\\n    if (!rowData.id) {\\n      errors.id = \\'必填\\'\\n    }\\n\\n    if (!rowData.name) {\\n      errors.name = \\'必填\\'\\n    }\\n\\n    if (rowData.title && rowData.title.startsWith(\\'1\\')) {\\n      errors.title = \\'不能以1开头\\'\\n    }\\n\\n    return errors\\n  }\\n\\n  const users = [\\n    {\\n      id: \\'1\\',\\n      name: \\'Jacking\\',\\n      title: \\'developer\\',\\n    },\\n    {\\n      id: \\'2\\',\\n      name: \\'zinuo\\',\\n      title: \\'developer\\',\\n    },\\n  ]\\n\\n  const editingRows = [false, true] // 第二行数据是编辑状态\\n\\n  return (\\n    <EditableDataTable\\n      data={users}\\n      editingRows={editingRows}\\n      validate={validate}\\n    >\\n      <TableColumn title=\\\"id\\\" name=\\\"id\\\" editor=\\\"input\\\" />\\n      <TableColumn title=\\\"姓名\\\" name=\\\"name\\\" editor=\\\"input\\\" />\\n      <TableColumn title=\\\"标题\\\" name=\\\"title\\\" editor=\\\"input\\\" />\\n    </EditableDataTable>\\n  )\\n}'} __scope={{\n      props: this ? this.props : props,\n      useState,\n      useCallback,\n      useMemo,\n      Playground,\n      Props,\n      TableColumn,\n      EditableDataTable,\n      useEditingList,\n      Button,\n      TextInput,\n      produce\n    }} mdxType=\"Playground\">\n  {() => {\n        function validate(rowData) {\n          const errors = {};\n\n          if (!rowData.id) {\n            errors.id = '必填';\n          }\n\n          if (!rowData.name) {\n            errors.name = '必填';\n          }\n\n          if (rowData.title && rowData.title.startsWith('1')) {\n            errors.title = '不能以1开头';\n          }\n\n          return errors;\n        }\n\n        const users = [{\n          id: '1',\n          name: 'Jacking',\n          title: 'developer'\n        }, {\n          id: '2',\n          name: 'zinuo',\n          title: 'developer'\n        }];\n        const editingRows = [false, true]; // 第二行数据是编辑状态\n\n        return <EditableDataTable data={users} editingRows={editingRows} validate={validate} mdxType=\"EditableDataTable\">\n    <TableColumn title=\"id\" name=\"id\" editor=\"input\" mdxType=\"TableColumn\" />\n    <TableColumn title=\"姓名\" name=\"name\" editor=\"input\" mdxType=\"TableColumn\" />\n    <TableColumn title=\"标题\" name=\"title\" editor=\"input\" mdxType=\"TableColumn\" />\n  </EditableDataTable>;\n      }}\n    </Playground>\n    <h2 {...{\n      \"id\": \"增删改查\"\n    }}>{`增删改查`}</h2>\n    <p>{`可以基于`}<inlineCode parentName=\"p\">{`EditableDataTable`}</inlineCode>{`实现增删改查。看看下面一个与后端 API 无法的增删改查示例：`}</p>\n    <Playground __position={3} __code={'() => {\\n  const validate = data => {\\n    const result = {}\\n    if (!data.id) {\\n      result.id = \\'必填\\'\\n    }\\n    if (data.title && data.title.startsWith(\\'1\\')) {\\n      result.title = \\'标题不能以1开头\\'\\n    }\\n    return result\\n  }\\n  const [editingRows, setEditingRows] = useState([true, false])\\n  const [items, setItems] = useState([\\n    { id: \\'1\\', title: \\'123\\' },\\n    { id: \\'2\\', title: \\'1234\\' },\\n  ])\\n\\n  const handleSave = (row, index, context) => {\\n    if (!context.validate()) {\\n      alert(\\'数据填写不完整\\')\\n    } else {\\n      setEditingRows(\\n        produce(editingRows, draft => {\\n          draft[index] = false\\n        }),\\n      )\\n      alert(\\'保存成功\\')\\n    }\\n  }\\n\\n  const handleEdit = index => {\\n    setEditingRows(\\n      produce(editingRows, draft => {\\n        draft[index] = true\\n      }),\\n    )\\n  }\\n\\n  const handleRemove = index => {\\n    const removeByIndex = produce(draft => {\\n      draft.splice(index, 1)\\n    })\\n    setEditingRows(removeByIndex)\\n    setItems(removeByIndex)\\n  }\\n\\n  const handleAdd = () => {\\n    setEditingRows([...editingRows, true])\\n    setItems([...items, {}])\\n  }\\n\\n  return (\\n    <>\\n      <Button onClick={handleAdd}>新增</Button>\\n      <EditableDataTable\\n        data={items}\\n        editingRows={editingRows}\\n        validate={validate}\\n      >\\n        <TableColumn title=\\\"序号\\\" order />\\n        <TableColumn title=\\\"id\\\" name=\\\"id\\\" editor={TextInput} />\\n        <TableColumn title=\\\"标题\\\" name=\\\"title\\\" editor={TextInput} />\\n        <TableColumn\\n          title=\\\"操作\\\"\\n          name=\\\"id\\\"\\n          render={(value, row, index, id, context) => (\\n            <>\\n              {context.editing ? (\\n                <Button\\n                  autoWidth\\n                  onClick={() => handleSave(row, index, context)}\\n                >\\n                  保存\\n                </Button>\\n              ) : (\\n                <Button autoWidth onClick={() => handleEdit(index)}>\\n                  编辑\\n                </Button>\\n              )}\\n              <Button autoWidth onClick={() => handleRemove(index)}>\\n                删除\\n              </Button>\\n            </>\\n          )}\\n        />\\n      </EditableDataTable>\\n    </>\\n  )\\n}'} __scope={{\n      props: this ? this.props : props,\n      useState,\n      useCallback,\n      useMemo,\n      Playground,\n      Props,\n      TableColumn,\n      EditableDataTable,\n      useEditingList,\n      Button,\n      TextInput,\n      produce\n    }} mdxType=\"Playground\">\n  {() => {\n        const validate = data => {\n          const result = {};\n\n          if (!data.id) {\n            result.id = '必填';\n          }\n\n          if (data.title && data.title.startsWith('1')) {\n            result.title = '标题不能以1开头';\n          }\n\n          return result;\n        };\n\n        const [editingRows, setEditingRows] = useState([true, false]);\n        const [items, setItems] = useState([{\n          id: '1',\n          title: '123'\n        }, {\n          id: '2',\n          title: '1234'\n        }]);\n\n        const handleSave = (row, index, context) => {\n          if (!context.validate()) {\n            alert('数据填写不完整');\n          } else {\n            setEditingRows(produce(editingRows, draft => {\n              draft[index] = false;\n            }));\n            alert('保存成功');\n          }\n        };\n\n        const handleEdit = index => {\n          setEditingRows(produce(editingRows, draft => {\n            draft[index] = true;\n          }));\n        };\n\n        const handleRemove = index => {\n          const removeByIndex = produce(draft => {\n            draft.splice(index, 1);\n          });\n          setEditingRows(removeByIndex);\n          setItems(removeByIndex);\n        };\n\n        const handleAdd = () => {\n          setEditingRows([...editingRows, true]);\n          setItems([...items, {}]);\n        };\n\n        return <>\n  <Button onClick={handleAdd} mdxType=\"Button\">新增</Button>\n  <EditableDataTable data={items} editingRows={editingRows} validate={validate} mdxType=\"EditableDataTable\">\n    <TableColumn title=\"序号\" order mdxType=\"TableColumn\" />\n    <TableColumn title=\"id\" name=\"id\" editor={TextInput} mdxType=\"TableColumn\" />\n    <TableColumn title=\"标题\" name=\"title\" editor={TextInput} mdxType=\"TableColumn\" />\n    <TableColumn title=\"操作\" name=\"id\" render={(value, row, index, id, context) => <>\n        {context.editing ? <Button autoWidth onClick={() => handleSave(row, index, context)} mdxType=\"Button\">保存</Button> : <Button autoWidth onClick={() => handleEdit(index)} mdxType=\"Button\">编辑</Button>}\n        <Button autoWidth onClick={() => handleRemove(index)} mdxType=\"Button\">删除</Button>\n      </>} mdxType=\"TableColumn\" />\n  </EditableDataTable>\n        </>;\n      }}\n    </Playground>\n    <h2 {...{\n      \"id\": \"使用-useeditinglist\"\n    }}>{`使用 useEditingList`}</h2>\n    <p>{`可以使用 useEditingList 简化增删改查场景的开发：`}</p>\n    <ul>\n      <li parentName=\"ul\">{`内置`}<inlineCode parentName=\"li\">{`editingRows`}</inlineCode>{`和`}<inlineCode parentName=\"li\">{`items`}</inlineCode>{`两个状态和变更方法。`}</li>\n      <li parentName=\"ul\">{`集成了`}<a parentName=\"li\" {...{\n          \"href\": \"https://github.com/sinoui/use-rest-list-api\"\n        }}>{`@sinoui/use-rest-list-api`}</a>{`，与后端 API 做增删改查交互。`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-tsx\"\n      }}>{`import EditableDataTable, {\n  useEiditingList,\n  TableColumn,\n} from '@sinouiincubator/editable-data-table';\nimport Button from 'sinoui-components/Button';\nimport TextInput from 'sinoui-components/TextInput';\n\nfunction validate(data) {\n  const result = {};\n  if (!data.id) {\n    result.id = '必填';\n  }\n  if (data.title && data.title.startsWith('1')) {\n    result.title = '标题不能以1开头';\n  }\n  return result;\n}\n\nfunction Demo() {\n  const {\n    items,\n    add,\n    edit,\n    save,\n    remove,\n    idPropertyName,\n    editingRows,\n  } = useEditingList('/api/tests', []);\n\n  const handleSave = (row, index, context) => {\n    if (!context.validate()) {\n      alert('数据填写不完整');\n    } else {\n      save(row, index);\n      alert('保存成功');\n    }\n  };\n\n  return (\n    <>\n      <Button onClick={add}>新增</Button>\n      <EditableDataTable\n        data={items}\n        editingRows={editingRows}\n        validate={validate}\n        idPropertyName={idPropertyName}\n      >\n        <TableColumn title=\"序号\" order />\n        <TableColumn title=\"标题\" name=\"title\" editor={TextInput} />\n        <TableColumn title=\"备注\" name=\"note\" editor={TextInput} />\n        <TableColumn\n          title=\"操作\"\n          name=\"id\"\n          render={(value, row, index, id, context) => (\n            <>\n              {context.editing ? (\n                <Button\n                  autoWidth\n                  onClick={() => handleSave(row, index, context)}\n                >\n                  保存\n                </Button>\n              ) : (\n                <Button autoWidth onClick={() => edit(index)}>\n                  编辑\n                </Button>\n              )}\n              <Button autoWidth onClick={() => remove(row, index)}>\n                删除\n              </Button>\n            </>\n          )}\n        />\n      </EditableDataTable>\n    </>\n  );\n}\n`}</code></pre>\n    <p>{`示例：`}</p>\n    <Playground __position={4} __code={'() => {\\n  const validate = data => {\\n    const result = {}\\n\\n    if (data.title && data.title.startsWith(\\'1\\')) {\\n      result.title = \\'标题不能以1开头\\'\\n    }\\n    return result\\n  }\\n  const {\\n    items,\\n    add,\\n    edit,\\n    save,\\n    remove,\\n    idPropertyName,\\n    editingRows,\\n  } = useEditingList(\\'/api/tests\\', [])\\n\\n  const handleSave = (row, index, context) => {\\n    if (!context.validate()) {\\n      alert(\\'数据填写不完整\\')\\n    } else {\\n      save(row, index).then(\\n        () => {\\n          alert(\\'保存成功\\')\\n        },\\n        () => {\\n          alert(\\'保存失败\\')\\n        },\\n      )\\n    }\\n  }\\n\\n  return (\\n    <>\\n      <Button onClick={add}>新增</Button>\\n      <EditableDataTable\\n        data={items}\\n        editingRows={editingRows}\\n        validate={validate}\\n        idPropertyName={idPropertyName}\\n      >\\n        <TableColumn title=\\\"序号\\\" order />\\n        <TableColumn title=\\\"标题\\\" name=\\\"title\\\" editor={TextInput} />\\n        <TableColumn title=\\\"备注\\\" name=\\\"note\\\" editor={TextInput} />\\n        <TableColumn\\n          title=\\\"操作\\\"\\n          name=\\\"id\\\"\\n          render={(value, row, index, id, context) => (\\n            <>\\n              {context.editing ? (\\n                <Button\\n                  autoWidth\\n                  onClick={() => handleSave(row, index, context)}\\n                >\\n                  保存\\n                </Button>\\n              ) : (\\n                <Button autoWidth onClick={() => edit(index)}>\\n                  编辑\\n                </Button>\\n              )}\\n              <Button autoWidth onClick={() => remove(row, index)}>\\n                删除\\n              </Button>\\n            </>\\n          )}\\n        />\\n      </EditableDataTable>\\n    </>\\n  )\\n}'} __scope={{\n      props: this ? this.props : props,\n      useState,\n      useCallback,\n      useMemo,\n      Playground,\n      Props,\n      TableColumn,\n      EditableDataTable,\n      useEditingList,\n      Button,\n      TextInput,\n      produce\n    }} mdxType=\"Playground\">\n  {() => {\n        const validate = data => {\n          const result = {};\n\n          if (data.title && data.title.startsWith('1')) {\n            result.title = '标题不能以1开头';\n          }\n\n          return result;\n        };\n\n        const {\n          items,\n          add,\n          edit,\n          save,\n          remove,\n          idPropertyName,\n          editingRows\n        } = useEditingList('/api/tests', []);\n\n        const handleSave = (row, index, context) => {\n          if (!context.validate()) {\n            alert('数据填写不完整');\n          } else {\n            save(row, index).then(() => {\n              alert('保存成功');\n            }, () => {\n              alert('保存失败');\n            });\n          }\n        };\n\n        return <>\n  <Button onClick={add} mdxType=\"Button\">新增</Button>\n  <EditableDataTable data={items} editingRows={editingRows} validate={validate} idPropertyName={idPropertyName} mdxType=\"EditableDataTable\">\n    <TableColumn title=\"序号\" order mdxType=\"TableColumn\" />\n    <TableColumn title=\"标题\" name=\"title\" editor={TextInput} mdxType=\"TableColumn\" />\n    <TableColumn title=\"备注\" name=\"note\" editor={TextInput} mdxType=\"TableColumn\" />\n    <TableColumn title=\"操作\" name=\"id\" render={(value, row, index, id, context) => <>\n          {context.editing ? <Button autoWidth onClick={() => handleSave(row, index, context)} mdxType=\"Button\">\n              保存\n            </Button> : <Button autoWidth onClick={() => edit(index)} mdxType=\"Button\">\n              编辑\n            </Button>}\n          <Button autoWidth onClick={() => remove(row, index)} mdxType=\"Button\">\n            删除\n          </Button>\n        </>} mdxType=\"TableColumn\" />\n  </EditableDataTable>\n        </>;\n      }}\n    </Playground>\n    <h2 {...{\n      \"id\": \"无数据\"\n    }}>{`无数据`}</h2>\n    <Playground __position={5} __code={'<EditableDataTable data={[]}>\\n  <TableColumn title=\\\"id\\\" name=\\\"id\\\" />\\n  <TableColumn title=\\\"标题\\\" name=\\\"title\\\" />\\n</EditableDataTable>'} __scope={{\n      props: this ? this.props : props,\n      useState,\n      useCallback,\n      useMemo,\n      Playground,\n      Props,\n      TableColumn,\n      EditableDataTable,\n      useEditingList,\n      Button,\n      TextInput,\n      produce\n    }} mdxType=\"Playground\">\n  <EditableDataTable data={[]} mdxType=\"EditableDataTable\">\n    <TableColumn title=\"id\" name=\"id\" mdxType=\"TableColumn\" />\n    <TableColumn title=\"标题\" name=\"title\" mdxType=\"TableColumn\" />\n  </EditableDataTable>\n    </Playground>\n    </MDXLayout>;\n}\n\nMDXContent.isMDXComponent = true;\n  ","import styled, { css } from 'sinoui-components/styles';\nimport Table from 'sinoui-components/Table';\n\nconst captionTypeStyle = css`\n  font-size: ${(props) => props.theme.typography.body1.fontSize}rem;\n  font-family: ${(props) => props.theme.typography.fontFamily};\n  font-weight: ${(props) => props.theme.typography.fontWeightMedium};\n  color: ${(props) => props.theme.typography.body1.color};\n`;\n\nconst bodyTypeStyle = css`\n  font-size: ${(props) => props.theme.typography.body1.fontSize}rem;\n  font-family: ${(props) => props.theme.typography.fontFamily};\n  font-weight: ${(props) => props.theme.typography.body1.fontWeight};\n  color: ${(props) => props.theme.typography.body1.color};\n`;\n\nconst dataTableCellStyle = css`\n  padding: 0;\n  padding-left: 8px;\n  padding-right: 8px;\n  border-bottom: 1px solid\n    ${(props) =>\n      props.theme.palette.type === 'light'\n        ? 'rgba(224, 224, 224, 1)'\n        : 'rgba(80, 80, 80, 1)'};\n`;\n\nconst rowBgColor = {\n  light: {\n    tableRowSelected: 'rgba(0, 0, 0, 0.04)', // 表格行选中时的背景色\n    tableRowHover: 'rgba(0, 0, 0, 0.07)', // 表格行hover时的背景色\n  },\n  dark: {\n    tableRowSelected: 'rgba(255, 255, 255, 0.08)', // 表格行选中时的背景色\n    tableRowHover: 'rgba(255, 255, 255, 0.14)', // 表格行hover时的背景色\n  },\n};\n\nconst StyledTable = styled(Table)`\n  table-layout: fixed;\n  border-top: 1px solid rgba(224, 224, 224, 1);\n  & .sinoui-data-table-head {\n    ${captionTypeStyle};\n    ${dataTableCellStyle};\n    background-color: ${(props) =>\n      props.theme.palette.type === 'light'\n        ? props.theme.palette.primary[50]\n        : props.theme.palette.primary[200]};\n    text-align: left;\n    vertical-align: middle;\n  }\n\n  .sinoui-checkbox-button {\n    margin: 14px;\n  }\n\n  & .sinoui-data-table-head.numeric,\n  .sinoui-data-table-body-td.numeric {\n    text-align: right;\n    flex-direction: row-reverse;\n  }\n\n  & .sinoui-data-table-head.align_center,\n  .sinoui-data-table-body-td.align_center {\n    text-align: center;\n  }\n\n  & .sinoui-data-table-head.checkbox,\n  .sinoui-data-table-body-td.checkbox {\n    padding: 0;\n    width: 48px;\n  }\n\n  & .sinoui-data-table-head.extraInfo,\n  .sinoui-data-table-body-td.extraInfo {\n    padding: 0;\n    width: 60px;\n  }\n\n  & .sinoui-data-table-head:last-child,\n  .sinoui-data-table-body-td:last-child {\n    padding-right: 24px;\n  }\n\n  & .sinoui-data-table-footer {\n    ${captionTypeStyle};\n    ${dataTableCellStyle};\n    padding-left: 24px;\n    padding-right: 12px;\n  }\n\n  & .sinoui-data-table-body-cell-no-data {\n    ${bodyTypeStyle};\n    ${dataTableCellStyle};\n    padding: 64px;\n    text-align: center;\n    color: ${(props) => props.theme.typography.caption.color};\n  }\n\n  & .sinoui-data-table-body-td {\n    ${bodyTypeStyle};\n    ${dataTableCellStyle};\n    text-align: left;\n    vertical-align: middle;\n    word-wrap: break-word;\n    word-break: break-all;\n  }\n\n  & .sinoui-data-table-head-row {\n    height: 48px;\n  }\n\n  & .sinoui-data-table-footer-row,\n  .sinoui-data-table-body-row-no-data {\n    height: 56px;\n    background-color: transparent;\n  }\n\n  & .sinoui-data-table-body-row {\n    height: 48px;\n    background-color: transparent;\n\n    &:hover {\n      background-color: ${(props) =>\n        rowBgColor[props.theme.palette.type].tableRowHover};\n    }\n  }\n\n  & .sinoui-data-table-body-row.selected {\n    background-color: ${(props) =>\n      rowBgColor[props.theme.palette.type].tableRowSelected};\n  }\n`;\n\nexport default StyledTable;\n","import React from 'react';\nimport styled from 'sinoui-components/styles';\n\nconst Wrapper = styled.div`\n  text-align: center;\n  padding: 32px 8px;\n`;\n\n/**\n * 表格空数据时显示的行\n */\nconst EmptyDataTableRow: React.SFC = (props) => {\n  const { children } = props;\n  return (\n    <Wrapper className=\"sinoui-data-table-info\" data-testid=\"emptyInfo\">\n      {children}\n    </Wrapper>\n  );\n};\n\nexport default EmptyDataTableRow;\n","import React from 'react';\nimport { RowType } from './shared/constants';\nimport DataTableRowContext from './shared/DataTableRowContext';\n\nconst context: { type: RowType.ColGroup } = {\n  type: RowType.ColGroup,\n};\n\ninterface Props {\n  children: React.ReactNode;\n}\n\nfunction DataTableColGroup(props: Props) {\n  const { children } = props;\n  return (\n    <DataTableRowContext.Provider value={context}>\n      <colgroup data-testid=\"colgroup\">{children}</colgroup>\n    </DataTableRowContext.Provider>\n  );\n}\n\nexport default DataTableColGroup;\n","import React from 'react';\n\n/**\n * 数据表头\n */\nconst DataTableHead: React.SFC = function TableHead({ children }) {\n  return (\n    <thead>\n      <tr className=\"sinoui-data-table-head-row\" data-testid=\"tableHead\">\n        {children}\n      </tr>\n    </thead>\n  );\n};\n\nexport default DataTableHead;\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React, { useMemo } from 'react';\nimport { RowType } from './shared/constants';\nimport DataTableRowContext, {\n  BodyRowContextType,\n} from './shared/DataTableRowContext';\nimport EditingBodyRowContainer from './shared/EditingBodyRowContainer';\n\ninterface Props<T> {\n  /**\n   * 此行数据\n   */\n  data: T;\n  /**\n   * 数据序号\n   */\n  index: number;\n  /**\n   * 单元格子组件\n   */\n  children: React.ReactNode;\n\n  /**\n   * 是否处于编辑状态\n   */\n  editing?: boolean;\n\n  /**\n   * 行数据错误状态\n   */\n  error?: ErrorResult;\n\n  /**\n   * 单元格编辑器是否被点击过\n   */\n  touched?: TouchedState;\n}\n\ntype CompType<T = any> = React.SFC<Props<T>>;\n\n/**\n * 内容行\n */\nconst DataTableBodyRow: CompType = (props) => {\n  const { data, index, children, editing, error, touched } = props;\n  const context: BodyRowContextType<any> = useMemo(\n    () => ({\n      type: RowType.Body,\n      data,\n      index,\n      editing: !!editing,\n      error,\n      touched,\n    }),\n    [data, index, editing, error, touched],\n  );\n\n  return (\n    <DataTableRowContext.Provider value={context}>\n      <EditingBodyRowContainer.Provider>\n        <tr className=\"sinoui-data-table-body-row\" data-testid=\"bodyRow\">\n          {children}\n        </tr>\n      </EditingBodyRowContainer.Provider>\n    </DataTableRowContext.Provider>\n  );\n};\n\nexport default React.memo(DataTableBodyRow);\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React from 'react';\nimport DataTableBodyRow from './DataTableBodyRow';\n\n/**\n * 数据表格内容组件\n */\nconst DataTableBody: React.SFC<{\n  data?: any[];\n  idPropertyName: string;\n  editingRows?: boolean[];\n  errors?: ErrorResult[];\n  touched?: TouchedState[];\n}> = function DataTableBody({\n  idPropertyName,\n  data,\n  children,\n  editingRows = [],\n  errors,\n  touched,\n}) {\n  if (!data || data.length === 0) {\n    return null;\n  }\n  return (\n    <tbody>\n      {data.map((item, index) => (\n        <DataTableBodyRow\n          key={item[idPropertyName] || `index_${index}`}\n          data={item}\n          index={index}\n          data-testid=\"tableBody\"\n          editing={editingRows[index]}\n          error={errors ? errors[index] : undefined}\n          touched={touched ? touched[index] : undefined}\n        >\n          {children}\n        </DataTableBodyRow>\n      ))}\n    </tbody>\n  );\n};\n\nexport default DataTableBody;\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React, { useMemo, useRef, useEffect } from 'react';\nimport classNames from 'classnames';\nimport Table from './Table';\nimport EditableDataTableContext from './shared/EditableDataTableContext';\nimport EmptyDataTableRow from './EmptyDataTableRow';\nimport DataTableColGroup from './DataTableColGroup';\nimport DataTableHead from './DataTableHead';\nimport DataTableBody from './DataTableBody';\n\nexport interface Props<T> {\n  /**\n   * 列表数据\n   */\n  data?: T[];\n  /**\n   * 处于编辑状态的行。`editingRows`数组需要与`data`数组保持一一对应的关系，`editingRows`数组中每一个数据项代表的是`data`数组中对应数据项的编辑状态，`true`表示编辑状态，`false`表示非编辑状态。\n   */\n  editingRows?: boolean[];\n\n  /**\n   * 给table元素添加className\n   */\n  className?: string;\n\n  /**\n   * 给table元素添加样式\n   */\n  style?: React.CSSProperties;\n\n  /**\n   * 错误状态\n   */\n  errors?: ErrorResult[];\n\n  /**\n   * 单元格是否被点击的状态\n   */\n  touched?: TouchedState[];\n\n  /**\n   * 子节点，一组TableColumn。使用TableColumn指表格列信息。\n   */\n  children: React.ReactNode;\n  /**\n   * 数据的id属性名。默认为'id'。\n   */\n  idPropertyName?: string;\n  /**\n   * 无数据时的提示信息。默认为“暂无数据”。\n   */\n  emptyTitle?: React.ReactNode;\n\n  /**\n   * 监听行数据发生变化的事件。回调函数的`rowData`参数代表的是变更后的行数据对象。\n   */\n  onRowChange?: (index: number, rowData: T) => void;\n\n  /**\n   * 监听单元格值变化事件。回调函数的`rowData`参数代表的是变更后的行数据对象。\n   */\n  onFieldChange?: (index: number, fieldName: string, rowData: T) => void;\n\n  /**\n   * 给正在编辑的行添加校验规则。\n   * \n   * 返回错误提示：\n   * \n   * ```js\n     {\n       'title': '不能为空',\n       'name': '不能少于三个字'\n     }\n   * ```\n   *\n   * 上面的错误信息表示字段`title`和`name`校验失败。\n   * \n   * 如果数据行没有错误，则返回`{}`或者`undefined`。\n   */\n  validate?: (rowData: T) => { [x: string]: string } | undefined;\n}\n\nfunction useEditableDataTable<T>({\n  idPropertyName = 'id',\n  onRowChange,\n  validate,\n  onFieldChange,\n}: Props<T>) {\n  const options = useRef({\n    onRowChange,\n    validate,\n    onFieldChange,\n  });\n\n  useEffect(() => {\n    options.current.onRowChange = onRowChange;\n    options.current.validate = validate;\n    options.current.onFieldChange = onFieldChange;\n  }, [onRowChange, validate, onFieldChange]);\n\n  const context = useMemo(\n    () => ({ idPropertyName, options: options.current }),\n    [idPropertyName],\n  );\n\n  return context;\n}\n\n/**\n * 可编辑表格\n */\nfunction EditableDataTable<T>(props: Props<T>) {\n  const {\n    data = [],\n    idPropertyName = 'id',\n    children,\n    emptyTitle = '暂无数据',\n    editingRows,\n    errors,\n    touched,\n    className,\n    style,\n  } = props;\n  const context = useEditableDataTable(props);\n  return (\n    <>\n      <Table\n        className={classNames('sinoui-editable-data-table', className)}\n        style={style}\n      >\n        <EditableDataTableContext.Provider value={context}>\n          <DataTableColGroup>{children}</DataTableColGroup>\n          <DataTableHead>{children}</DataTableHead>\n          <DataTableBody\n            data={data}\n            idPropertyName={idPropertyName}\n            editingRows={editingRows}\n            errors={errors}\n            touched={touched}\n          >\n            {children}\n          </DataTableBody>\n        </EditableDataTableContext.Provider>\n      </Table>\n      {(!data || data.length === 0) && (\n        <EmptyDataTableRow>{emptyTitle}</EmptyDataTableRow>\n      )}\n    </>\n  );\n}\n\nexport default EditableDataTable;\n","import React, { useState, useContext, useCallback, useMemo } from 'react';\nimport FormHelpText from 'sinoui-components/Form/FormHelpText';\nimport DataTableRowContext, {\n  BodyRowContextType,\n} from './shared/DataTableRowContext';\nimport EditableDataTableContext from './shared/EditableDataTableContext';\nimport EditingBodyRowContainer from './shared/EditingBodyRowContainer';\n\ninterface Props {\n  editor: React.ReactType;\n  name: string;\n}\n\nfunction isChangeEvent(\n  event?: React.ChangeEvent<HTMLInputElement> | string,\n): event is React.ChangeEvent<HTMLInputElement> {\n  return !!(event && (event as React.ChangeEvent<HTMLInputElement>).target);\n}\n\n/**\n * 单元格编辑器\n */\nfunction DataTableCellEditor(props: Props) {\n  const { name, editor: Editor } = props;\n  const { data, index } = useContext(DataTableRowContext) as BodyRowContextType<\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    any\n  >;\n  const valueFromContext = data[name] || '';\n  const [, setValue] = useState(valueFromContext);\n  const { options } = useContext(EditableDataTableContext);\n  const {\n    touched,\n    errors,\n    validateField,\n    errorControlled,\n  } = EditingBodyRowContainer.useContainer();\n\n  const handleChange = useCallback(\n    (event?: React.ChangeEvent<HTMLInputElement> | string) => {\n      const newValue = isChangeEvent(event) ? event.target.value : event;\n      setValue(newValue);\n\n      data[name] = newValue;\n\n      if (options.onRowChange) {\n        options.onRowChange(index, data);\n      }\n\n      if (options.onFieldChange) {\n        options.onFieldChange(index, name, data);\n      }\n\n      if (!errorControlled) {\n        validateField(name, data);\n      }\n    },\n    [data, name, options, index, errorControlled, validateField],\n  );\n\n  const isTouched = touched[name];\n  const error = isTouched ? errors[name] : undefined;\n\n  const element = useMemo(\n    () => (\n      <>\n        <Editor\n          name={name}\n          value={valueFromContext}\n          item={data}\n          onChange={handleChange}\n          error={!!error}\n        />\n        {error && (\n          <FormHelpText\n            error\n            className=\"sinoui-editable-data-table-editor-error\"\n          >\n            {error}\n          </FormHelpText>\n        )}\n      </>\n    ),\n    [data, error, handleChange, name, valueFromContext],\n  );\n\n  return element;\n}\n\nexport default React.memo(DataTableCellEditor);\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React, { useContext } from 'react';\nimport EditableDataTableContext from './shared/EditableDataTableContext';\nimport DataTableRowContext, {\n  BodyRowContextType,\n} from './shared/DataTableRowContext';\nimport DataTableCellEditor from './DataTableCellEditor';\nimport EditingBodyRowContainer from './shared/EditingBodyRowContainer';\n\ninterface CellState<T> {\n  data: T;\n  index: number;\n  editing: boolean;\n  errors?: { [x: string]: any };\n  validate: (rowData?: T) => boolean;\n  idPropertyName: string;\n}\n\ninterface DataCellProps<T, CellDataType> {\n  /**\n   * 是否显示序号\n   */\n  order?: boolean;\n  /**\n   * 渲染单元格\n   */\n  render?: (\n    value: CellDataType,\n    row: T,\n    index: number,\n    id: string,\n    context: {\n      editing: boolean;\n      validate: (rowData?: any) => boolean;\n    },\n  ) => React.ReactNode;\n  /**\n   * 数据列名称\n   */\n  name?: string;\n\n  /**\n   * 编辑器\n   */\n  editor?: React.ReactType;\n}\n\nfunction useCellState<T>(): CellState<T> {\n  const { data, index, editing } = useContext(\n    DataTableRowContext,\n  ) as BodyRowContextType<any>;\n  const { validate } = EditingBodyRowContainer.useContainer();\n  const { idPropertyName } = useContext(EditableDataTableContext);\n\n  return {\n    data,\n    index,\n    editing,\n    idPropertyName,\n    validate,\n  };\n}\n\n/**\n * 数据单元格\n */\nfunction DataTableBodyCellInner(\n  props: DataCellProps<any, any> & CellState<any>,\n) {\n  const {\n    order,\n    render,\n    name,\n    editor,\n    index,\n    editing,\n    data,\n    idPropertyName,\n    validate,\n  } = props;\n\n  if (order) {\n    return (\n      <td className=\"sinoui-data-table-body-td align_center\">{index + 1}</td>\n    );\n  }\n\n  if (editing && editor) {\n    if (!name) {\n      throw new Error(`没有给TableColumn指定name属性`);\n    }\n    return (\n      <td className=\"sinoui-data-table-body-td\">\n        <DataTableCellEditor name={name} editor={editor} />\n      </td>\n    );\n  }\n\n  if (render) {\n    return (\n      <td className=\"sinoui-data-table-body-td\">\n        {render(\n          name ? data[name] : undefined,\n          data,\n          index,\n          data[idPropertyName],\n          {\n            editing,\n            validate,\n          },\n        )}\n      </td>\n    );\n  }\n\n  return name ? (\n    <td className=\"sinoui-data-table-body-td\">{data[name]}</td>\n  ) : null;\n}\n\nconst MemoDataTableBodyCellInner = React.memo(DataTableBodyCellInner);\n\nfunction DataTableBodyCell<T = any, CellDataType = string>(\n  props: DataCellProps<T, CellDataType>,\n) {\n  const state = useCellState<any>();\n\n  return <MemoDataTableBodyCellInner {...props} {...state} />;\n}\n\nexport default DataTableBodyCell;\n","import React from 'react';\nimport classNames from 'classnames';\n\ninterface Props {\n  order?: boolean;\n  title?: React.ReactNode;\n}\n\n/**\n * 表格头单元格\n */\nfunction DataTableHeadCell(props: Props) {\n  const { order, title } = props;\n  return (\n    <th\n      className={classNames('sinoui-data-table-head', {\n        // eslint-disable-next-line @typescript-eslint/camelcase\n        align_center: order,\n      })}\n    >\n      {title}\n    </th>\n  );\n}\n\nexport default DataTableHeadCell;\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React, { useContext } from 'react';\nimport DataTableRowContext from './shared/DataTableRowContext';\nimport DataTableBodyCell from './DataTableBodyCell';\nimport DataTableHeadCell from './DataTableHeadCell';\nimport { RowType } from './shared/constants';\n\nexport interface Props<T, CellDataType> {\n  /**\n   * 数据列名称\n   */\n  name?: string;\n  /**\n   * 标题\n   */\n  title?: React.ReactNode;\n\n  /**\n   * 是否显示序号\n   */\n  order?: boolean;\n\n  /**\n   * 渲染单元格\n   */\n  render?: (\n    value: CellDataType,\n    row: T,\n    index: number,\n    id: string,\n    context: {\n      editing: boolean;\n      validate: (rowData?: any) => boolean;\n    },\n  ) => React.ReactNode;\n\n  /**\n   * 列宽度\n   */\n  width?: number | string;\n\n  /**\n   * 编辑器\n   */\n  editor?: React.ReactType;\n}\n\n/**\n * 表格列\n */\nconst TableColumn: React.SFC<Props<any, any>> = React.memo(function TableColumn<\n  T,\n  CellDataType\n>(props: Props<T, CellDataType>) {\n  const { title, order, width } = props;\n  const { type } = useContext(DataTableRowContext);\n\n  switch (type) {\n    case RowType.Head:\n      return <DataTableHeadCell title={title} order={order} />;\n    case RowType.ColGroup:\n      return <col width={order ? 50 : width} />;\n    default:\n      return <DataTableBodyCell {...props} />;\n  }\n});\n\nexport default TableColumn;\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React from 'react';\nimport { RowType } from './constants';\n\nexport interface BodyRowContextType<T> {\n  type: RowType.Body;\n  data: T;\n  index: number;\n  /**\n   * 是否处于编辑状态\n   */\n  editing: boolean;\n\n  /**\n   * 数据行的验证结果\n   */\n  error?: ErrorResult;\n\n  /**\n   * 单元格数据被点击状态\n   */\n  touched?: TouchedState;\n}\n\nexport interface HeadRowContextType {\n  type: RowType.Head;\n}\n\nexport interface ColGroupContextType {\n  type: RowType.ColGroup;\n}\n\nexport type RowContextType<T = any> =\n  | BodyRowContextType<T>\n  | HeadRowContextType\n  | ColGroupContextType;\n\nconst DataTableRowContext = React.createContext<RowContextType>({\n  type: RowType.Head,\n});\n\nexport default DataTableRowContext;\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React from 'react';\n\ninterface ContextType {\n  idPropertyName: string;\n  options: {\n    onRowChange?: (index: number, rowData: any) => void;\n    onFieldChange?: (index: number, fieldName: string, rowData: any) => void;\n    validate?: (rowData: any) => { [x: string]: string } | undefined;\n  };\n}\n\nconst EditableDataTableContext = React.createContext<ContextType>({\n  idPropertyName: 'id',\n  options: {},\n});\n\nexport default EditableDataTableContext;\n","import { useState, useCallback, useRef, useEffect, useContext } from 'react';\nimport { createContainer } from 'unstated-next';\nimport shallowEqual from 'shallowequal';\nimport EditableDataTableContext from './EditableDataTableContext';\nimport DataTableRowContext, { BodyRowContextType } from './DataTableRowContext';\n\ninterface ContextType<T> {\n  /**\n   * 校验错误信息\n   */\n  errors: {\n    [x: string]: string;\n  };\n\n  /**\n   * 表单校验状态是否是受控于外部。（也就是使用者处理数据行校验）\n   */\n  errorControlled: boolean;\n\n  /**\n   * 点击状态\n   */\n  touched: {\n    [x: string]: boolean;\n  };\n\n  /**\n   * 校验数据行\n   *\n   * 如果通过校验，则返回`true`，否则返回`false`。\n   */\n  validate: (newItem?: T) => boolean;\n\n  /**\n   * 校验表单域\n   */\n  validateField: (fieldName: string, newRowData: T) => void;\n}\n\n/**\n * 用于正在编辑的行数据的状态管理hook\n *\n * 主要维护的状态：\n *\n * * 表单校验\n * * 是否点击过的状态\n *\n */\nfunction useEditingBodyRow<T>(): ContextType<T> {\n  const { data: rowData, error: outerError, touched: outTouched } = useContext(\n    DataTableRowContext,\n  ) as BodyRowContextType<T>;\n  const [touched, setTouched] = useState<{ [x: string]: boolean }>({});\n  const [errors, setErrors] = useState({});\n  const rowDataRef = useRef(rowData);\n  const { options, idPropertyName } = useContext(EditableDataTableContext);\n\n  useEffect(() => {\n    rowDataRef.current = rowData;\n  }, [rowData]);\n\n  const updateErrors = useCallback((newErrors: any) => {\n    setErrors((prev) => {\n      if (!shallowEqual(newErrors, prev)) {\n        return newErrors;\n      }\n      return prev;\n    });\n  }, []);\n\n  useEffect(() => {\n    if (!(rowData as any)[idPropertyName] && options.validate) {\n      const newErrors = options.validate(rowData) || {};\n      updateErrors(newErrors);\n    }\n  }, [rowData, options, idPropertyName, updateErrors]);\n\n  const validate = useCallback(\n    (newRowData: T = rowDataRef.current, updateTouched: boolean = true) => {\n      if (options.validate) {\n        const result = options.validate(newRowData);\n        if (result) {\n          if (updateTouched) {\n            const newTouched: { [x: string]: boolean } = {};\n            Object.keys(result).forEach((key) => {\n              newTouched[key] = true;\n            });\n\n            setTouched(newTouched);\n          }\n\n          updateErrors(result || {});\n\n          return (\n            Object.keys(result).filter((key) => !!result[key]).length === 0\n          );\n        }\n      }\n\n      return true;\n    },\n    [options, updateErrors],\n  );\n\n  const validateField = useCallback(\n    (fieldName: string, newRowData: T) => {\n      setTouched((prev) => {\n        if (!prev[fieldName]) {\n          return { ...prev, [fieldName]: true };\n        }\n        return prev;\n      });\n      validate(newRowData, false);\n    },\n    [validate],\n  );\n\n  return {\n    errors: outerError || errors,\n    errorControlled: !!outerError,\n    touched: outTouched || touched,\n    validate,\n    validateField,\n  };\n}\n\nconst EditingBodyRowContainer = createContainer(useEditingBodyRow);\n\nexport default EditingBodyRowContainer;\n","export enum RowType {\n  Body,\n  Head,\n  ColGroup,\n}\n\nexport const EMPTY_ROW_INFO = '暂无数据';\n","import useRestListApi, { Options } from '@sinoui/use-rest-list-api';\nimport { useState, useEffect, useCallback } from 'react';\nimport { produce } from 'immer';\n\n/**\n * 维护可编辑列表的hook\n */\nexport default function useEditingList<T>(\n  url: string,\n  defaultValue: T[] = [],\n  options?: Options<T>,\n) {\n  const { keyName = 'id' } = options || {};\n  const {\n    items,\n    setItems,\n    remove,\n    removeItemAt,\n    update,\n    save,\n    isLoading,\n    addItem,\n  } = useRestListApi<T>(url, defaultValue);\n  const [editingRows, setEditingRows] = useState(() =>\n    defaultValue.map(() => false),\n  );\n\n  const itemsCount = items.length;\n  useEffect(() => {\n    setEditingRows((prev) => {\n      if (itemsCount !== prev.length) {\n        return new Array(itemsCount).fill(false);\n      }\n      return prev;\n    });\n  }, [isLoading, itemsCount]);\n\n  const add = () => {\n    setItems([...items, {}]);\n    setEditingRows([...editingRows, true]);\n  };\n\n  const asyncRemove = useCallback(\n    async (row: T, index: number) => {\n      try {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if ((row as any)[keyName]) {\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          await remove((row as any)[keyName]);\n          setEditingRows(\n            produce(editingRows, (draft) => {\n              draft.splice(index, 1);\n            }),\n          );\n        } else {\n          removeItemAt(index);\n          setEditingRows(\n            produce((draft) => {\n              draft.splice(index, 1);\n            }),\n          );\n        }\n      } catch (error) {\n        throw error;\n      }\n    },\n    [editingRows, keyName, remove, removeItemAt],\n  );\n\n  const asyncUpdate = useCallback(\n    async (row: T, index: number) => {\n      try {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if ((row as any)[keyName]) {\n          await update(row);\n        } else {\n          const result = await save(row, false);\n          removeItemAt(index);\n          addItem(result);\n        }\n\n        setEditingRows(\n          produce(editingRows, (draft) => {\n            draft[index] = false;\n          }),\n        );\n      } catch (error) {\n        throw error;\n      }\n    },\n    [addItem, editingRows, keyName, removeItemAt, save, update],\n  );\n\n  const edit = useCallback(\n    (index: number) => {\n      setEditingRows(\n        produce(editingRows, (draft) => {\n          draft[index] = true;\n        }),\n      );\n    },\n    [editingRows],\n  );\n\n  return {\n    items,\n    editingRows,\n    add,\n    remove: asyncRemove,\n    edit,\n    save: asyncUpdate,\n    idPropertyName: keyName,\n  };\n}\n"],"sourceRoot":""}