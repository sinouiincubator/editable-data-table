---
name: 组件API
route: /components-api
---

import { Playground, Props } from 'docz';
import TableColumn from '../src/TableColumn';
import EditableDataTable from '../src/EditableDataTable';
import Button from 'sinoui-components/Button';
import TextInput from 'sinoui-components/TextInput';

# 组件 API

包括两个核心的组件和一个自定义 hook：

- EditableDataTable - 可编辑数据表格组件
- TableColumn - 定义数据表格列的组件
- useEditingList - 可编辑表格数据的状态管理 hook

## EditableDataTable

<Props of={EditableDataTable} />

## TableColumn

<Props of={TableColumn} />

## useEditingList

### 使用

```tsx
import { useEditingList } from '@sinouiincubator/editable-data-table';

function validate(data) {
  const result = {};
  if (!data.id) {
    result.id = '必填';
  }
  if (data.title && data.title.startsWith('1')) {
    result.title = '标题不能以1开头';
  }
  return result;
}

function Demo() {
  const { items, add, edit, save, remove } = useEditingList('/tests', []);

  const handleSave = async (row, index, context) => {
    if (!context.validate()) {
      alert('数据填写不完整');
    } else {
      await save(row, index);
      alert('保存成功');
    }
  };

  const handleEdit = (index) => {
    edit(index);
  };

  const handleRemove = (index) => {
    remove(index);
  };

  const handleAdd = () => {
    add();
  };

  return (
    <>
      <Button onClick={handleAdd}>新增</Button>
      <EditableDataTable
        data={items}
        editingRows={editingRows}
        validate={validate}
      >
        <TableColumn title="序号" order />
        <TableColumn title="id" name="id" editor={TextInput} />
        <TableColumn title="标题" name="title" editor={TextInput} />
        <TableColumn
          title="操作"
          name="id"
          render={(value, row, index, id, context) => (
            <>
              {context.editing ? (
                <Button
                  autoWidth
                  onClick={() => handleSave(row, index, context)}
                >
                  保存
                </Button>
              ) : (
                <Button autoWidth onClick={() => handleEdit(index)}>
                  编辑
                </Button>
              )}
              <Button autoWidth onClick={() => handleRemove(index)}>
                删除
              </Button>
            </>
          )}
        />
      </EditableDataTable>
    </>
  );
}
```
